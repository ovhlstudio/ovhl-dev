---
type: project-snapshot
purpose: AI Analysis & Debugging Context
generated_by: OVHL CLI v0.1.0
date: 11/25/2025, 11:40:32 PM
---

# üß† OVHL ENTERPRISE FRAMEWORK CONTEXT

> **üõë CRITICAL INSTRUCTION FOR AI AGENT:**
> You are operating within the **OVHL Enterprise Framework**.
> Deviating from the architecture rules below is **STRICTLY FORBIDDEN**.

### 1. üèõÔ∏è ARCHITECTURE LAWS
**Lifecycle:** `Init(ctx) [Setup] -> Start() [Runtime] -> Shutdown() [Cleanup]`

**Mandatory Rules:**
- **Pattern:** Singleton Service (Server) & Controller (Client).
- **Memory:** Every module has `self.Trove` injected. USE IT for cleanup.
- **Network:** NO manual RemoteEvents. Use `self.Bridge` with `SharedConfig` contracts.
- **Logging:** NO print/warn. Use `self.Logger:Info()`, `:Debug()`, etc.

### 2. üß™ TESTING MANDATE
TestEZ is MANDATORY. Mirror src/ structure in tests/. No Logic without Tests.

---
# üìä SNAPSHOT SUMMARY
| Metric | Details |
|---|---|
| **Health Score** | 94 / 100 |
| **Target Root** | `E:\OMNIVERSE-DEV\ovhl-framework` |
| **Git Info** | Branch: ui-fondation | Commit: 226151d |
| **Analysis Time** | 0.27s |
---

## üìÅ Project Structure

### üì¶ Statistics Summary

| Metric | Value |
|---|---|
| **Files** | 82 |
| **Folders** | 52 |
| **Lines** | 5468 |
| **Size** | 174.77 KB |

### üó∫Ô∏è Distribution

| Scope | Files | Lines |
|---|---|---|
| **Server** | 19 | 1462 |
| **Client** | 10 | 747 |
| **Shared** | 53 | 3259 |

### üå≥ Project Scaffold
~~~text
‚îú‚îÄ‚îÄ üìÅ reports
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ json
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ markdown
‚îú‚îÄ‚îÄ üìÅ src
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ReplicatedStorage
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ OVHL
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üåô Bootstrap.luau
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ Config
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô LoggerConfig.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üåô SystemPanelConfig.luau
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ Core
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô ConfigSchema.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Constants.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Context.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Env.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Framework.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô FrameworkTypes.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Loader.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Manifest.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ Networking
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô Bridge.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô Middleware.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üåô NetworkEnums.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô SharedConfigLoader.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Signals.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô SmartLogger.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üåô TypeValidator.luau
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ Modules
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ Inventory
‚îÇ   ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ üåô SharedConfig.luau
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÅ UI
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ üìÅ Foundation
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô API.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô ActionGuard.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô Assets.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ Bridges
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üåô Topbar.lua
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ Components
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô AsyncButton.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô GridContainer.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô ItemSlot.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô ModalWrapper.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô ScreenWrapper.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô SmartButton.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô SmartText.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô SmartWindow.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üåô Window.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô Layout.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô Motion.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô MotionPresets.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô OVHLTheme.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô SafeLoader.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ üåô Theme.luau
‚îÇ   ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ üåô Util.luau
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ üìÅ Views
‚îÇ   ‚îÇ               ‚îú‚îÄ‚îÄ üìÅ Inventory
‚îÇ   ‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ üåô InventoryView.luau
‚îÇ   ‚îÇ               ‚îú‚îÄ‚îÄ üìÅ Shop
‚îÇ   ‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ üåô ShopView.luau
‚îÇ   ‚îÇ               ‚îî‚îÄ‚îÄ üìÅ System
‚îÇ   ‚îÇ                   ‚îú‚îÄ‚îÄ üìÅ Components
‚îÇ   ‚îÇ                   ‚îÇ   ‚îú‚îÄ‚îÄ üåô ConfirmationDialog.luau
‚îÇ   ‚îÇ                   ‚îÇ   ‚îî‚îÄ‚îÄ üåô PlayerInspector.luau
‚îÇ   ‚îÇ                   ‚îú‚îÄ‚îÄ üåô FrameworkPanelView.luau
‚îÇ   ‚îÇ                   ‚îú‚îÄ‚îÄ üåô NotificationView.luau
‚îÇ   ‚îÇ                   ‚îî‚îÄ‚îÄ üìÅ Pages
‚îÇ   ‚îÇ                       ‚îî‚îÄ‚îÄ üåô PermissionPage.luau
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ServerScriptService
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ OVHL
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ Config
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üåô PermissionConfig.luau
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ Core
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô DataMigrator.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô NetworkBridge.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô NetworkGuard.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ Permissions
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ Adapters
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üåô HDAdmin.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üåô InternalDB.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô RateLimiter.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô ServerKernel.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üåô SessionMutex.luau
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ Modules
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ Inventory
‚îÇ   ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ üåô InventoryService.luau
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üåô ServerRuntime.server.luau
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ Services
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô DataManagerService.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô MonetizationService.luau
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üåô PermissionService.luau
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üåô TestRunner.server.luau
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ StarterPlayer
‚îÇ       ‚îî‚îÄ‚îÄ üìÅ StarterPlayerScripts
‚îÇ           ‚îî‚îÄ‚îÄ üìÅ OVHL
‚îÇ               ‚îú‚îÄ‚îÄ üåô ClientRuntime.client.luau
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ Controllers
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ üåô FrameworkController.luau
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ üåô NotificationController.luau
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ üåô PermissionController.luau
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ Core
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ üåô ClientKernel.luau
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ üåô FinderService.luau
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ Modules
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ Inventory
‚îÇ               ‚îÇ       ‚îî‚îÄ‚îÄ üåô InventoryController.luau
‚îÇ               ‚îî‚îÄ‚îÄ üåô TestRunner.client.luau
‚îî‚îÄ‚îÄ üìÅ tests
    ‚îú‚îÄ‚îÄ üìÅ ReplicatedStorage
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ Mocks
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üåô MockDataStore.luau
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üåô MockPlayer.luau
    ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ OVHL
    ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ Core
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Context.spec.luau
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Loader.spec.luau
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üåô Signals.spec.luau
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üåô SmartLogger.spec.luau
    ‚îÇ       ‚îî‚îÄ‚îÄ üìÅ Modules
    ‚îÇ           ‚îî‚îÄ‚îÄ üåô ConfigIntegrity.spec.luau
    ‚îú‚îÄ‚îÄ üìÅ ServerScriptService
    ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ OVHL
    ‚îÇ       ‚îî‚îÄ‚îÄ üìÅ Core
    ‚îÇ           ‚îú‚îÄ‚îÄ üåô DataMigrator.spec.luau
    ‚îÇ           ‚îú‚îÄ‚îÄ üåô NetworkGuard.spec.luau
    ‚îÇ           ‚îú‚îÄ‚îÄ üåô RateLimiter.spec.luau
    ‚îÇ           ‚îî‚îÄ‚îÄ üåô SessionMutex.spec.luau
    ‚îî‚îÄ‚îÄ üìÅ StarterPlayer
        ‚îî‚îÄ‚îÄ üìÅ StarterPlayerScripts
            ‚îî‚îÄ‚îÄ üìÅ OVHL
                ‚îú‚îÄ‚îÄ üìÅ Core
                ‚îÇ   ‚îî‚îÄ‚îÄ üåô ClientKernel.spec.luau
                ‚îî‚îÄ‚îÄ üìÅ Modules
                    ‚îî‚îÄ‚îÄ üìÅ Inventory
                        ‚îî‚îÄ‚îÄ üåô InventoryController.spec.luau

~~~
> **üëÆ‚Äç‚ôÇÔ∏è OVHL LAW: STRUCTURE**
> *   **Server:** Logic that never trusts the client (DB, Auth).
> *   **Client:** Visuals & Input handling only.
> *   **Shared:** Configs, Constants, & Utility functions.


## üì° Telemetry

### ‚ÑπÔ∏è Silent Logger (No Verbose) (-0 pts)
> **AI Advice:** Logger seems available but no logs detected. Consider adding :Info() for traceability.

| File | Line | Code Snippet |
|---|---|---|
| `src/StarterPlayer/StarterPlayerScripts/OVHL/Controllers/NotificationController.luau` | - | - |

### üì° Active Telemetry Domains

| Module | Domain |
|---|---|
| `NetworkBridge.luau` | **SECURITY** |
| `NetworkGuard.luau` | **SECURITY** |
| `ServerKernel.luau` | **SYSTEM** |
| `DataManagerService.luau` | **DATA** |
| `MonetizationService.luau` | **SHOP** |
| `PermissionService.luau` | **PERMISSION** |
| `SafeLoader.luau` | **USER_INTERFACE** |
| `ClientKernel.luau` | **SYSTEM** |
| `FinderService.luau` | **UI** |
| `Topbar.lua` | **TOPBAR** |
| `AsyncButton.luau` | **UX** |
| `SmartButton.luau` | **UX** |
| `Window.luau` | **UI_LAYOUT** |
| `InventoryService.luau` | **INVENTORY** |
| `NotificationView.luau` | **UX** |
> **üëÆ‚Äç‚ôÇÔ∏è OVHL LAW: OBSERVABILITY**
> *   **No Blind Logic:** Logic files MUST have eyes (Logger).
> *   **Traceability:** Use `self.Logger:Info()` to track flow. NO `print()`.


## üõ°Ô∏è Security Sweep

### üõ°Ô∏è Security Analysis Results

‚úÖ **CLEAN: No Security Vulnerabilities Found.**


> **üëÆ‚Äç‚ôÇÔ∏è OVHL LAW: SECURITY**
> *   **No Polling:** Never use `while wait()` loops. They destroy server performance.
> *   **No Global State:** Do not define mutable tables at the top level. Use `Init/Start` or `Context` to store state.


## ‚ôªÔ∏è UI Reusability

### ‚ôªÔ∏è Reusability Analysis

‚úÖ UI Architecture looks modular.

> **üëÆ‚Äç‚ôÇÔ∏è OVHL LAW: MODULARITY**
> *   **DRY (Don't Repeat Yourself):** If a UI piece appears twice, make it a Component.
> *   **Dumb Views:** Views should only handle Layout & Data Binding, not complex logic.


## üîó Dependencies

### üîó Dependency Analysis

‚úÖ **CLEAN: No Circular Dependencies found.**

### üì¶ External Packages (Wally)
| Package | Status | Refs |
|---|---|---|
| **TestEZ** | ‚úÖ Active | 2 refs |
| **Fusion** | ‚úÖ Active | 7 refs |
| **topbarplus** | ‚úÖ Active | 1 refs |
| **onyx-ui** | ‚úÖ Active | 3 refs |
| **Promise** | ‚úÖ Active | 1 refs |
| **Signal** | ‚úÖ Active | 2 refs |
| **profileservice** | ‚úÖ Active | 1 refs |
| **Option** | ‚ö†Ô∏è Unused | 0 refs |
| **Trove** | ‚úÖ Active | 4 refs |

### üï∑Ô∏è Module Coupling
- **Legacy Core Refs:** 0
- **Modern Loader Refs:** 75

> **üëÆ‚Äç‚ôÇÔ∏è OVHL LAW: DEPENDENCIES**
> *   **No Cycles:** A -> B -> A is forbidden.
> *   **Wally:** Manage libs via `wally.toml`.


## üßπ Code Quality

### üìç Path & Quality Analysis

‚úÖ **CLEAN: Architecture Compliant.**

> **üëÆ‚Äç‚ôÇÔ∏è OVHL LAW: PATHING**
> *   **No Hardcoded Paths:** Never use `game.ServerScriptService.X`. Use `Loader.Get("Alias")`.
> *   **No Relative Hell:** Never use `script.Parent.Parent`. Use `Loader.Get("Alias")`.

#### üß† AI KNOWLEDGE BASE
**‚ùå BAD:**
~~~lua
local Data = require(script.Parent.Parent.Services.DataService)
~~~
**‚úÖ GOOD (OVHL Standard):**
~~~lua
local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
local Logger = Loader.Get("Logger")
~~~


## üé® UI System

### ‚ÑπÔ∏è Hardcoded Color (-1 pts)
> **AI Advice:** Avoid raw colors. Use **API.Theme** tokens (e.g. Theme.Colors.Base.Main).

| File | Line | Code Snippet |
|---|---|---|
| `src/ReplicatedStorage/OVHL/UI/Foundation/SafeLoader.luau` | 33 | ```BackgroundColor3 = Color3.fromRGB(40, 0, 0),``` |
| `src/ReplicatedStorage/OVHL/UI/Foundation/SafeLoader.luau` | 38 | ```TextColor3 = Color3.new(1,0.5,0.5),``` |
| `src/ReplicatedStorage/OVHL/UI/Foundation/Components/ItemSlot.luau` | 58 | ```TextColor3 = Color3.new(0,0,0),``` |
| `src/ReplicatedStorage/OVHL/UI/Foundation/Components/ModalWrapper.luau` | 13 | ```local color = props.Color or Color3.new(0, 0, 0)``` |
| `src/ReplicatedStorage/OVHL/UI/Views/System/Components/ConfirmationDialog.luau` | 22 | ```BackgroundColor3 = Color3.new(0, 0, 0),``` |
| `src/ReplicatedStorage/OVHL/UI/Views/System/Pages/PermissionPage.luau` | 134 | ```scope:New "TextBox" { Size = UDim2.new(1, -30, 1, 0), BackgroundTransparency = 1, Text = SearchText, PlaceholderText = "Search by username...", PlaceholderColor3 = Color3.fromRGB(100,100,100), TextColor3 = UI.Theme.Colors.BaseContent.Main, TextSize = 16, FontFace = UI.Theme.Font.Body, TextXAlignment = Enum.TextXAlignment.Left, ClearTextOnFocus = false, [UI.OnChange "Text"] = function(newText) SearchText:set(newText) end }``` |

### üé® UI Tech Stack Overview

- **Fusion Usage:** 10 files
- **Onyx Usage:** 5 files

> **üëÆ‚Äç‚ôÇÔ∏è OVHL LAW: UI SYSTEM**
> *   **Declarative Only:** Use Fusion/Onyx. Vanilla `Instance.new` is messy.
> *   **Theme First:** Use `API.Theme` tokens. Raw colors break Dark Mode support.


## ‚ö†Ô∏è Breaking Changes

### üïµÔ∏è API Contract Diff (HEAD vs HEAD~1)

‚úÖ **CLEAN: No Breaking Changes detected.**



#### üï∞Ô∏è Git Stats
```diff

```
> **üëÆ‚Äç‚ôÇÔ∏è OVHL LAW: API STABILITY**
> *   **Never Remove:** Deprecate keys instead of deleting them.
> *   **Contract First:** Define Args in `SharedConfig` before coding.


## üìö Complete Codebase Snapshot


### üì¶ Group: Shared


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Bootstrap.luau</strong> (18 lines, 493 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Bootstrap`

```lua
   1 | --!strict
   2 | -- @Core: Bootstrap
   3 | local RunService = game:GetService("RunService")
   4 | local Bootstrap = {}
   5 | 
   6 | function Bootstrap.StartServer()
   7 |     if not RunService:IsServer() then return end
   8 |     require(game.ServerScriptService.OVHL.Core.ServerKernel).Boot()
   9 | end
  10 | 
  11 | function Bootstrap.StartClient()
  12 |     if not RunService:IsClient() then return end
  13 |     local PS = game.Players.LocalPlayer:WaitForChild("PlayerScripts")
  14 |     require(PS.OVHL.Core.ClientKernel).Boot()
  15 | end
  16 | 
  17 | return Bootstrap
  18 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Config/LoggerConfig.luau</strong> (34 lines, 993 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Config.LoggerConfig`

```lua
   1 | --!strict
   2 | return {
   3 |     DefaultLevel = "DEBUG", -- [FIX] Ganti dari INFO ke DEBUG agar semua narasi muncul
   4 |     UseEmoji = true,
   5 |     UseColor = true,
   6 |     ShowTimestamp = true,
   7 | 
   8 |     Domains = {
   9 |         SYSTEM      = "‚öôÔ∏è SYSTEM",
  10 |         NETWORK     = "üåê NETWORK", 
  11 |         SECURITY    = "üîê SECURITY",
  12 |         DATA        = "üíæ DATA",
  13 |         INVENTORY   = "üéí INVENTORY",
  14 |         SHOP        = "üè™ SHOP", 
  15 |         ADMIN       = "üëë ADMIN",
  16 |         PERMISSION  = "üîê PERMISSION",
  17 |         
  18 |         -- UI Domains (Telemetry)
  19 |         UX             = "üëÜ UX",
  20 |         USER_INTERFACE = "üé® UI",
  21 |         TOPBAR         = "üîò TOPBAR",
  22 |         
  23 |         DEFAULT     = "üì¶ GENERAL"
  24 |     },
  25 | 
  26 |     Levels = {
  27 |         DEBUG    = { Weight=1, Icon="üîç" },
  28 |         INFO     = { Weight=2, Icon="‚ÑπÔ∏è" },
  29 |         WARN     = { Weight=3, Icon="‚ö†Ô∏è" },
  30 |         ERROR    = { Weight=4, Icon="‚ùå" },
  31 |         CRITICAL = { Weight=5, Icon="üíÄ" }
  32 |     }
  33 | }
  34 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Config/SystemPanelConfig.luau</strong> (38 lines, 926 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Config.SystemPanelConfig`

```lua
   1 | --!strict
   2 | -- @Config: SystemPanelConfig
   3 | -- @Role: Single Source of Truth untuk Framework Panel
   4 | -- @Standard: OVHL Enterprise
   5 | 
   6 | return {
   7 | 	Meta = {
   8 | 		Name = "FrameworkPanel",
   9 | 		Version = "1.0.0",
  10 | 	},
  11 | 
  12 | 	-- Konfigurasi Topbar Icon
  13 | 	Topbar = {
  14 | 		Enabled = true,
  15 | 		Text = "PANEL",
  16 | 		Icon = "rbxassetid://6022668961", -- Settings Icon
  17 | 		Order = 99,
  18 | 		Permission = 5, -- Minimal Admin (3) untuk melihat tombol ini
  19 | 		Shortcut = Enum.KeyCode.F4,
  20 | 	},
  21 | 
  22 | 	-- Konfigurasi UI Window
  23 | 	UI = {
  24 | 		Title = "OVHL COMMAND CENTER",
  25 | 		Size = { X = 800, Y = 500 },
  26 | 		SidebarWidth = 200,
  27 | 		Transition = "SlideFromRight",
  28 | 	},
  29 | 
  30 | 	-- Daftar Menu (Data Driven View)
  31 | 	Menus = {
  32 | 		{ Id = "Dashboard", Label = "üè† Dashboard", Order = 1 },
  33 | 		{ Id = "Permission", Label = "üë• Permission", Order = 2 },
  34 | 		{ Id = "Logger", Label = "üéõÔ∏è Logger", Order = 3 },
  35 | 		{ Id = "Network", Label = "üì° Network", Order = 4 },
  36 | 	},
  37 | }
  38 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/ConfigSchema.luau</strong> (43 lines, 1.21 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.ConfigSchema`

```lua
   1 | --!strict
   2 | -- @Core: ConfigSchema
   3 | -- Validasi struktur config agar tidak crash di runtime
   4 | local ConfigSchema = {}
   5 | 
   6 | local REQUIRED = {
   7 |     Meta = { Name="string", Type="string", Version="string" }
   8 | }
   9 | 
  10 | local function validate(data, schema, path)
  11 |     local errors = {}
  12 |     for field, expected in pairs(schema) do
  13 |         local val = data[field]
  14 |         local ctx = path .. "." .. field
  15 |         
  16 |         if val == nil then
  17 |             table.insert(errors, "Missing: " .. ctx)
  18 |         elseif type(expected) == "table" then
  19 |             if type(val) ~= "table" then
  20 |                 table.insert(errors, ctx .. " must be table")
  21 |             else
  22 |                 for _, e in ipairs(validate(val, expected, ctx)) do 
  23 |                     table.insert(errors, e) 
  24 |                 end
  25 |             end
  26 |         elseif type(val) ~= expected then
  27 |             table.insert(errors, ctx .. " must be " .. expected)
  28 |         end
  29 |     end
  30 |     return errors
  31 | end
  32 | 
  33 | function ConfigSchema.Validate(cfg, name)
  34 |     local errs = validate(cfg, REQUIRED, name)
  35 |     if #errs > 0 then
  36 |         warn("[CONFIG ERROR] " .. name .. ":\n" .. table.concat(errs, "\n"))
  37 |         return false
  38 |     end
  39 |     return true
  40 | end
  41 | 
  42 | return ConfigSchema
  43 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Constants.luau</strong> (20 lines, 378 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Constants`

```lua
   1 | --!strict
   2 | -- @Core: Constants
   3 | -- @Role: Single Source of Truth
   4 | local Constants = {
   5 |     SYSTEM = {
   6 |         VERSION = "0.2.0",
   7 |         NAME = "OVHL Framework"
   8 |     },
   9 |     NET = {
  10 |         TIMEOUT = 10,
  11 |         RETRY_ATTEMPTS = 3
  12 |     },
  13 |     ROLES = {
  14 |         GUEST = "Guest",
  15 |         ADMIN = "Admin",
  16 |         OWNER = "Owner"
  17 |     }
  18 | }
  19 | return table.freeze(Constants)
  20 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Context.luau</strong> (33 lines, 772 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Context`

```lua
   1 | --!strict
   2 | -- @Core: Context (DI Container)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | 
   5 | -- [MIGRATION] Use Dot Syntax Internally
   6 | local SmartLogger = Loader.Get("Logger")
   7 | local Signals = Loader.Get("Signals")
   8 | local Manifest = Loader.Get("Manifest") 
   9 | 
  10 | local Context = {}
  11 | Context.__index = Context
  12 | 
  13 | function Context.New(services)
  14 |     local self = setmetatable({}, Context)
  15 |     
  16 |     self.Manifest = Manifest
  17 |     self.Signals = Signals
  18 |     self.Services = services or {}
  19 |     
  20 |     function self:CreateLogger(domain: string)
  21 |         return SmartLogger.New(domain)
  22 |     end
  23 |     
  24 |     -- Inject Dependencies
  25 |     for name, service in pairs(self.Services) do
  26 |         self[name] = service
  27 |     end
  28 | 
  29 |     return self
  30 | end
  31 | 
  32 | return Context
  33 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Env.luau</strong> (24 lines, 384 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Env`

```lua
   1 | --!strict
   2 | -- @Core: Env
   3 | local RunService = game:GetService("RunService")
   4 | 
   5 | local Env = {}
   6 | 
   7 | function Env.IsStudio()
   8 |     return RunService:IsStudio()
   9 | end
  10 | 
  11 | function Env.IsServer()
  12 |     return RunService:IsServer()
  13 | end
  14 | 
  15 | function Env.IsClient()
  16 |     return RunService:IsClient()
  17 | end
  18 | 
  19 | function Env.MockDataStore()
  20 |     return Env.IsStudio()
  21 | end
  22 | 
  23 | return table.freeze(Env)
  24 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Framework.luau</strong> (114 lines, 3.26 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Framework`

```lua
   1 | --!strict
   2 | -- @Core: Framework (Central Factory - v0.3.0)
   3 | -- @Role: Dependency Injector & Enterprise Standardizer
   4 | -- @Feature: Context-Aware Action Guard (Auto-ID Generation)
   5 | 
   6 | local RS = game:GetService("ReplicatedStorage")
   7 | 
   8 | -- Internal Dependencies
   9 | local Loader = require(RS.OVHL.Core.Loader)
  10 | local SmartLogger = Loader.Get("Logger")
  11 | local Bridge = Loader.Get("Bridge")
  12 | local Trove = Loader.Get("Trove")
  13 | local ActionGuard = Loader.Get("ActionGuard") -- [NEW] Core Dependency
  14 | 
  15 | local Framework = {}
  16 | 
  17 | function Framework.CreateController(def)
  18 | 	local ctrl = def or {}
  19 | 	local name = ctrl.Name or "UnknownController"
  20 | 
  21 | 	-- 1. Auto-Inject Logger & Tools
  22 | 	ctrl.Logger = SmartLogger.New(name:upper())
  23 | 	ctrl.Bridge = Bridge.New()
  24 | 	ctrl.Trove = Trove.new()
  25 | 
  26 | 	-- [ENTERPRISE FEATURE] Context-Aware Guard Injection
  27 | 	-- Menyuntikkan ActionGuard dengan kemampuan Auto-ID berdasarkan nama Controller.
  28 | 	-- Ini mencegah bentrok lock antar modul (misal: Inventory vs Shop).
  29 | 	ctrl.Guard = ActionGuard
  30 | 
  31 | 	-- Helper: self:SafeRun("Equip", item.Id, func)
  32 | 	-- Otomatis ID: "NamaController:Equip:ItemId"
  33 | 	function ctrl:SafeRun(actionName, uniqueParam, callback)
  34 | 		local autoId = string.format("%s:%s:%s", name, actionName, tostring(uniqueParam or "Global"))
  35 | 		ActionGuard.Run({
  36 | 			Id = autoId,
  37 | 			Debounce = 0.5, -- Default debounce
  38 | 		}, callback)
  39 | 	end
  40 | 
  41 | 	-- Helper: self:SafeRunEx({Action="Buy", Key=id, Debounce=1, Confirm=...}, func)
  42 | 	-- Untuk kontrol lebih granular (Custom Debounce / Confirmation)
  43 | 	function ctrl:SafeRunEx(opts, callback)
  44 | 		local action = opts.Action or "General"
  45 | 		local key = opts.Key or "Global"
  46 | 		local autoId = string.format("%s:%s:%s", name, action, tostring(key))
  47 | 
  48 | 		-- Clone opts agar tidak merusak table asli, lalu inject ID
  49 | 		local guardOpts = table.clone(opts)
  50 | 		guardOpts.Id = autoId
  51 | 
  52 | 		ActionGuard.Run(guardOpts, callback)
  53 | 	end
  54 | 
  55 | 	-- 2. Auto-Load Config (PRESERVED LOGIC)
  56 | 	if ctrl.ConfigName then
  57 | 		local loadedConfig = nil
  58 | 		local loadSource = "None"
  59 | 
  60 | 		-- [STRATEGY A] Cek di Module Feature
  61 | 		local successA, resA = pcall(function()
  62 | 			return require(Loader.Module(ctrl.ConfigName).SharedConfig)
  63 | 		end)
  64 | 		if successA and resA then
  65 | 			loadedConfig = resA
  66 | 			loadSource = "Module"
  67 | 		else
  68 | 			-- [STRATEGY B] Cek di Global Config Folder
  69 | 			local successB, resB = pcall(function()
  70 | 				return Loader.Config(ctrl.ConfigName)
  71 | 			end)
  72 | 			if successB and resB then
  73 | 				loadedConfig = resB
  74 | 				loadSource = "GlobalConfig"
  75 | 			end
  76 | 		end
  77 | 
  78 | 		-- [RESULT CHECK]
  79 | 		if loadedConfig then
  80 | 			ctrl.Config = loadedConfig
  81 | 			ctrl.Logger:Debug("ConfigLoaded", { Source = loadSource, Name = ctrl.ConfigName })
  82 | 		else
  83 | 			ctrl.Logger:Error("ConfigCritical", "FAILED TO LOAD CONFIG: " .. ctrl.ConfigName)
  84 | 			ctrl.Config = { Meta = { Error = "Missing" }, UI = {}, Topbar = {} }
  85 | 		end
  86 | 	end
  87 | 
  88 | 	-- 3. Lifecycle Wrapper (PRESERVED LOGIC)
  89 | 	local originalInit = ctrl.Init
  90 | 	function ctrl:Init(ctx)
  91 | 		if originalInit then
  92 | 			local s, err = pcall(originalInit, self, ctx)
  93 | 			if not s then
  94 | 				ctrl.Logger:Error("InitCrash", err)
  95 | 			end
  96 | 		end
  97 | 	end
  98 | 
  99 | 	-- Auto Cleanup Method
 100 | 	function ctrl:Destroy()
 101 | 		if self.Shutdown then
 102 | 			self:Shutdown()
 103 | 		end
 104 | 		if self.Trove then
 105 | 			self.Trove:Destroy()
 106 | 			self.Trove = nil
 107 | 		end
 108 | 	end
 109 | 
 110 | 	return ctrl
 111 | end
 112 | 
 113 | return Framework
 114 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/FrameworkTypes.luau</strong> (34 lines, 962 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.FrameworkTypes`

```lua
   1 | --!strict
   2 | -- @Core: FrameworkTypes
   3 | -- Definisi Kontrak untuk Type Checking Luau
   4 | local FrameworkTypes = {}
   5 | 
   6 | export type Logger = {
   7 |     Info: (self: Logger, msg: string, data: any?) -> (),
   8 |     Warn: (self: Logger, msg: string, data: any?) -> (),
   9 |     Error: (self: Logger, msg: string, data: any?) -> (),
  10 |     Debug: (self: Logger, msg: string, data: any?) -> (),
  11 | }
  12 | 
  13 | export type Manifest = {
  14 |     Identity: { Name: string, Namespace: string },
  15 |     Version: { Major: number, Minor: number, Patch: number, Full: string },
  16 |     Metadata: { BuildType: string }
  17 | }
  18 | 
  19 | export type Context = {
  20 |     Manifest: Manifest,
  21 |     Services: { [string]: any },
  22 |     CreateLogger: (self: Context, domain: string) -> Logger,
  23 |     [string]: any -- Allow dynamic injection
  24 | }
  25 | 
  26 | export type Service = {
  27 |     Init: (self: Service, ctx: Context) -> ()?,
  28 |     Start: (self: Service) -> ()?,
  29 |     Shutdown: (self: Service) -> ()?,
  30 |     [any]: any
  31 | }
  32 | 
  33 | return FrameworkTypes
  34 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Loader.luau</strong> (200 lines, 5.96 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Loader`

```lua
   1 | --!strict
   2 | -- @Core: Loader v0.2.0 (Optimized & Deterministic)
   3 | -- @Role: Central Dependency Registry with Caching
   4 | -- @Mandate: Mandat 2 (Performance & Determinism)
   5 | 
   6 | local ReplicatedStorage = game:GetService("ReplicatedStorage")
   7 | local ServerScriptService = game:GetService("ServerScriptService")
   8 | local RunService = game:GetService("RunService")
   9 | 
  10 | local Loader = {}
  11 | 
  12 | -- [0] DEBUGGER & OBSERVABILITY
  13 | local DEBUG_MODE = RunService:IsStudio()
  14 | 
  15 | local function log(msg: string, level: string?)
  16 | 	if not DEBUG_MODE then
  17 | 		return
  18 | 	end
  19 | 
  20 | 	local prefix = "[OVHL-LOADER]"
  21 | 	if level == "ERROR" then
  22 | 		warn(string.format("üî¥ %s %s", prefix, msg))
  23 | 	elseif level == "WARN" then
  24 | 		warn(string.format("‚ö†Ô∏è %s %s", prefix, msg))
  25 | 	else
  26 | 		-- [AI OBSERVABILITY] Verbose log hanya muncul saat dev
  27 | 		print(string.format("‚ö° %s %s", prefix, msg))
  28 | 	end
  29 | end
  30 | 
  31 | -- [1] ROOT REFERENCES
  32 | local ROOTS = {
  33 | 	OVHL = ReplicatedStorage:WaitForChild("OVHL"),
  34 | 	Packages = ReplicatedStorage:WaitForChild("Packages"),
  35 | }
  36 | 
  37 | -- [2] PACKAGE CACHE (Optimization)
  38 | -- Menyimpan referensi package yang sudah ditemukan agar tidak looping folder lagi
  39 | local _packageCache: { [string]: Instance } = {}
  40 | 
  41 | local function findPkg(pkgName: string): Instance?
  42 | 	-- 1. Cek Cache (O(1))
  43 | 	if _packageCache[pkgName] then
  44 | 		return _packageCache[pkgName]
  45 | 	end
  46 | 
  47 | 	-- 2. Cek Exact Match
  48 | 	local exact = ROOTS.Packages:FindFirstChild(pkgName)
  49 | 	if exact then
  50 | 		_packageCache[pkgName] = exact
  51 | 		return exact
  52 | 	end
  53 | 
  54 | 	-- 3. Scan Wally Format (O(n) - Only runs once per package per session)
  55 | 	local lowerName = pkgName:lower()
  56 | 	for _, child in ipairs(ROOTS.Packages:GetChildren()) do
  57 | 		local cName = child.Name:lower()
  58 | 		-- Logika standar Wally: author_repo@version atau index folder
  59 | 		if
  60 | 			cName:find("_" .. lowerName .. "@", 1, true)
  61 | 			or cName:find("^" .. lowerName .. "@")
  62 | 			or cName:find(lowerName, 1, true)
  63 | 		then
  64 | 			_packageCache[pkgName] = child -- Simpan ke cache!
  65 | 			log("Package Cached: " .. pkgName .. " -> " .. child.Name)
  66 | 			return child
  67 | 		end
  68 | 	end
  69 | 
  70 | 	return nil
  71 | end
  72 | 
  73 | -- [3] ALIAS REGISTRY (Preserved from v0.1.0)
  74 | local ALIAS_MAP = {
  75 | 	-- CORE
  76 | 	["Framework"] = ROOTS.OVHL.Core.Framework,
  77 | 	["Context"] = ROOTS.OVHL.Core.Context,
  78 | 	["Logger"] = ROOTS.OVHL.Core.SmartLogger,
  79 | 
  80 | 	-- [NETWORKING PREP] Nanti file ini akan direwrite di Fase 2, tapi reference tetap aman
  81 | 	["Bridge"] = ROOTS.OVHL.Core.Networking.Bridge,
  82 | 	["Enums"] = ROOTS.OVHL.Core.Networking.NetworkEnums,
  83 | 	["Middleware"] = ROOTS.OVHL.Core.Networking.Middleware,
  84 | 
  85 | 	["Signals"] = ROOTS.OVHL.Core.Signals,
  86 | 	["Constants"] = ROOTS.OVHL.Core.Constants,
  87 | 	["Manifest"] = ROOTS.OVHL.Core.Manifest,
  88 | 	["Env"] = ROOTS.OVHL.Core.Env,
  89 | 	["Schema"] = ROOTS.OVHL.Core.ConfigSchema,
  90 | 	["ConfigLoader"] = ROOTS.OVHL.Core.SharedConfigLoader,
  91 | 	["TypeValidator"] = ROOTS.OVHL.Core.TypeValidator,
  92 | 
  93 | 	-- UI FOUNDATION
  94 | 	["API"] = ROOTS.OVHL.UI.Foundation.API,
  95 | 	["Theme"] = ROOTS.OVHL.UI.Foundation.OVHLTheme,
  96 | 	["Assets"] = ROOTS.OVHL.UI.Foundation.Assets,
  97 | 	["ActionGuard"] = ROOTS.OVHL.UI.Foundation.ActionGuard,
  98 | 	["SafeLoader"] = ROOTS.OVHL.UI.Foundation.SafeLoader,
  99 | 	["Util"] = ROOTS.OVHL.UI.Foundation.Util,
 100 | 	["Motion"] = ROOTS.OVHL.UI.Foundation.Motion,
 101 | 	["MotionPresets"] = ROOTS.OVHL.UI.Foundation.MotionPresets,
 102 | 	["Topbar"] = ROOTS.OVHL.UI.Foundation.Bridges.Topbar,
 103 | 	["Layout"] = ROOTS.OVHL.UI.Foundation.Layout,
 104 | 
 105 | 	-- PACKAGES (Lazy Loaded via Cache if not explicit)
 106 | 	["Onyx"] = findPkg("onyx-ui"),
 107 | 	["TestEZ"] = findPkg("TestEZ"),
 108 | 	["Fusion"] = findPkg("Fusion"),
 109 | 	["Trove"] = findPkg("Trove"),
 110 | 	["Promise"] = findPkg("Promise"),
 111 | 	["Signal"] = findPkg("Signal"),
 112 | 	["ProfileService"] = findPkg("ProfileService"),
 113 | }
 114 | 
 115 | -- [4] PUBLIC API
 116 | function Loader.Get(aliasName: string)
 117 | 	-- A. Cek Alias Map
 118 | 	local target = ALIAS_MAP[aliasName]
 119 | 	if target then
 120 | 		return require(target)
 121 | 	end
 122 | 
 123 | 	-- B. Cek Cache / Packages (Fallback)
 124 | 	-- Hanya lakukan ini jika tidak ada di Alias Map.
 125 | 	local pkg = findPkg(aliasName)
 126 | 	if pkg then
 127 | 		return require(pkg)
 128 | 	end
 129 | 
 130 | 	-- C. Strict Error (No Fuzzy Search)
 131 | 	local msg = string.format("üõë [OVHL-LOADER] Fatal: Module '%s' not found in Registry or Packages.", aliasName)
 132 | 	log(msg, "ERROR")
 133 | 	error(msg, 2)
 134 | end
 135 | 
 136 | -- [5] PROXY & LEGACY SUPPORT (Proxies preserved)
 137 | local function createFolderProxy(folder: Instance)
 138 | 	return setmetatable({}, {
 139 | 		__index = function(_, key: string)
 140 | 			local target = folder:FindFirstChild(key)
 141 | 			if not target then
 142 | 				error("‚ùå '" .. key .. "' not found in " .. folder.Name)
 143 | 			end
 144 | 			if target:IsA("ModuleScript") then
 145 | 				return require(target)
 146 | 			end
 147 | 			return createFolderProxy(target)
 148 | 		end,
 149 | 		__call = function(_, pathStr: string)
 150 | 			local current = folder
 151 | 			for _, seg in ipairs(string.split(pathStr, "/")) do
 152 | 				current = current:FindFirstChild(seg)
 153 | 				if not current then
 154 | 					error("Path '" .. seg .. "' missing in " .. folder.Name)
 155 | 				end
 156 | 			end
 157 | 			return if current:IsA("ModuleScript") then require(current) else current
 158 | 		end,
 159 | 	})
 160 | end
 161 | 
 162 | Loader.UI = createFolderProxy(ROOTS.OVHL.UI)
 163 | Loader.Config = createFolderProxy(ROOTS.OVHL.Config)
 164 | 
 165 | -- Helper Module Loader (Feature Modules)
 166 | Loader.Module = function(featureName: string)
 167 | 	local target = ROOTS.OVHL.Modules:FindFirstChild(featureName)
 168 | 	if not target then
 169 | 		error("Module Feature '" .. featureName .. "' not found in OVHL.Modules")
 170 | 	end
 171 | 	return target
 172 | end
 173 | 
 174 | -- Compatibility Helper (Backward Compat)
 175 | Loader.Pkg = setmetatable({}, {
 176 | 	__call = function(_, name)
 177 | 		if name == "onyx-ui" then
 178 | 			return Loader.Get("Onyx")
 179 | 		end
 180 | 		return Loader.Get(name)
 181 | 	end,
 182 | })
 183 | 
 184 | -- Server Side Pathing (Only exposed on Server)
 185 | if RunService:IsServer() then
 186 | 	local ServerRoot = ServerScriptService:WaitForChild("OVHL")
 187 | 	Loader.Server = function(pathStr: string)
 188 | 		local current = ServerRoot
 189 | 		for _, seg in ipairs(string.split(pathStr, "/")) do
 190 | 			current = current:FindFirstChild(seg)
 191 | 			if not current then
 192 | 				error("Server Path '" .. pathStr .. "' not found")
 193 | 			end
 194 | 		end
 195 | 		return require(current)
 196 | 	end
 197 | end
 198 | 
 199 | return Loader
 200 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Manifest.luau</strong> (22 lines, 444 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Manifest`

```lua
   1 | --!strict
   2 | -- @Core: Manifest (Single Source of Truth)
   3 | -- Identitas & Versi Framework
   4 | return {
   5 |     Identity = {
   6 |         Name = "OVHL Framework",
   7 |         Namespace = "omniverse"
   8 |     },
   9 |     
  10 |     Version = {
  11 |         Major = 0,
  12 |         Minor = 1,
  13 |         Patch = 0,
  14 |         Full = "0.1.0"
  15 |     },
  16 |     
  17 |     Metadata = {
  18 |         BuildType = "Alpha", -- Development / Staging / Production
  19 |         LastUpdated = "2025-11-22"
  20 |     }
  21 | }
  22 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/SharedConfigLoader.luau</strong> (40 lines, 1.07 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.SharedConfigLoader`

```lua
   1 | --!strict
   2 | -- @Core: SharedConfigLoader
   3 | -- Mencari dan memuat SharedConfig dari folder Modules
   4 | local RS = game:GetService("ReplicatedStorage")
   5 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   6 | local Schema = Loader.Get("Schema")
   7 | 
   8 | local ConfigLoader = {}
   9 | 
  10 | function ConfigLoader.Load(moduleName)
  11 |     -- Cari folder module
  12 |     local root = RS.OVHL.Modules
  13 |     local moduleFolder = root:FindFirstChild(moduleName)
  14 |     
  15 |     if not moduleFolder then
  16 |         warn("[Config] Module not found: " .. moduleName)
  17 |         return {}
  18 |     end
  19 |     
  20 |     -- Cari file config
  21 |     local configFile = moduleFolder:FindFirstChild("SharedConfig")
  22 |     if not configFile then
  23 |         return {} -- Config is optional, return empty
  24 |     end
  25 |     
  26 |     -- Require & Validate
  27 |     local success, data = pcall(require, configFile)
  28 |     if not success then
  29 |         warn("[Config] Syntax Error in " .. moduleName .. ": " .. tostring(data))
  30 |         return {}
  31 |     end
  32 |     
  33 |     -- Validasi Schema
  34 |     Schema.Validate(data, moduleName)
  35 |     
  36 |     return data
  37 | end
  38 | 
  39 | return ConfigLoader
  40 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Signals.luau</strong> (28 lines, 590 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Signals`

```lua
   1 | --!strict
   2 | -- @Core: Signals (Event Bus)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local Signal = Loader.Get("Signal")
   5 | 
   6 | local Signals = {}
   7 | Signals._registry = {}
   8 | 
   9 | function Signals:Get(name)
  10 |     if not self._registry[name] then
  11 |         self._registry[name] = Signal.new()
  12 |     end
  13 |     return self._registry[name]
  14 | end
  15 | 
  16 | function Signals:Fire(name, ...)
  17 |     local sig = self._registry[name]
  18 |     if sig then
  19 |         sig:Fire(...)
  20 |     end
  21 | end
  22 | 
  23 | function Signals:Connect(name, callback)
  24 |     return self:Get(name):Connect(callback)
  25 | end
  26 | 
  27 | return Signals
  28 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/SmartLogger.luau</strong> (97 lines, 2.87 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.SmartLogger`

```lua
   1 | --!strict
   2 | -- @Core: SmartLogger
   3 | -- @PortedFrom: Snapshot V4.0
   4 | local HttpService = game:GetService("HttpService")
   5 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   6 | 
   7 | local Config = Loader.Config("LoggerConfig")
   8 | local Env = Loader.Get("Env")
   9 | 
  10 | local SmartLogger = {}
  11 | SmartLogger.__index = SmartLogger
  12 | 
  13 | local CONTEXT_TAG = Env.IsServer() and "[SERVER]" or "[CLIENT]"
  14 | 
  15 | function SmartLogger.New(domain, overrides)
  16 |     local self = setmetatable({}, SmartLogger)
  17 |     self._rawDomain = domain or "SYSTEM"
  18 |     
  19 |     local mapped = Config.Domains[self._rawDomain]
  20 |     if mapped then
  21 |         self._domainDisplay = mapped
  22 |     else
  23 |         self._domainDisplay = string.format("üì¶ %s", self._rawDomain:upper())
  24 |     end
  25 |     
  26 |     local defLvl = Config.DefaultLevel or "INFO"
  27 |     local myLvl = (overrides and overrides.LogLevel) or defLvl
  28 |     self._weight = Config.Levels[myLvl] and Config.Levels[myLvl].Weight or 2
  29 |     
  30 |     return self
  31 | end
  32 | 
  33 | function SmartLogger:_safeDump(data, depth)
  34 |     depth = depth or 0
  35 |     if depth > 2 then return "..." end
  36 |     
  37 |     local t = type(data)
  38 |     if t == "table" then
  39 |         local parts = {}
  40 |         for k, v in pairs(data) do
  41 |             if type(k) == "string" then
  42 |                 table.insert(parts, k .. "=" .. self:_safeDump(v, depth + 1))
  43 |             end
  44 |         end
  45 |         return "{" .. table.concat(parts, ", ") .. "}"
  46 |     elseif t == "userdata" then
  47 |         return typeof(data)
  48 |     else
  49 |         return tostring(data)
  50 |     end
  51 | end
  52 | 
  53 | function SmartLogger:_safeFormat(level, message, data)
  54 |     if not message then return nil end
  55 |     
  56 |     local cfg = Config.Levels[level]
  57 |     if not cfg then return nil end
  58 |     
  59 |     local meta = ""
  60 |     if data ~= nil then
  61 |         local success, result = pcall(function()
  62 |             return HttpService:JSONEncode(data)
  63 |         end)
  64 |         if success then
  65 |             meta = " ‚îÇ " .. result
  66 |         else
  67 |             meta = " ‚îÇ [RAW] " .. self:_safeDump(data)
  68 |         end
  69 |     end
  70 | 
  71 |     local levelIcon = cfg.Icon or "üìù"
  72 |     -- [SAFE] Lune menangani karakter newline (\n) secara native di sini
  73 |     return string.format("%s %s %s\n   ‚îî‚îÄ‚îÄ %s%s", 
  74 |         levelIcon, CONTEXT_TAG, self._domainDisplay, message, meta)
  75 | end
  76 | 
  77 | function SmartLogger:_log(level, message, data)
  78 |     local cfg = Config.Levels[level]
  79 |     if not cfg or cfg.Weight < self._weight then return end
  80 |     
  81 |     local logMessage = self:_safeFormat(level, message, data)
  82 |     if not logMessage then return end
  83 |     
  84 |     if level == "ERROR" or level == "CRITICAL" then
  85 |         warn(logMessage)
  86 |     else
  87 |         print(logMessage)
  88 |     end
  89 | end
  90 | 
  91 | function SmartLogger:Debug(m, d) self:_log("DEBUG", m, d) end
  92 | function SmartLogger:Info(m, d)  self:_log("INFO", m, d) end
  93 | function SmartLogger:Warn(m, d)  self:_log("WARN", m, d) end
  94 | function SmartLogger:Error(m, d) self:_log("ERROR", m, d) end
  95 | 
  96 | return SmartLogger
  97 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/TypeValidator.luau</strong> (54 lines, 2.02 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.TypeValidator`

```lua
   1 | --!strict
   2 | -- [[ Type Validator - Strict Runtime Checking ]]
   3 | -- @Role: Validates arguments passed via NetworkBridge
   4 | 
   5 | local TypeValidator = {}
   6 | 
   7 | local TYPE_CHECKERS = {
   8 |     string = function(v) return type(v) == 'string' end,
   9 |     number = function(v) return type(v) == 'number' end,
  10 |     boolean = function(v) return type(v) == 'boolean' end,
  11 |     table = function(v) return type(v) == 'table' end,
  12 |     ['function'] = function(v) return type(v) == 'function' end,
  13 |     Instance = function(v) return typeof(v) == 'Instance' end,
  14 |     Vector3 = function(v) return typeof(v) == 'Vector3' end,
  15 |     Color3 = function(v) return typeof(v) == 'Color3' end,
  16 |     Player = function(v) return typeof(v) == 'Instance' and v:IsA('Player') end,
  17 |     any = function(v) return true end
  18 | }
  19 | 
  20 | function TypeValidator.Validate(args, schema)
  21 |     if not schema then return true end
  22 |     local errors = {}
  23 | 
  24 |     for i, spec in ipairs(schema) do
  25 |         local val = args[i]
  26 |         local name = spec.name or ('arg #' .. i)
  27 |         
  28 |         -- Handle simple string types for backward compatibility
  29 |         local requiredType = type(spec) == 'string' and spec or spec.type
  30 |         local isOptional = (type(spec) == 'table' and spec.optional)
  31 | 
  32 |         if val == nil then
  33 |             if not isOptional then
  34 |                 table.insert(errors, string.format('%s is required', name))
  35 |             end
  36 |         else
  37 |             local checker = TYPE_CHECKERS[requiredType]
  38 |             if not checker then
  39 |                 -- Fallback to basic type check
  40 |                 if type(val) ~= requiredType and typeof(val) ~= requiredType then
  41 |                      table.insert(errors, string.format('%s expected %s, got %s', name, requiredType, typeof(val)))
  42 |                 end
  43 |             elseif not checker(val) then
  44 |                 table.insert(errors, string.format('%s invalid format for %s', name, requiredType))
  45 |             end
  46 |         end
  47 |     end
  48 | 
  49 |     if #errors > 0 then return false, table.concat(errors, '; ') end
  50 |     return true
  51 | end
  52 | 
  53 | return TypeValidator
  54 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Modules/Inventory/SharedConfig.luau</strong> (66 lines, 1.36 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Modules.Inventory.SharedConfig`

```lua
   1 | --!strict
   2 | -- @Feature: Inventory Config
   3 | -- @Standard: OVHL v0.2.1 (Action Ready)
   4 | 
   5 | return {
   6 | 	Meta = {
   7 | 		Name = "Inventory",
   8 | 		Type = "Feature",
   9 | 		Version = "4.2.0",
  10 | 	},
  11 | 
  12 | 	Topbar = {
  13 | 		Enabled = true,
  14 | 		Text = "BAG",
  15 | 		Icon = "rbxassetid://96226541857519",
  16 | 		Shortcut = Enum.KeyCode.B,
  17 | 		Order = 1,
  18 | 		Permission = 0,
  19 | 	},
  20 | 
  21 | 	Layout = {
  22 | 		Mode = "Grid",
  23 | 		Grid = {
  24 | 			CellSize = { X = 150, Y = 230 },
  25 | 			Gap = { X = 12, Y = 12 },
  26 | 			Sort = Enum.SortOrder.LayoutOrder,
  27 | 		},
  28 | 	},
  29 | 
  30 | 	UI = {
  31 | 		Title = "MY BACKPACK",
  32 | 		EmptyState = "No items found.",
  33 | 		Transition = "Slide",
  34 | 
  35 | 		RarityColors = {
  36 | 			Common = Color3.fromHex("94A3B8"),
  37 | 			Uncommon = Color3.fromHex("10B981"),
  38 | 			Rare = Color3.fromHex("3B82F6"),
  39 | 			Epic = Color3.fromHex("8B5CF6"),
  40 | 			Legendary = Color3.fromHex("F59E0B"),
  41 | 			Mythic = Color3.fromHex("EF4444"),
  42 | 		},
  43 | 
  44 | 		Actions = {
  45 | 			{ Id = "Equip", Label = "EQUIP", Style = "Primary" },
  46 | 			{ Id = "Drop", Label = "DROP", Style = "Danger" },
  47 | 		},
  48 | 	},
  49 | 
  50 | 	Network = {
  51 | 		Route = "Inventory",
  52 | 		Requests = {
  53 | 			GetItems = {
  54 | 				RateLimit = { Max = 5, Interval = 1 },
  55 | 				Args = {},
  56 | 			},
  57 | 			-- [NEW] Endpoint untuk Aksi
  58 | 			PerformAction = {
  59 | 				RateLimit = { Max = 4, Interval = 1 }, -- Strict Security via Bridge
  60 | 				Args = { { name = "itemId", type = "any" }, { name = "action", type = "string" } },
  61 | 			},
  62 | 		},
  63 | 		Events = {},
  64 | 	},
  65 | }
  66 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Networking/Bridge.luau</strong> (164 lines, 4.04 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Networking.Bridge`

```lua
   1 | --!strict
   2 | -- @Component: NetworkBridge (Client/Shared v0.2.2)
   3 | -- @Role: Client Gateway & Packet Dispatcher
   4 | -- @Mandate: Mandat 1 (Single Remote) & Retry Policy
   5 | 
   6 | local ReplicatedStorage = game:GetService("ReplicatedStorage")
   7 | local RunService = game:GetService("RunService")
   8 | 
   9 | local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
  10 | local Promise = Loader.Get("Promise")
  11 | local Signal = Loader.Get("Signal")
  12 | local Enums = Loader.Get("Enums")
  13 | 
  14 | local Bridge = {}
  15 | Bridge.__index = Bridge
  16 | 
  17 | local GATEWAY_NAME = "OVHL_Gateway"
  18 | local STREAM_NAME = "OVHL_Stream"
  19 | 
  20 | function Bridge.New()
  21 | 	local self = setmetatable({
  22 | 		_gateway = nil :: RemoteFunction?,
  23 | 		_stream = nil :: RemoteEvent?,
  24 | 		_signals = {} :: { [string]: any },
  25 | 		_isClient = RunService:IsClient(),
  26 | 	}, Bridge)
  27 | 
  28 | 	if self._isClient then
  29 | 		self:_initClient()
  30 | 	end
  31 | 
  32 | 	return self
  33 | end
  34 | 
  35 | function Bridge:_initClient()
  36 | 	local remotes = ReplicatedStorage:WaitForChild("OVHL_Remotes", 10)
  37 | 	if not remotes then
  38 | 		warn("‚ö†Ô∏è [Bridge] 'OVHL_Remotes' folder missing! Server might be lagging.")
  39 | 		return
  40 | 	end
  41 | 
  42 | 	self._gateway = remotes:WaitForChild(GATEWAY_NAME, 10) :: RemoteFunction
  43 | 	self._stream = remotes:WaitForChild(STREAM_NAME, 10) :: RemoteEvent
  44 | 
  45 | 	if self._stream then
  46 | 		self._stream.OnClientEvent:Connect(function(packet)
  47 | 			self:_dispatchLocal(packet)
  48 | 		end)
  49 | 	else
  50 | 		warn("‚ö†Ô∏è [Bridge] Remote Stream missing.")
  51 | 	end
  52 | end
  53 | 
  54 | function Bridge:_dispatchLocal(packet)
  55 | 	if type(packet) ~= "table" then
  56 | 		return
  57 | 	end
  58 | 	if packet.T ~= Enums.Packet.EVENT then
  59 | 		return
  60 | 	end
  61 | 
  62 | 	local service = packet.S
  63 | 	local event = packet.E
  64 | 
  65 | 	if service and event then
  66 | 		local key = service .. "/" .. event
  67 | 		local sig = self._signals[key]
  68 | 		if sig then
  69 | 			if type(packet.D) == "table" then
  70 | 				sig:Fire(table.unpack(packet.D))
  71 | 			else
  72 | 				sig:Fire(packet.D)
  73 | 			end
  74 | 		end
  75 | 	end
  76 | end
  77 | 
  78 | -- [[ PUBLIC API ]]
  79 | 
  80 | function Bridge:Request(serviceName: string, methodName: string, ...: any)
  81 | 	if not self._isClient then
  82 | 		error("Bridge:Request is Client-Only.")
  83 | 	end
  84 | 
  85 | 	local args = { ... }
  86 | 
  87 | 	return Promise.new(function(resolve, reject)
  88 | 		if not self._gateway then
  89 | 			return reject("Bridge Gateway not connected")
  90 | 		end
  91 | 
  92 | 		local packet = {
  93 | 			T = Enums.Packet.REQUEST,
  94 | 			S = serviceName,
  95 | 			M = methodName,
  96 | 			A = args,
  97 | 		}
  98 | 
  99 | 		local success, response = pcall(function()
 100 | 			return self._gateway:InvokeServer(packet)
 101 | 		end)
 102 | 
 103 | 		if not success then
 104 | 			return reject("Network Fail: " .. tostring(response))
 105 | 		end
 106 | 
 107 | 		if type(response) == "table" then
 108 | 			if response.C == Enums.Status.OK then
 109 | 				resolve(response.D)
 110 | 			else
 111 | 				reject(response.E or "Server Error " .. tostring(response.C))
 112 | 			end
 113 | 		else
 114 | 			reject("Invalid Protocol Response")
 115 | 		end
 116 | 	end)
 117 | end
 118 | 
 119 | -- [NEW] RETRY POLICY IMPLEMENTATION
 120 | -- options: { Retries = 3, Interval = 1 }
 121 | function Bridge:RequestWithRetry(serviceName: string, methodName: string, options: any, ...: any)
 122 | 	local args = { ... }
 123 | 	local retries = options and options.Retries or 3
 124 | 	local interval = options and options.Interval or 1
 125 | 
 126 | 	return Promise.new(function(resolve, reject)
 127 | 		local attempts = 0
 128 | 
 129 | 		local function attempt()
 130 | 			attempts += 1
 131 | 			self:Request(serviceName, methodName, table.unpack(args)):andThen(resolve):catch(function(err)
 132 | 				if attempts < retries then
 133 | 					-- Log peringatan kecil (Opsional, agar dev tau ada retry)
 134 | 					-- print(string.format("üîÑ Retry %d/%d for %s:%s - %s", attempts, retries, serviceName, methodName, tostring(err)))
 135 | 					task.wait(interval)
 136 | 					attempt()
 137 | 				else
 138 | 					reject(err) -- Gagal total setelah N percobaan
 139 | 				end
 140 | 			end)
 141 | 		end
 142 | 
 143 | 		attempt()
 144 | 	end)
 145 | end
 146 | 
 147 | function Bridge:Listen(serviceName: string, eventName: string, callback: (...any) -> ())
 148 | 	local key = serviceName .. "/" .. eventName
 149 | 	if not self._signals[key] then
 150 | 		self._signals[key] = Signal.new()
 151 | 	end
 152 | 	return self._signals[key]:Connect(callback)
 153 | end
 154 | 
 155 | -- Mock Server Methods
 156 | function Bridge:Register(_, _)
 157 | 	return {}
 158 | end
 159 | function Bridge:Bind(_, _) end
 160 | function Bridge:Fire() end
 161 | function Bridge:FireAll() end
 162 | 
 163 | return Bridge
 164 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Networking/Middleware.luau</strong> (33 lines, 935 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Networking.Middleware`

```lua
   1 | --!strict
   2 | -- @Core: Middleware (Chain of Responsibility)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local Enums = Loader.Get("Enums")
   5 | 
   6 | local Middleware = {}
   7 | 
   8 | -- Tipe: function(player, requestData) -> (shouldContinue, errorMsg, statusCode)
   9 | 
  10 | function Middleware.RateLimiter(maxRequests, interval)
  11 |     return function(player, _)
  12 |         -- TODO: Implementasi Real Rate Limit di Phase 4
  13 |         return true
  14 |     end
  15 | end
  16 | 
  17 | function Middleware.AdminOnly(rankId)
  18 |     return function(player, _)
  19 |         -- Mockup: Selalu boleh di Studio
  20 |         if game:GetService("RunService"):IsStudio() then return true end
  21 |         return false, "Access Denied", Enums.Status.FORBIDDEN
  22 |     end
  23 | end
  24 | 
  25 | function Middleware.Validator(schema)
  26 |     return function(_, args)
  27 |         if not args then return false, "Missing Arguments", Enums.Status.BAD_REQUEST end
  28 |         return true
  29 |     end
  30 | end
  31 | 
  32 | return Middleware
  33 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/Core/Networking/NetworkEnums.luau</strong> (33 lines, 764 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.Core.Networking.NetworkEnums`

```lua
   1 | --!strict
   2 | -- @Core: NetworkEnums v0.2.0
   3 | -- @Role: Shared Protocol Definitions
   4 | local NetworkEnums = {}
   5 | 
   6 | -- [[ HTTP-LIKE STATUS CODES ]]
   7 | NetworkEnums.Status = {
   8 | 	OK = 200,
   9 | 	BAD_REQUEST = 400,
  10 | 	UNAUTHORIZED = 401,
  11 | 	FORBIDDEN = 403,
  12 | 	NOT_FOUND = 404,
  13 | 	TIMEOUT = 408,
  14 | 	RATE_LIMITED = 429,
  15 | 	INTERNAL_ERROR = 500,
  16 | }
  17 | 
  18 | -- [[ PACKET HEADERS ]]
  19 | -- Menggunakan singkatan 1 huruf untuk menghemat Bandwidth (Byte Optimization)
  20 | NetworkEnums.Packet = {
  21 | 	REQUEST = "R", -- Client -> Server (Butuh Balasan)
  22 | 	RESPONSE = "A", -- Server -> Client (Jawaban/Ack)
  23 | 	EVENT = "E", -- One Way (Fire & Forget)
  24 | }
  25 | 
  26 | -- [[ RESERVED EVENTS ]]
  27 | NetworkEnums.Events = {
  28 | 	SystemHandshake = "SYS_HANDSHAKE",
  29 | 	SystemPing = "SYS_PING",
  30 | }
  31 | 
  32 | return table.freeze(NetworkEnums)
  33 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/ActionGuard.luau</strong> (81 lines, 2.49 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.ActionGuard`

```lua
   1 | --!strict
   2 | -- @Foundation: ActionGuard v0.3.0 (Keyed Mutex)
   3 | -- @Role: Granular Logic Gatekeeper & Race Condition Shield
   4 | -- @Standard: Keyed Locking (Non-Blocking Global)
   5 | 
   6 | local RS = game:GetService("ReplicatedStorage")
   7 | local Loader = require(RS.OVHL.Core.Loader)
   8 | local Signals = Loader.Get("Signals")
   9 | 
  10 | local ActionGuard = {}
  11 | 
  12 | -- Registry Kunci: [UniqueKey] = ExpiryTime (os.clock)
  13 | -- Menggantikan _isBusy global agar UI tidak freeze total
  14 | local _activeLocks = {} :: { [string]: number }
  15 | 
  16 | -- [[ API UTAMA ]]
  17 | -- @param opts: {
  18 | --    Id: string (REQUIRED for button independence),
  19 | --    Debounce: number (Time in seconds),
  20 | --    Confirm: table (Optional for Dialog: {Title, Msg})
  21 | -- }
  22 | -- @param callback: Fungsi yang akan dijalankan jika lolos guard
  23 | function ActionGuard.Run(opts, callback)
  24 | 	local uniqueId = opts.Id or "Global_Unsafe" -- Fallback ID jika developer lupa
  25 | 	local debounceTime = opts.Debounce or 0.5
  26 | 	local now = os.clock()
  27 | 
  28 | 	-- 1. CEK STATUS KUNCI (Granular Check)
  29 | 	-- Jika kunci ada DAN waktunya belum habis, tolak request (Silent Block)
  30 | 	if _activeLocks[uniqueId] and _activeLocks[uniqueId] > now then
  31 | 		warn("[ActionGuard] Spam Blocked: " .. uniqueId)
  32 | 		return
  33 | 	end
  34 | 
  35 | 	-- 2. PASANG KUNCI (Lock)
  36 | 	-- Kunci berlaku selama durasi debounce
  37 | 	_activeLocks[uniqueId] = now + debounceTime
  38 | 
  39 | 	-- 3. LOGIC EKSEKUSI
  40 | 	if opts.Confirm then
  41 | 		-- [PRESERVED LOGIC] Flow Konfirmasi (Sesuai Snapshot v0.1.0)
  42 | 		Signals:Fire("SystemUI:RequestConfirm", {
  43 | 			Title = opts.Confirm.Title,
  44 | 			Message = opts.Confirm.Msg,
  45 | 
  46 | 			-- Callback Result dari UI
  47 | 			OnResult = function(confirmed)
  48 | 				if confirmed then
  49 | 					-- Eksekusi aksi nyata jika user pilih YES
  50 | 					-- Dibungkus pcall agar error user tidak mematikan thread guard
  51 | 					task.spawn(function()
  52 | 						local success, err = pcall(callback)
  53 | 						if not success then
  54 | 							warn("[ActionGuard] Execution Error:", err)
  55 | 						end
  56 | 					end)
  57 | 				end
  58 | 				-- Lock dibiarkan habis sesuai timer debounce (auto-unlock)
  59 | 			end,
  60 | 		})
  61 | 	else
  62 | 		-- Flow Instant (Direct Execution)
  63 | 		task.spawn(function()
  64 | 			local success, err = pcall(callback)
  65 | 			if not success then
  66 | 				warn("[ActionGuard] Execution Error:", err)
  67 | 			end
  68 | 		end)
  69 | 	end
  70 | 
  71 | 	-- 4. GARBAGE COLLECTION (Memory Cleanup)
  72 | 	-- Hapus key dari tabel setelah waktu habis agar memori tidak bocor selamanya
  73 | 	task.delay(debounceTime + 0.1, function()
  74 | 		if _activeLocks[uniqueId] and _activeLocks[uniqueId] <= os.clock() then
  75 | 			_activeLocks[uniqueId] = nil
  76 | 		end
  77 | 	end)
  78 | end
  79 | 
  80 | return ActionGuard
  81 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/API.luau</strong> (63 lines, 1.99 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.API`

```lua
   1 | --!strict
   2 | -- @UI: API (Motion System Integrated)
   3 | -- @Standard: Enterprise Dependency Injection
   4 | -- @Status: ‚úÖ ANTI-NIGHTMARE CERTIFIED & UPDATED (Layout + ModalWrapper)
   5 | 
   6 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   7 | 
   8 | -- [1] External Libs
   9 | local Fusion = Loader.Get("Fusion")
  10 | local Onyx = Loader.Get("Onyx")
  11 | 
  12 | -- [2] Internal Tools
  13 | local Assets = Loader.Get("Assets")
  14 | local Motion = Loader.Get("Motion")
  15 | local MotionPresets = Loader.Get("MotionPresets")
  16 | local Theme = Loader.Get("Theme")
  17 | local Util = Loader.Get("Util")
  18 | local SafeLoader = Loader.Get("SafeLoader")
  19 | local Layout = Loader.Get("Layout") -- [NEW] Layout Helper (Pastikan file Layout.luau ada)
  20 | 
  21 | -- [3] Base Construction (Native Speed)
  22 | local API = table.clone(Fusion)
  23 | 
  24 | -- [4] Inject Dependencies
  25 | API.Fusion = Fusion
  26 | API.Onyx = Onyx
  27 | API.Theme = Theme
  28 | API.Motion = Motion
  29 | API.MotionPresets = MotionPresets
  30 | API.Assets = Assets
  31 | API.Util = Util
  32 | API.SafeLoader = SafeLoader
  33 | API.Layout = Layout -- [NEW] Inject Layout ke API agar bisa dipanggil via UI.Layout
  34 | API.Themer = Onyx.Themer
  35 | 
  36 | function API.New(scope, class)
  37 | 	return Fusion.New(scope, class)
  38 | end
  39 | 
  40 | -- [5] COMPONENT REGISTRY (THE FACTORY)
  41 | -- Kita menyuntikkan 'API' ke dalam komponen.
  42 | -- Komponen WAJIB menggunakan struktur: return function(API) ... end
  43 | 
  44 | local Components = {
  45 | 	AsyncButton = Loader.UI.Foundation.Components.AsyncButton(API),
  46 | 	SmartText = Loader.UI.Foundation.Components.SmartText(API),
  47 | 	SmartWindow = Loader.UI.Foundation.Components.SmartWindow(API),
  48 | 	GridContainer = Loader.UI.Foundation.Components.GridContainer(API),
  49 | 	ScreenWrapper = Loader.UI.Foundation.Components.ScreenWrapper(API),
  50 | 	ItemSlot = Loader.UI.Foundation.Components.ItemSlot(API),
  51 | 
  52 | 	-- [NEW] Anti-Ghost Overlay (Pastikan file Components/ModalWrapper.luau SUDAH ADA)
  53 | 	ModalWrapper = Loader.UI.Foundation.Components.ModalWrapper(API),
  54 | }
  55 | 
  56 | API.Components = Components
  57 | 
  58 | function API.NewScope()
  59 | 	return Fusion.scoped(Fusion, Util, Components)
  60 | end
  61 | 
  62 | return table.freeze(API)
  63 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Assets.luau</strong> (15 lines, 433 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Assets`

```lua
   1 | --!strict
   2 | -- @Asset: Icon Registry (Updated)
   3 | return table.freeze({
   4 |     Icons = {
   5 |         -- [FIX] Ganti ID Close ke yang lebih modern/HD (Lucide Style X)
   6 |         Close = "rbxassetid://11293981586", 
   7 |         Loading = "rbxassetid://16960657067", 
   8 |     },
   9 |     Placeholders = {
  10 |         Sword = "rbxassetid://13006407439", 
  11 |         Potion = "rbxassetid://12905487363",
  12 |         Generic = "rbxassetid://12663335633" 
  13 |     }
  14 | })
  15 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Layout.luau</strong> (65 lines, 1.76 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Layout`

```lua
   1 | --!strict
   2 | -- @Foundation: Layout v1.0
   3 | -- @Role: Positioning Helper (9-Slice Grid System)
   4 | 
   5 | local Layout = {}
   6 | 
   7 | local ANCHORS = {
   8 | 	TopLeft = Vector2.new(0, 0),
   9 | 	TopCenter = Vector2.new(0.5, 0),
  10 | 	TopRight = Vector2.new(1, 0),
  11 | 	MiddleLeft = Vector2.new(0, 0.5),
  12 | 	Center = Vector2.new(0.5, 0.5),
  13 | 	MiddleRight = Vector2.new(1, 0.5),
  14 | 	BottomLeft = Vector2.new(0, 1),
  15 | 	BottomCenter = Vector2.new(0.5, 1),
  16 | 	BottomRight = Vector2.new(1, 1),
  17 | }
  18 | 
  19 | local POSITIONS = {
  20 | 	TopLeft = UDim2.fromScale(0, 0),
  21 | 	TopCenter = UDim2.fromScale(0.5, 0),
  22 | 	TopRight = UDim2.fromScale(1, 0),
  23 | 	MiddleLeft = UDim2.fromScale(0, 0.5),
  24 | 	Center = UDim2.fromScale(0.5, 0.5),
  25 | 	MiddleRight = UDim2.fromScale(1, 0.5),
  26 | 	BottomLeft = UDim2.fromScale(0, 1),
  27 | 	BottomCenter = UDim2.fromScale(0.5, 1),
  28 | 	BottomRight = UDim2.fromScale(1, 1),
  29 | }
  30 | 
  31 | function Layout.Place(align, margin)
  32 | 	local anchor = ANCHORS[align] or ANCHORS.TopLeft
  33 | 	local basePos = POSITIONS[align] or POSITIONS.TopLeft
  34 | 	local off = margin or 0
  35 | 
  36 | 	local finalPos = basePos
  37 | 
  38 | 	if align == "TopLeft" then
  39 | 		finalPos = UDim2.new(0, off, 0, off)
  40 | 	elseif align == "TopCenter" then
  41 | 		finalPos = UDim2.new(0.5, 0, 0, off)
  42 | 	elseif align == "TopRight" then
  43 | 		finalPos = UDim2.new(1, -off, 0, off)
  44 | 	elseif align == "MiddleLeft" then
  45 | 		finalPos = UDim2.new(0, off, 0.5, 0)
  46 | 	elseif align == "Center" then
  47 | 		finalPos = UDim2.new(0.5, 0, 0.5, 0)
  48 | 	elseif align == "MiddleRight" then
  49 | 		finalPos = UDim2.new(1, -off, 0.5, 0)
  50 | 	elseif align == "BottomLeft" then
  51 | 		finalPos = UDim2.new(0, off, 1, -off)
  52 | 	elseif align == "BottomCenter" then
  53 | 		finalPos = UDim2.new(0.5, 0, 1, -off)
  54 | 	elseif align == "BottomRight" then
  55 | 		finalPos = UDim2.new(1, -off, 1, -off)
  56 | 	end
  57 | 
  58 | 	return {
  59 | 		AnchorPoint = anchor,
  60 | 		Position = finalPos,
  61 | 	}
  62 | end
  63 | 
  64 | return Layout
  65 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Motion.luau</strong> (32 lines, 895 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Motion`

```lua
   1 | --!strict
   2 | -- @Foundation: Motion (Scope Safe)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local Fusion = Loader.Get("Fusion")
   5 | 
   6 | local Motion = {}
   7 | 
   8 | -- Fusion 0.3 Spring
   9 | local SPEED_BASE = 25
  10 | local DAMP_BASE = 1
  11 | local SPEED_BOUNCY = 30
  12 | local DAMP_BOUNCY = 0.6
  13 | 
  14 | function Motion.Spring(scope, targetValue)
  15 |     return Fusion.Spring(scope, targetValue, SPEED_BASE, DAMP_BASE)
  16 | end
  17 | 
  18 | function Motion.Bouncy(scope, targetValue)
  19 |     return Fusion.Spring(scope, targetValue, SPEED_BOUNCY, DAMP_BOUNCY)
  20 | end
  21 | 
  22 | -- [FIXED] Hover Scale Logic without Scope Leak
  23 | function Motion.HoverScale(scope, isHoveredState)
  24 |     -- Kita buat spring terpisah yang mengikuti boolean
  25 |     local target = Fusion.Computed(scope, function(use)
  26 |         return use(isHoveredState) and 1.05 or 1
  27 |     end)
  28 |     return Fusion.Spring(scope, target, SPEED_BASE, DAMP_BASE)
  29 | end
  30 | 
  31 | return Motion
  32 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/MotionPresets.luau</strong> (104 lines, 3.65 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.MotionPresets`

```lua
   1 | --!strict
   2 | -- @Foundation: MotionPresets v2.0 (Directional)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local Fusion = Loader.Get("Fusion")
   5 | local Motion = Loader.Get("Motion")
   6 | 
   7 | local Presets = {}
   8 | 
   9 | -- [HELPER]
  10 | local function bind(scope, state, valTrue, valFalse, motionType)
  11 |     local target = Fusion.Computed(scope, function(use)
  12 |         return use(state) and valTrue or valFalse
  13 |     end)
  14 |     return motionType(scope, target)
  15 | end
  16 | 
  17 | -- ==========================================
  18 | -- 1. BASIC ANIMATIONS
  19 | -- ==========================================
  20 | 
  21 | -- POP UP (Zoom In + Fade)
  22 | function Presets.PopUp(scope, isVisible)
  23 |     return {
  24 |         Scale = bind(scope, isVisible, 1, 0.8, Motion.Bouncy),
  25 |         Transparency = bind(scope, isVisible, 0, 1, Motion.Spring),
  26 |         Position = UDim2.fromScale(0.5, 0.5),
  27 |         AnchorPoint = Vector2.new(0.5, 0.5)
  28 |     }
  29 | end
  30 | 
  31 | -- FADE (Alpha Only)
  32 | function Presets.Fade(scope, isVisible)
  33 |     return {
  34 |         Scale = 1,
  35 |         Transparency = bind(scope, isVisible, 0, 1, Motion.Spring),
  36 |         Position = UDim2.fromScale(0.5, 0.5),
  37 |         AnchorPoint = Vector2.new(0.5, 0.5)
  38 |     }
  39 | end
  40 | 
  41 | -- ==========================================
  42 | -- 2. DIRECTIONAL SLIDES (OFF-SCREEN ENTRY)
  43 | -- ==========================================
  44 | 
  45 | -- SLIDE FROM BOTTOM (Naik ke atas)
  46 | -- Cocok untuk: Inventory, Shop, Mobile Cards
  47 | function Presets.SlideFromBottom(scope, isVisible)
  48 |     return {
  49 |         Scale = 1,
  50 |         Transparency = bind(scope, isVisible, 0, 1, Motion.Spring),
  51 |         -- Visible: Tengah (0.5, 0.5). Hidden: Bawah Layar (0.5, 1.5)
  52 |         Position = bind(scope, isVisible, UDim2.fromScale(0.5, 0.5), UDim2.fromScale(0.5, 1.5), Motion.Bouncy),
  53 |         AnchorPoint = Vector2.new(0.5, 0.5)
  54 |     }
  55 | end
  56 | 
  57 | -- SLIDE FROM TOP (Turun ke bawah)
  58 | -- Cocok untuk: Settings, Notifications
  59 | function Presets.SlideFromTop(scope, isVisible)
  60 |     return {
  61 |         Scale = 1,
  62 |         Transparency = bind(scope, isVisible, 0, 1, Motion.Spring),
  63 |         -- Visible: Tengah. Hidden: Atas Layar (0.5, -0.5)
  64 |         Position = bind(scope, isVisible, UDim2.fromScale(0.5, 0.5), UDim2.fromScale(0.5, -0.5), Motion.Bouncy),
  65 |         AnchorPoint = Vector2.new(0.5, 0.5)
  66 |     }
  67 | end
  68 | 
  69 | -- SLIDE FROM LEFT (Masuk dari kiri)
  70 | -- Cocok untuk: Sidebar Menu, Navigation
  71 | function Presets.SlideFromLeft(scope, isVisible)
  72 |     return {
  73 |         Scale = 1,
  74 |         Transparency = bind(scope, isVisible, 0, 1, Motion.Spring), -- Optional: set 0 kalau mau solid terus
  75 |         -- Visible: Kiri Tengah (Atur posisi sesuai kebutuhan, misal Sidebar biasanya nempel kiri)
  76 |         -- Disini kita buat ke tengah layar dulu biar konsisten sama SmartWindow
  77 |         Position = bind(scope, isVisible, UDim2.fromScale(0.5, 0.5), UDim2.fromScale(-0.5, 0.5), Motion.Bouncy),
  78 |         AnchorPoint = Vector2.new(0.5, 0.5)
  79 |     }
  80 | end
  81 | 
  82 | -- SLIDE FROM RIGHT (Masuk dari kanan)
  83 | -- Cocok untuk: Details Panel, Inspect
  84 | function Presets.SlideFromRight(scope, isVisible)
  85 |     return {
  86 |         Scale = 1,
  87 |         Transparency = bind(scope, isVisible, 0, 1, Motion.Spring),
  88 |         -- Hidden: Kanan Layar (1.5)
  89 |         Position = bind(scope, isVisible, UDim2.fromScale(0.5, 0.5), UDim2.fromScale(1.5, 0.5), Motion.Bouncy),
  90 |         AnchorPoint = Vector2.new(0.5, 0.5)
  91 |     }
  92 | end
  93 | 
  94 | -- ==========================================
  95 | -- 3. ALIASES (Shortcuts)
  96 | -- ==========================================
  97 | Presets.Slide = Presets.SlideFromBottom -- Default "Slide" = Bottom
  98 | Presets.SlideBottom = Presets.SlideFromBottom
  99 | Presets.SlideTop = Presets.SlideFromTop
 100 | Presets.SlideLeft = Presets.SlideFromLeft
 101 | Presets.SlideRight = Presets.SlideFromRight
 102 | 
 103 | return table.freeze(Presets)
 104 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/OVHLTheme.luau</strong> (53 lines, 1.42 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.OVHLTheme`

```lua
   1 | --!strict
   2 | -- @UI: OVHLTheme (Enterprise Design Tokens)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local Fusion = Loader.Get("Fusion")
   5 | local Onyx = Loader.Get("Onyx")
   6 | local Util = Loader.Get("Util")
   7 | 
   8 | local Scope = Fusion.scoped(Fusion)
   9 | 
  10 | -- Palet Warna (Zinc & Emerald)
  11 | local P = {
  12 | 	Zinc950 = Color3.fromHex("09090b"), -- Background Gelap
  13 | 	Zinc900 = Color3.fromHex("18181b"), -- Card Background
  14 | 	Zinc800 = Color3.fromHex("27272a"), -- Border/Stroke
  15 | 	Zinc400 = Color3.fromHex("a1a1aa"), -- Text Muted
  16 | 	White = Color3.fromHex("ffffff"), -- Text Main
  17 | 
  18 | 	Emerald500 = Color3.fromHex("10b981"), -- Primary Action
  19 | 	Red500 = Color3.fromHex("ef4444"), -- Destructive
  20 | }
  21 | 
  22 | local OVHLTheme = Onyx.Themer.NewTheme(Scope, {
  23 | 	Colors = {
  24 | 		Base = { Main = P.Zinc900, Alt = P.Zinc950 },
  25 | 		BaseContent = { Main = P.White, Muted = P.Zinc400 },
  26 | 		Primary = { Main = P.Emerald500 },
  27 | 		Neutral = { Main = P.Zinc800 },
  28 | 		Error = { Main = P.Red500 },
  29 | 	},
  30 | 	CornerRadius = {
  31 | 		Small = 4,
  32 | 		Base = 8,
  33 | 		Large = 12,
  34 | 	},
  35 | 	StrokeThickness = {
  36 | 		Base = 1,
  37 | 		Focus = 2,
  38 | 	},
  39 | 	-- [NEW] Spacing Tokens (Single Source of Truth)
  40 | 	Spacing = {
  41 | 		Small = 4,
  42 | 		Medium = 8,
  43 | 		Large = 12,
  44 | 		XLarge = 16,
  45 | 	},
  46 | 	Font = {
  47 | 		Body = Util.ToFont("rbxasset://fonts/families/GothamSSm.json", Enum.FontWeight.Medium),
  48 | 		Heading = Util.ToFont("rbxasset://fonts/families/GothamSSm.json", Enum.FontWeight.Bold),
  49 | 	},
  50 | })
  51 | 
  52 | return OVHLTheme
  53 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/SafeLoader.luau</strong> (48 lines, 1.47 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.SafeLoader`

```lua
   1 | --!strict
   2 | -- @Foundation: SafeLoader (With Telemetry)
   3 | local RS = game:GetService("ReplicatedStorage")
   4 | local Loader = require(RS.OVHL.Core.Loader)
   5 | local Fusion = Loader.Get("Fusion")
   6 | local SmartLogger = Loader.Get("Logger")
   7 | 
   8 | local SafeLoader = {}
   9 | local Logger = SmartLogger.New("USER_INTERFACE")
  10 | 
  11 | function SafeLoader.Mount(scope, componentFunc, props)
  12 |     local viewName = "UnknownView"
  13 |     if props.Config and props.Config.Meta then
  14 |         viewName = props.Config.Meta.Name .. "View"
  15 |     end
  16 | 
  17 |     local success, result = xpcall(function()
  18 |         return componentFunc(scope, props)
  19 |     end, debug.traceback)
  20 | 
  21 |     if success then
  22 |         Logger:Info("MountSuccess", { -- Pakai Info agar pasti muncul
  23 |             View = viewName,
  24 |             Screen = props.Name or "Screen"
  25 |         })
  26 |         return result
  27 |     else
  28 |         Logger:Error("MountFailed", { View = viewName, Error = result })
  29 |         
  30 |         return scope:New "Frame" {
  31 |             Name = "ErrorBoundary",
  32 |             Size = UDim2.fromScale(1, 1),
  33 |             BackgroundColor3 = Color3.fromRGB(40, 0, 0),
  34 |             ZIndex = 9999,
  35 |             [Fusion.Children] = {
  36 |                 scope:New "TextLabel" {
  37 |                     Text = "UI ERROR: " .. tostring(result),
  38 |                     TextColor3 = Color3.new(1,0.5,0.5),
  39 |                     Size = UDim2.fromScale(1,1),
  40 |                     BackgroundTransparency = 0.5
  41 |                 }
  42 |             }
  43 |         }
  44 |     end
  45 | end
  46 | 
  47 | return SafeLoader
  48 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Theme.luau</strong> (2 lines, 44 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Theme`

```lua
   1 | --!strict
   2 | -- Deprecated. Use OVHLTheme.luau
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Util.luau</strong> (39 lines, 1.32 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Util`

```lua
   1 | --!strict
   2 | -- @Foundation: UI Utilities
   3 | -- @Responsibility: Data Conversion & Asset Normalization
   4 | local Util = {}
   5 | 
   6 | -- [[ FONT CONVERTER ]]
   7 | -- Mengubah string config menjadi Font Object yang valid
   8 | function Util.ToFont(fontSource, weight, style)
   9 |     if typeof(fontSource) == "Font" then
  10 |         return fontSource
  11 |     elseif type(fontSource) == "string" then
  12 |         -- Default fallback args
  13 |         local w = weight or Enum.FontWeight.Regular
  14 |         local s = style or Enum.FontStyle.Normal
  15 |         
  16 |         -- Cek apakah ini Enum.Font legacy (jarang dipakai di framework modern) atau Asset ID
  17 |         if fontSource:match("^rbxasset") then
  18 |             return Font.new(fontSource, w, s)
  19 |         else
  20 |             -- Fallback jika string nama font biasa (Gotham, etc) - though Font.new usually takes ID
  21 |             return Font.new("rbxasset://fonts/families/GothamSSm.json", w, s)
  22 |         end
  23 |     end
  24 |     -- Fallback total
  25 |     return Font.new("rbxasset://fonts/families/GothamSSm.json")
  26 | end
  27 | 
  28 | -- [[ ASSET ID CLEANER ]]
  29 | -- Memastikan ID selalu format "rbxassetid://..."
  30 | function Util.CleanAssetId(id)
  31 |     if not id then return "" end
  32 |     local str = tostring(id)
  33 |     if str:match("^rbxasset") then return str end
  34 |     if str:match("^%d+$") then return "rbxassetid://" .. str end
  35 |     return str
  36 | end
  37 | 
  38 | return table.freeze(Util)
  39 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Bridges/Topbar.lua</strong> (81 lines, 2.46 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Bridges.Topbar`

```lua
   1 | -- @Bridge: TopbarPlus (With Security Check)
   2 | local RS = game:GetService("ReplicatedStorage")
   3 | local Players = game:GetService("Players")
   4 | local Loader = require(RS.OVHL.Core.Loader)
   5 | local SmartLogger = Loader.Get("Logger")
   6 | 
   7 | local TopbarPlus = Loader.Pkg("topbarplus")
   8 | local Fusion = Loader.Get("Fusion")
   9 | local API = Loader.Get("API")
  10 | 
  11 | local TopbarBridge = {}
  12 | local _initialized = false
  13 | local Logger = nil 
  14 | 
  15 | function TopbarBridge.Init()
  16 |     if _initialized then return end
  17 |     _initialized = true
  18 |     Logger = SmartLogger.New("TOPBAR")
  19 |     
  20 |     local Theme = API.Theme
  21 |     local peek = Fusion.peek
  22 |     local C = Theme.Colors
  23 |     
  24 |     TopbarPlus.setDisplayOrder(10000)
  25 |     TopbarPlus.modifyBaseTheme({
  26 |         {"IconBackgroundColor", peek(C.Base.Main)},
  27 |         {"IconBorderColor", peek(C.Neutral.Main)},
  28 |         {"IconImageColor", peek(C.BaseContent.Main)},
  29 |         {"IconLabelColor", peek(C.BaseContent.Main)},
  30 |         {"WidgetBackgroundColor", peek(C.Base.Main)},
  31 |         {"WidgetBorderColor", peek(C.Neutral.Main)},
  32 |         {"IconCornerRadius", UDim.new(0, 8)},
  33 |     })
  34 |     
  35 |     Logger:Info("System", "Bridge Initialized")
  36 | end
  37 | 
  38 | function TopbarBridge.Register(name, config, toggleFunc)
  39 |     TopbarBridge.Init()
  40 |     
  41 |     if not config or not config.Enabled then return nil end
  42 |     
  43 |     -- [SECURITY CHECK] The Gatekeeper
  44 |     if config.Permission then
  45 |         local myRank = Players.LocalPlayer:GetAttribute("OVHL_Rank") or 0
  46 |         if myRank < config.Permission then
  47 |             Logger:Debug("Hidden", { 
  48 |                 Module = name, 
  49 |                 Reason = "Low Rank", 
  50 |                 Req = config.Permission, 
  51 |                 Got = myRank 
  52 |             })
  53 |             return nil -- Jangan bikin icon sama sekali!
  54 |         end
  55 |     end
  56 |     
  57 |     Logger:Info("Register", { Name = name, Perm = config.Permission or 0 })
  58 |     
  59 |     local icon = TopbarPlus.new()
  60 |         :setLabel(config.Text or name)
  61 |         :setImage(config.Icon)
  62 |         :setOrder(config.Order or 10)
  63 |         
  64 |     if config.Caption then icon:setCaption(config.Caption) end
  65 |     if config.Shortcut then icon:bindToggleKey(config.Shortcut) end
  66 |     
  67 |     icon.selected:Connect(function() 
  68 |         Logger:Debug("Interaction", {Action="Open", Module=name})
  69 |         toggleFunc(true) 
  70 |     end)
  71 |     
  72 |     icon.deselected:Connect(function() 
  73 |         Logger:Debug("Interaction", {Action="Close", Module=name})
  74 |         toggleFunc(false) 
  75 |     end)
  76 |     
  77 |     return icon
  78 | end
  79 | 
  80 | return TopbarBridge
  81 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/AsyncButton.luau</strong> (75 lines, 2.71 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.AsyncButton`

```lua
   1 | --!strict
   2 | -- @Component: AsyncButton (Telemetry Enabled)
   3 | -- @Standard: OVHL Gold (With UX Logs)
   4 | 
   5 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   6 | local SmartLogger = Loader.Get("Logger")
   7 | local UXLogger = SmartLogger.New("UX") -- [CRITICAL] Logger khusus User Experience
   8 | 
   9 | return function(API)
  10 |     local Onyx = API.Onyx
  11 |     
  12 |     return function(scope, props)
  13 |         local isProcessing = scope:Value(false)
  14 |         
  15 |         -- Ambil nama tombol untuk log
  16 |         local btnName = props.Text or "UnknownButton"
  17 |         
  18 |         return Onyx.Components.Button(scope, {
  19 |             Size = props.Size,
  20 |             LayoutOrder = props.LayoutOrder,
  21 |             Style = props.Style or "Filled",
  22 |             Color = props.Color,
  23 |             
  24 |             Disabled = API.Computed(scope, function(use)
  25 |                 return props.Disabled or use(isProcessing)
  26 |             end),
  27 |             
  28 |             Content = API.Computed(scope, function(use)
  29 |                 if use(isProcessing) then return { "..." } else return { btnName } end
  30 |             end),
  31 |             
  32 |             OnActivate = function()
  33 |                 -- [TELEMETRY] Log detik ini juga saat klik terjadi
  34 |                 UXLogger:Info("Interact", { 
  35 |                     Element = btnName, 
  36 |                     State = "Clicked",
  37 |                     Processing = API.Fusion.peek(isProcessing) 
  38 |                 })
  39 | 
  40 |                 -- Debounce Check
  41 |                 if API.Fusion.peek(isProcessing) then 
  42 |                     UXLogger:Debug("Debounce", "Click ignored (Processing)")
  43 |                     return 
  44 |                 end
  45 |                 
  46 |                 if props.OnClick then
  47 |                     isProcessing:set(true)
  48 |                     
  49 |                     -- Bungkus xpcall
  50 |                     local success, result = xpcall(function()
  51 |                         return props.OnClick()
  52 |                     end, debug.traceback)
  53 |                     
  54 |                     if not success then
  55 |                         UXLogger:Error("ClickError", { Element = btnName, Trace = result })
  56 |                         isProcessing:set(false)
  57 |                         return
  58 |                     end
  59 |                     
  60 |                     -- Handle Promise
  61 |                     if result and typeof(result) == "table" and result.andThen then
  62 |                         result:finally(function()
  63 |                             isProcessing:set(false)
  64 |                             UXLogger:Info("TaskDone", { Element = btnName })
  65 |                         end)
  66 |                     else
  67 |                         task.wait(0.1)
  68 |                         isProcessing:set(false)
  69 |                     end
  70 |                 end
  71 |             end
  72 |         })
  73 |     end
  74 | end
  75 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/GridContainer.luau</strong> (37 lines, 1.32 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.GridContainer`

```lua
   1 | --!strict
   2 | -- @Component: GridContainer
   3 | -- @Role: Layout Wrapper
   4 | return function(API)
   5 |     local function New(scope, class) return API.New(scope, class) end
   6 | 
   7 |     return function(scope, props)
   8 |         local cellSize = props.CellSize or {X=100, Y=100}
   9 |         local gap = props.Gap or {X=10, Y=10}
  10 |         
  11 |         return New(scope, "ScrollingFrame") {
  12 |             Name = "GridContainer",
  13 |             Size = UDim2.fromScale(1, 1),
  14 |             BackgroundTransparency = 1,
  15 |             CanvasSize = UDim2.new(0, 0, 0, 0),
  16 |             AutomaticCanvasSize = Enum.AutomaticSize.Y,
  17 |             ScrollBarThickness = 4,
  18 |             
  19 |             [API.Children] = {
  20 |                 New(scope, "UIPadding") {
  21 |                     PaddingTop = UDim.new(0, 10), PaddingBottom = UDim.new(0, 10),
  22 |                     PaddingLeft = UDim.new(0, 10), PaddingRight = UDim.new(0, 10)
  23 |                 },
  24 |                 
  25 |                 New(scope, "UIGridLayout") {
  26 |                     CellSize = UDim2.fromOffset(cellSize.X, cellSize.Y),
  27 |                     CellPadding = UDim2.fromOffset(gap.X, gap.Y),
  28 |                     HorizontalAlignment = Enum.HorizontalAlignment.Center,
  29 |                     SortOrder = Enum.SortOrder.LayoutOrder
  30 |                 },
  31 |                 
  32 |                 props[API.Children]
  33 |             }
  34 |         }
  35 |     end
  36 | end
  37 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/ItemSlot.luau</strong> (155 lines, 6.71 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.ItemSlot`

```lua
   1 | --!strict
   2 | -- @Component: ItemSlot v3.1 (Visual States)
   3 | return function(API)
   4 | 	local Theme = API.Theme
   5 |     local Assets = API.Assets
   6 |     local function New(scope, class) return API.New(scope, class) end
   7 | 	
   8 | 	return function(scope, props)
   9 | 		local Item = props.Item
  10 | 		local Config = props.Config or {}
  11 | 		
  12 |         -- [STATE] Cek status Equipped
  13 |         local isEquipped = Item.Equipped == true
  14 |         
  15 |         -- [STYLE] Rarity Color (Override jadi GOLD jika equipped)
  16 | 		local rarityColors = Config.UI and Config.UI.RarityColors or {}
  17 | 		local baseColor = rarityColors[Item.Rarity] or Theme.Colors.Neutral.Main
  18 |         
  19 |         local borderColor = isEquipped and Color3.fromHex("FFD700") or baseColor -- Gold if equipped
  20 |         local borderThickness = isEquipped and 3 or 2
  21 |         
  22 |         local imageId = Item.Icon 
  23 |         if not imageId or imageId == "" then
  24 |             imageId = Assets.Placeholders.Generic
  25 |             if string.find(Item.Name, "Sword") then imageId = Assets.Placeholders.Sword end
  26 |             if string.find(Item.Name, "Potion") then imageId = Assets.Placeholders.Potion end
  27 |         end
  28 | 
  29 | 		return New(scope, "Frame") {
  30 | 			Name = "Slot_" .. (Item.Id or "0"),
  31 | 			Size = UDim2.fromScale(1, 1),
  32 | 			BackgroundColor3 = Theme.Colors.Base.Main,
  33 |             
  34 | 			[API.Children] = {
  35 | 				New(scope, "UICorner") { CornerRadius = UDim.new(0, Theme.CornerRadius.Base) },
  36 | 				
  37 |                 -- Border (Dynamic Color)
  38 |                 New(scope, "UIStroke") {
  39 | 					Color = borderColor,
  40 | 					Thickness = borderThickness,
  41 | 					Transparency = isEquipped and 0 or 0.3,
  42 | 					ApplyStrokeMode = Enum.ApplyStrokeMode.Border
  43 | 				},
  44 |                 
  45 |                 -- Equipped Tag (Corner)
  46 |                 isEquipped and New(scope, "Frame") {
  47 |                     Size = UDim2.fromOffset(24, 24),
  48 |                     Position = UDim2.new(1, -4, 0, 4),
  49 |                     AnchorPoint = Vector2.new(1, 0),
  50 |                     BackgroundColor3 = Color3.fromHex("FFD700"),
  51 |                     ZIndex = 5,
  52 |                     [API.Children] = {
  53 |                         New(scope, "UICorner") { CornerRadius = UDim.new(0, 4) },
  54 |                         New(scope, "TextLabel") {
  55 |                             Text = "E",
  56 |                             Size = UDim2.fromScale(1,1),
  57 |                             BackgroundTransparency = 1,
  58 |                             TextColor3 = Color3.new(0,0,0),
  59 |                             FontFace = Theme.Font.Heading,
  60 |                             TextSize = 14
  61 |                         }
  62 |                     }
  63 |                 } or nil,
  64 | 				
  65 | 				New(scope, "Frame") {
  66 | 					Size = UDim2.fromScale(1, 1),
  67 | 					BackgroundTransparency = 1,
  68 | 					
  69 | 					[API.Children] = {
  70 | 						New(scope, "UIPadding") {
  71 | 							PaddingTop = UDim.new(0, Theme.Spacing.Medium), 
  72 |                             PaddingBottom = UDim.new(0, Theme.Spacing.Medium),
  73 | 							PaddingLeft = UDim.new(0, Theme.Spacing.Medium), 
  74 |                             PaddingRight = UDim.new(0, Theme.Spacing.Medium),
  75 | 						},
  76 |                         
  77 |                         New(scope, "UIListLayout") {
  78 |                             SortOrder = Enum.SortOrder.LayoutOrder,
  79 |                             Padding = UDim.new(0, Theme.Spacing.Small),
  80 |                             HorizontalAlignment = Enum.HorizontalAlignment.Center,
  81 |                             VerticalAlignment = Enum.VerticalAlignment.Top
  82 |                         },
  83 |                         
  84 |                         -- 1. IMAGE
  85 |                         New(scope, "ImageLabel") {
  86 |                             LayoutOrder = 1,
  87 |                             Size = UDim2.fromOffset(80, 80),
  88 |                             BackgroundTransparency = 1,
  89 |                             Image = imageId,
  90 |                             ScaleType = Enum.ScaleType.Fit
  91 |                         },
  92 | 
  93 | 						-- 2. NAME
  94 |                         scope:SmartText {
  95 |                             LayoutOrder = 2,
  96 |                             Text = Item.Name,
  97 |                             Variant = "Body", 
  98 |                             Align = Enum.TextXAlignment.Center,
  99 |                             Size = 14
 100 |                         },
 101 |                         
 102 |                         -- 3. RARITY
 103 |                         scope:SmartText {
 104 |                             LayoutOrder = 3,
 105 |                             Text = string.upper(Item.Rarity),
 106 |                             Variant = "Caption",
 107 |                             Align = Enum.TextXAlignment.Center,
 108 |                             Color = baseColor 
 109 |                         },
 110 | 
 111 |                         -- 5. ACTION BUTTONS
 112 |                         New(scope, "Frame") {
 113 |                             LayoutOrder = 5,
 114 |                             Size = UDim2.new(1, 0, 0, 0),
 115 |                             AutomaticSize = Enum.AutomaticSize.Y,
 116 |                             BackgroundTransparency = 1,
 117 |                             
 118 |                             [API.Children] = {
 119 |                                 New(scope, "UIListLayout") {
 120 |                                     FillDirection = Enum.FillDirection.Vertical,
 121 |                                     Padding = UDim.new(0, Theme.Spacing.Small),
 122 |                                     HorizontalAlignment = Enum.HorizontalAlignment.Center
 123 |                                 },
 124 |                                 
 125 |                                 API.ForValues(scope, Config.UI.Actions or {}, function(use, innerScope, action)
 126 |                                     -- [LOGIC] Swap Text "EQUIP" -> "UNEQUIP"
 127 |                                     local label = action.Label
 128 |                                     local style = action.Style
 129 |                                     
 130 |                                     if action.Id == "Equip" and isEquipped then
 131 |                                         label = "UNEQUIP"
 132 |                                         style = "Outlined" -- Ganti style biar beda
 133 |                                     end
 134 |                                 
 135 |                                     return innerScope:AsyncButton {
 136 |                                         Text = label,
 137 |                                         Style = style,
 138 |                                         Size = UDim2.new(1, 0, 0, 28),
 139 |                                         
 140 |                                         OnClick = function()
 141 |                                             if props.OnAction then
 142 |                                                 props.OnAction(Item, action.Id, function() end)
 143 |                                             end
 144 |                                         end
 145 |                                     }
 146 |                                 end)
 147 |                             }
 148 |                         }
 149 | 					}
 150 | 				}
 151 | 			}
 152 | 		}
 153 | 	end
 154 | end
 155 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/ModalWrapper.luau</strong> (43 lines, 1.13 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.ModalWrapper`

```lua
   1 | --!strict
   2 | -- @Component: ModalWrapper v1.0
   3 | -- @Role: Fullscreen Overlay & Input Sink (Mencegah Click-Through)
   4 | -- @Standard: Factory Pattern (Dependency Injection)
   5 | 
   6 | return function(API)
   7 | 	local function New(scope, class)
   8 | 		return API.New(scope, class)
   9 | 	end
  10 | 
  11 | 	return function(scope, props)
  12 | 		local zIndex = props.ZIndex or 100 -- Default tinggi agar di atas UI lain
  13 | 		local color = props.Color or Color3.new(0, 0, 0)
  14 | 		local transparency = props.Transparency or 0.6
  15 | 
  16 | 		return New(scope, "Frame")({
  17 | 			Name = props.Name or "ModalOverlay",
  18 | 
  19 | 			-- Fullscreen
  20 | 			Size = UDim2.fromScale(1, 1),
  21 | 			Position = UDim2.fromScale(0, 0),
  22 | 
  23 | 			BackgroundColor3 = color,
  24 | 			BackgroundTransparency = transparency,
  25 | 			ZIndex = zIndex,
  26 | 
  27 | 			-- [CRITICAL FIX] Input Sinking
  28 | 			-- Membuat frame ini 'padat' bagi mouse, sehingga klik tidak tembus ke belakang
  29 | 			Active = true,
  30 | 			Interactable = true,
  31 | 
  32 | 			-- Opsional: Tutup modal saat overlay diklik (Klik luar window)
  33 | 			[API.OnEvent("Activated")] = function()
  34 | 				if props.OnOverlayClick then
  35 | 					props.OnOverlayClick()
  36 | 				end
  37 | 			end,
  38 | 
  39 | 			[API.Children] = props[API.Children],
  40 | 		})
  41 | 	end
  42 | end
  43 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/ScreenWrapper.luau</strong> (52 lines, 1.51 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.ScreenWrapper`

```lua
   1 | --!strict
   2 | -- @Component: ScreenWrapper
   3 | -- @Standard: Explicit API Usage
   4 | return function(API)
   5 | 	local Themer = API.Themer
   6 | 	local Theme = API.Theme
   7 | 	-- [FIX] Ambil AutoScaler langsung dari Onyx, jangan via scope
   8 | 	local AutoScaler = API.Onyx.Components.AutoScaler or API.Onyx.AutoScaler
   9 | 
  10 | 	return function(scope, props)
  11 | 		local PlayerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")
  12 | 
  13 | 		return API.New(scope, "ScreenGui")({
  14 | 			Name = props.Name or "OVHL_Screen",
  15 | 			Parent = PlayerGui,
  16 | 			ResetOnSpawn = false,
  17 | 			IgnoreGuiInset = true,
  18 | 			DisplayOrder = props.Order or 10,
  19 | 			Enabled = props.Enabled,
  20 | 
  21 | 			[API.Children] = {
  22 | 				-- [FIX] Explicit Call: AutoScaler(scope, props)
  23 | 				-- Onyx components biasanya dipanggil sebagai fungsi: Component(scope, props)
  24 | 				AutoScaler(scope, {
  25 | 					Name = "ResponsiveCanvas",
  26 | 					BaseResolution = Vector2.new(1280, 720),
  27 | 					MinScale = 0.5,
  28 | 					MaxScale = 1.5,
  29 | 					AnchorPoint = Vector2.new(0.5, 0.5),
  30 | 					Position = UDim2.fromScale(0.5, 0.5),
  31 | 					Size = UDim2.fromScale(1, 1),
  32 | 					BackgroundTransparency = 1,
  33 | 
  34 | 					[API.Children] = {
  35 | 						Themer.Theme:is(Theme):during(function()
  36 | 							return API.New(scope, "Frame")({
  37 | 								Name = "ProviderScope",
  38 | 								AnchorPoint = Vector2.new(0.5, 0.5),
  39 | 								Position = UDim2.fromScale(0.5, 0.5),
  40 | 								Size = UDim2.fromScale(1, 1),
  41 | 								BackgroundTransparency = 1,
  42 | 								Active = false,
  43 | 								[API.Children] = props[API.Children],
  44 | 							})
  45 | 						end),
  46 | 					},
  47 | 				}),
  48 | 			},
  49 | 		})
  50 | 	end
  51 | end
  52 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/SmartButton.luau</strong> (47 lines, 1.58 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.SmartButton`

```lua
   1 | --!strict
   2 | -- @Component: SmartButton (With Telemetry)
   3 | local RS = game:GetService("ReplicatedStorage")
   4 | local Loader = require(RS.OVHL.Core.Loader)
   5 | local SmartLogger = Loader.Get("Logger")
   6 | 
   7 | -- Logger khusus interaksi User
   8 | local UXLogger = SmartLogger.New("UX") 
   9 | 
  10 | return function(API)
  11 |     return function(scope, props)
  12 |         -- Map OVHL Style to Onyx Style
  13 |         local style = "Filled"
  14 |         if props.Style == "Outline" then style = "Outlined" end
  15 |         if props.Style == "Ghost" then style = "Ghost" end
  16 |         
  17 |         local color = nil
  18 |         if props.Style == "Danger" then color = API.Util.Colors.Red["500"] end
  19 |         
  20 |         -- Ambil Text untuk Log (Bisa string atau State)
  21 |         local btnText = props.Text or "Unknown"
  22 |         
  23 |         return scope:Button {
  24 |             Content = { props.Text },
  25 |             Style = style,
  26 |             Color = color,
  27 |             Size = props.Size,
  28 |             LayoutOrder = props.LayoutOrder,
  29 |             
  30 |             -- [TELEMETRY] Intercept Activation
  31 |             OnActivate = function()
  32 |                 -- 1. Lapor Dulu!
  33 |                 local txt = (type(btnText) == "string") and btnText or "DynamicState"
  34 |                 UXLogger:Info("Click", { 
  35 |                     Button = txt, 
  36 |                     Style = props.Style,
  37 |                     Context = props.Context or "UI"
  38 |                 })
  39 |                 
  40 |                 -- 2. Jalankan Logic Asli
  41 |                 if props.OnClick then props.OnClick() end
  42 |                 if props.OnActivate then props.OnActivate() end
  43 |             end
  44 |         }
  45 |     end
  46 | end
  47 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/SmartText.luau</strong> (36 lines, 1.23 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.SmartText`

```lua
   1 | --!strict
   2 | -- @Component: SmartText
   3 | -- @Role: Standardized Typography
   4 | return function(API)
   5 |     local Theme = API.Theme
   6 |     local function New(scope, class) return API.New(scope, class) end
   7 | 
   8 |     local VARIANTS = {
   9 |         Header = { Size = 24, Font = "Heading", Color = "BaseContent" },
  10 |         SubHeader = { Size = 18, Font = "Body", Color = "BaseContent" },
  11 |         Body = { Size = 14, Font = "Body", Color = "BaseContent" },
  12 |         Caption = { Size = 12, Font = "Body", Color = "Neutral" },
  13 |     }
  14 | 
  15 |     return function(scope, props)
  16 |         local variant = VARIANTS[props.Variant or "Body"]
  17 |         
  18 |         return New(scope, "TextLabel") {
  19 |             Name = props.Name or "Text",
  20 |             Text = props.Text or "",
  21 |             LayoutOrder = props.LayoutOrder,
  22 |             
  23 |             -- Styling
  24 |             BackgroundTransparency = 1,
  25 |             TextColor3 = Theme.Colors[variant.Color].Main,
  26 |             TextSize = props.Size or variant.Size,
  27 |             FontFace = Theme.Font[variant.Font],
  28 |             TextXAlignment = props.Align or Enum.TextXAlignment.Left,
  29 |             
  30 |             -- Auto Size
  31 |             AutomaticSize = Enum.AutomaticSize.XY,
  32 |             Size = UDim2.fromScale(0, 0),
  33 |         }
  34 |     end
  35 | end
  36 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/SmartWindow.luau</strong> (125 lines, 3.63 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.SmartWindow`

```lua
   1 | --!strict
   2 | -- @Component: SmartWindow v0.3.0 (Input Hardened)
   3 | -- @Role: Standard Window with Input Sink (Anti-Ghost)
   4 | 
   5 | -- [DI PATTERN] Menerima API via Parameter (Anti Circular Dependency)
   6 | return function(API)
   7 | 	local Theme = API.Theme
   8 | 	local Assets = API.Assets
   9 | 	local MotionPresets = API.MotionPresets
  10 | 	local Children = API.Children
  11 | 
  12 | 	local function New(scope, class)
  13 | 		return API.New(scope, class)
  14 | 	end
  15 | 
  16 | 	return function(scope, props)
  17 | 		local isVisible = props.Visible
  18 | 		if isVisible == nil then
  19 | 			isVisible = scope:Value(true)
  20 | 		end
  21 | 
  22 | 		local styleName = props.Transition or "PopUp"
  23 | 		local presetFunc = MotionPresets[styleName] or MotionPresets.PopUp
  24 | 		local animProps = presetFunc(scope, isVisible)
  25 | 
  26 | 		local isRendering = API.Computed(scope, function(use)
  27 | 			return use(animProps.Transparency) < 0.99
  28 | 		end)
  29 | 
  30 | 		-- [[ ROOT WINDOW ]]
  31 | 		return New(scope, "Frame")({
  32 | 			Name = "WindowFrame",
  33 | 			AnchorPoint = animProps.AnchorPoint,
  34 | 			Position = animProps.Position,
  35 | 			Size = props.Size or UDim2.fromOffset(500, 400),
  36 | 
  37 | 			-- [CRITICAL FIX] ROOT INPUT SINK
  38 | 			-- Menjadikan seluruh area window 'padat' terhadap raycast mouse.
  39 | 			-- Mencegah klik tembus ke objek di belakang (World/UI Lain).
  40 | 			Active = true,
  41 | 
  42 | 			BackgroundTransparency = 1,
  43 | 			Visible = isRendering,
  44 | 
  45 | 			[Children] = {
  46 | 				New(scope, "UIScale")({ Scale = animProps.Scale }),
  47 | 
  48 | 				-- VISUAL LAYER
  49 | 				New(scope, "CanvasGroup")({
  50 | 					Name = "Canvas",
  51 | 					Size = UDim2.fromScale(1, 1),
  52 | 					BackgroundColor3 = Theme.Colors.Base.Main,
  53 | 					GroupTransparency = animProps.Transparency,
  54 | 
  55 | 					-- Active dimatikan di CanvasGroup untuk menghindari bug engine Roblox
  56 | 					-- Kita mengandalkan Active di WindowFrame (Parent)
  57 | 					Active = false,
  58 | 					ZIndex = 2,
  59 | 
  60 | 					[Children] = {
  61 | 						New(scope, "UICorner")({ CornerRadius = UDim.new(0, Theme.CornerRadius.Large) }),
  62 | 						New(scope, "UIStroke")({ Color = Theme.Colors.Neutral.Main, Thickness = 1 }),
  63 | 
  64 | 						-- [[ HEADER ]]
  65 | 						New(scope, "Frame")({
  66 | 							Name = "Header",
  67 | 							Size = UDim2.new(1, 0, 0, 48),
  68 | 							BackgroundTransparency = 1,
  69 | 
  70 | 							[Children] = {
  71 | 								New(scope, "UIPadding")({
  72 | 									PaddingLeft = UDim.new(0, 16),
  73 | 									PaddingRight = UDim.new(0, 16),
  74 | 								}),
  75 | 								New(scope, "UIListLayout")({
  76 | 									FillDirection = Enum.FillDirection.Horizontal,
  77 | 									VerticalAlignment = Enum.VerticalAlignment.Center,
  78 | 									HorizontalAlignment = Enum.HorizontalAlignment.Right,
  79 | 									SortOrder = Enum.SortOrder.LayoutOrder,
  80 | 								}),
  81 | 
  82 | 								-- TITLE
  83 | 								New(scope, "Frame")({
  84 | 									Name = "TitleContainer",
  85 | 									Size = UDim2.new(1, -30, 1, 0),
  86 | 									BackgroundTransparency = 1,
  87 | 									LayoutOrder = 1,
  88 | 									[Children] = {
  89 | 										New(scope, "UIListLayout")({ VerticalAlignment = Enum.VerticalAlignment.Center }),
  90 | 										scope:SmartText({
  91 | 											Variant = "Header",
  92 | 											Text = props.Title or "Window",
  93 | 											Size = 20,
  94 | 										}),
  95 | 									},
  96 | 								}),
  97 | 
  98 | 								-- CLOSE BUTTON
  99 | 								New(scope, "ImageButton")({
 100 | 									Name = "CloseButton",
 101 | 									LayoutOrder = 2,
 102 | 									Size = UDim2.fromOffset(24, 24),
 103 | 									BackgroundTransparency = 1,
 104 | 									Image = Assets.Icons.Close,
 105 | 									ImageColor3 = Theme.Colors.BaseContent.Main,
 106 | 									[API.OnEvent("Activated")] = props.OnClose,
 107 | 								}),
 108 | 							},
 109 | 						}),
 110 | 
 111 | 						-- [[ BODY ]]
 112 | 						New(scope, "Frame")({
 113 | 							Name = "Body",
 114 | 							Position = UDim2.fromOffset(0, 48),
 115 | 							Size = UDim2.new(1, 0, 1, -48),
 116 | 							BackgroundTransparency = 1,
 117 | 							[Children] = props[Children],
 118 | 						}),
 119 | 					},
 120 | 				}),
 121 | 			},
 122 | 		})
 123 | 	end
 124 | end
 125 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Foundation/Components/Window.luau</strong> (48 lines, 1.64 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Foundation.Components.Window`

```lua
   1 | --!strict
   2 | -- @Component: Window (Standard Offset)
   3 | local RS = game:GetService("ReplicatedStorage")
   4 | local Loader = require(RS.OVHL.Core.Loader)
   5 | local SmartLogger = Loader.Get("Logger")
   6 | 
   7 | local Logger = SmartLogger.New("UI_LAYOUT")
   8 | 
   9 | return function(API)
  10 |     return function(scope, props)
  11 |         local defaultSize = UDim2.fromOffset(500, 400) -- Sedikit diperlebar
  12 |         local targetSize = props.Size or defaultSize
  13 |         
  14 |         Logger:Debug("WindowInit", {
  15 |             Title = props.Title,
  16 |             Size = tostring(targetSize),
  17 |             Note = "Centered in Scaled Canvas"
  18 |         })
  19 |     
  20 |         return scope:Card {
  21 |             Name = "WindowFrame",
  22 |             
  23 |             -- [CRITICAL FIX] Pastikan Window juga Centered di dalam Canvas
  24 |             AnchorPoint = Vector2.new(0.5, 0.5),
  25 |             Position = UDim2.fromScale(0.5, 0.5),
  26 |             Size = targetSize,
  27 |             
  28 |             List = { FillDirection = Enum.FillDirection.Vertical, Padding = scope:UDim(0, 0) },
  29 |             Padding = { All = scope:UDim(0, 0) },
  30 |             
  31 |             [API.Children] = {
  32 |                 scope:TitleBar {
  33 |                     Content = { props.Title or "Window" },
  34 |                     OnClose = props.OnClose,
  35 |                     CloseButtonDisabled = (props.OnClose == nil)
  36 |                 },
  37 |                 scope:Frame {
  38 |                     Name = "Body",
  39 |                     Size = UDim2.new(1, 0, 1, -48),
  40 |                     BackgroundTransparency = 1,
  41 |                     Padding = { All = scope:UDim(0, 16) },
  42 |                     [API.Children] = props[API.Children]
  43 |                 }
  44 |             }
  45 |         }
  46 |     end
  47 | end
  48 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Views/Inventory/InventoryView.luau</strong> (58 lines, 2.18 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Views.Inventory.InventoryView`

```lua
   1 | --!strict
   2 | -- @View: InventoryView (Wired Correctly)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local UI = Loader.Get("API")
   5 | local Children = UI.Children
   6 | 
   7 | return function(scope, props)
   8 |     local Config = props.Config
   9 |     local State = props.State
  10 |     
  11 |     return scope:ScreenWrapper {
  12 |         Name = "InventoryScreen",
  13 |         Enabled = true,
  14 |         Order = 10,
  15 |         
  16 |         [Children] = {
  17 |             scope:SmartWindow {
  18 |                 Title = Config.UI.Title,
  19 |                 Size = UDim2.fromOffset(650, 500),
  20 |                 OnClose = props.OnClose,
  21 |                 Visible = State.Visible,
  22 |                 Transition = Config.UI.Transition or "PopUp",
  23 |                 
  24 |                 [Children] = {
  25 |                     scope:GridContainer {
  26 |                         CellSize = Config.Layout.Grid.CellSize, 
  27 |                         Gap = Config.Layout.Grid.Gap,
  28 |                         
  29 |                         [Children] = {
  30 |                             UI.ForValues(scope, State.Items, function(use, innerScope, item)
  31 |                                 return innerScope:ItemSlot {
  32 |                                     Item = item,
  33 |                                     Config = Config,
  34 |                                     
  35 |                                     -- [FIXED] Jalur komunikasi disambung kembali
  36 |                                     OnAction = props.OnAction
  37 |                                 }
  38 |                             end),
  39 |                             
  40 |                             UI.Computed(scope, function(use)
  41 |                                 if #use(State.Items) == 0 then
  42 |                                     return scope:SmartText {
  43 |                                         Variant = "Body",
  44 |                                         Text = Config.UI.EmptyState,
  45 |                                         Size = 16,
  46 |                                         Align = Enum.TextXAlignment.Center
  47 |                                     }
  48 |                                 end
  49 |                                 return nil
  50 |                             end)
  51 |                         }
  52 |                     }
  53 |                 }
  54 |             }
  55 |         }
  56 |     }
  57 | end
  58 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Views/Shop/ShopView.luau</strong> (44 lines, 1.55 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Views.Shop.ShopView`

```lua
   1 | --!strict
   2 | -- @View: ShopView
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local UI = Loader.Get("API")
   5 | local Children = UI.Children
   6 | 
   7 | return function(scope, props)
   8 |     local Config = props.Config
   9 |     local State = props.State
  10 |     
  11 |     return scope:ScreenWrapper {
  12 |         Name = "ShopScreen",
  13 |         Enabled = true,
  14 |         Order = 15,
  15 |         
  16 |         [Children] = {
  17 |             scope:SmartWindow {
  18 |                 Title = Config.UI.Title,
  19 |                 Size = UDim2.fromOffset(600, 450),
  20 |                 OnClose = props.OnClose,
  21 |                 Visible = State.Visible,
  22 |                 Transition = Config.UI.Transition or "PopUp",
  23 |                 
  24 |                 [Children] = {
  25 |                     scope:GridContainer {
  26 |                         CellSize = Config.Layout.Grid.CellSize,
  27 |                         Gap = Config.Layout.Grid.Gap,
  28 |                         [Children] = {
  29 |                             UI.ForValues(scope, State.Items, function(use, innerScope, item)
  30 |                                 local displayItem = table.clone(item)
  31 |                                 displayItem.Name = item.Name .. " ($" .. item.Price .. ")"
  32 |                                 displayItem.Count = "INF"
  33 |                                 return innerScope:ItemSlot {
  34 |                                     Item = displayItem, Config = Config, OnAction = props.OnAction
  35 |                                 }
  36 |                             end)
  37 |                         }
  38 |                     }
  39 |                 }
  40 |             }
  41 |         }
  42 |     }
  43 | end
  44 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Views/System/FrameworkPanelView.luau</strong> (83 lines, 4.27 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Views.System.FrameworkPanelView`

```lua
   1 | --!strict
   2 | -- @View: FrameworkPanelView (Cleaned - No More Inspector Popup)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local UI = Loader.Get("API")
   5 | local Children = UI.Children
   6 | 
   7 | local PermissionPage = Loader.UI("Views/System/Pages/PermissionPage")
   8 | local ConfirmationDialog = Loader.UI("Views/System/Components/ConfirmationDialog")
   9 | 
  10 | return function(scope, props)
  11 |     local State = props.State
  12 |     local Actions = props.Actions
  13 |     local Config = props.Config
  14 |     local UIConfig = Config.UI
  15 |     local MenuList = Config.Menus
  16 | 
  17 |     local MainContent = UI.Computed(scope, function(use)
  18 |         local tab = use(State.CurrentTab)
  19 |         if tab == "Permission" then return PermissionPage(scope, { State = State, Actions = Actions })
  20 |         elseif tab == "Dashboard" then return scope:SmartText { Text = "Welcome to " .. UIConfig.Title, Align = Enum.TextXAlignment.Center }
  21 |         else return scope:SmartText { Text = "Feature Coming Soon: " .. tab, Align = Enum.TextXAlignment.Center } end
  22 |     end)
  23 | 
  24 |     -- Confirmation tetap Popup (Layer paling atas) karena dia Global Alert
  25 |     local ConfirmationLayer = UI.Computed(scope, function(use)
  26 |         local confirmData = use(State.Confirmation)
  27 |         if confirmData then
  28 |             return ConfirmationDialog(scope, { Data = confirmData, OnClose = Actions.ResolveConfirmation })
  29 |         end
  30 |         return scope:New "Frame" { Visible = false }
  31 |     end)
  32 | 
  33 |     return scope:ScreenWrapper {
  34 |         Name = "FrameworkPanel",
  35 |         Enabled = true,
  36 |         Order = 100,
  37 |         
  38 |         [Children] = {
  39 |             scope:SmartWindow {
  40 |                 Title = UIConfig.Title,
  41 |                 Size = UDim2.fromOffset(UIConfig.Size.X, UIConfig.Size.Y),
  42 |                 OnClose = props.OnClose,
  43 |                 Visible = State.Visible,
  44 |                 Transition = UIConfig.Transition,
  45 |                 
  46 |                 [Children] = {
  47 |                     scope:New "Frame" {
  48 |                         Name = "MainLayout",
  49 |                         Size = UDim2.fromScale(1, 1),
  50 |                         BackgroundTransparency = 1,
  51 |                         [Children] = {
  52 |                             scope:New "UIListLayout" { FillDirection = Enum.FillDirection.Horizontal, Padding = UDim.new(0, 0), SortOrder = Enum.SortOrder.LayoutOrder },
  53 |                             
  54 |                             -- Sidebar
  55 |                             scope:New "Frame" {
  56 |                                 Name = "Sidebar", Size = UDim2.new(0, UIConfig.SidebarWidth, 1, 0), BackgroundColor3 = Color3.fromHex("09090b"), BorderSizePixel = 0, LayoutOrder = 1, ZIndex = 2,
  57 |                                 [Children] = {
  58 |                                     scope:New "UIPadding" { PaddingTop = UDim.new(0, 16), PaddingBottom = UDim.new(0, 16), PaddingLeft = UDim.new(0, 12), PaddingRight = UDim.new(0, 12) },
  59 |                                     scope:New "UIListLayout" { Padding = UDim.new(0, 8), SortOrder = Enum.SortOrder.LayoutOrder },
  60 |                                     UI.ForValues(scope, MenuList, function(use, innerScope, item)
  61 |                                         local isActive = use(State.CurrentTab) == item.Id
  62 |                                         return innerScope:AsyncButton { Text = item.Label, Size = UDim2.new(1, 0, 0, 40), Style = isActive and "Filled" or "Ghost", LayoutOrder = item.Order, OnClick = function() State.CurrentTab:set(item.Id) end }
  63 |                                     end)
  64 |                                 }
  65 |                             },
  66 |                             
  67 |                             -- Content
  68 |                             scope:New "Frame" {
  69 |                                 Name = "Content", Size = UDim2.new(1, -UIConfig.SidebarWidth, 1, 0), BackgroundTransparency = 1, LayoutOrder = 2, ClipsDescendants = true,
  70 |                                 [Children] = {
  71 |                                     scope:New "UIPadding" { PaddingTop = UDim.new(0, 24), PaddingBottom = UDim.new(0, 24), PaddingLeft = UDim.new(0, 24), PaddingRight = UDim.new(0, 24) },
  72 |                                     MainContent
  73 |                                 }
  74 |                             }
  75 |                         }
  76 |                     }
  77 |                 }
  78 |             },
  79 |             ConfirmationLayer -- Layer 2 (Alert Only)
  80 |         }
  81 |     }
  82 | end
  83 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Views/System/NotificationView.luau</strong> (187 lines, 5.25 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Views.System.NotificationView`

```lua
   1 | --!strict
   2 | -- @View: NotificationView v0.4.1 (Active Sink Fix)
   3 | -- @Role: Render Toast Stack using Enterprise Tokens
   4 | 
   5 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   6 | local UI = Loader.Get("API")
   7 | local SmartLogger = Loader.Get("Logger")
   8 | local Children = UI.Children
   9 | 
  10 | -- Telemetry
  11 | local UXLog = SmartLogger.New("UX")
  12 | 
  13 | -- Default Config
  14 | local DEFAULTS = {
  15 | 	Position = "BottomRight",
  16 | 	MaxStack = 5,
  17 | 	ToastWidth = 320,
  18 | 	Gap = 8,
  19 | }
  20 | 
  21 | -- [1] EXTRACT THEME TOKENS (WITH SAFETY NET)
  22 | local T = UI.Theme
  23 | local C = T.Colors
  24 | 	or {
  25 | 		Base = { Main = Color3.fromHex("18181b") },
  26 | 		Primary = { Main = Color3.fromHex("10b981") },
  27 | 		Error = { Main = Color3.fromHex("ef4444") },
  28 | 		Neutral = { Main = Color3.fromHex("27272a") },
  29 | 		BaseContent = { Main = Color3.fromHex("ffffff") },
  30 | 	}
  31 | local R = T.CornerRadius or { Small = 4, Base = 8 }
  32 | local S = T.Spacing or {}
  33 | local SPACING = {
  34 | 	Small = S.Small or 4,
  35 | 	Medium = S.Medium or 8,
  36 | 	Large = S.Large or 12,
  37 | }
  38 | 
  39 | return function(scope, props)
  40 | 	local State = props.State
  41 | 	local Config = props.Config or {}
  42 | 
  43 | 	local COLOR_MAP = {
  44 | 		Success = C.Primary.Main,
  45 | 		Error = C.Error.Main,
  46 | 		Warning = C.BaseContent.Main, -- Fallback
  47 | 		Info = C.Neutral.Main,
  48 | 	}
  49 | 
  50 | 	-- Icon Map (Bisa diganti Image ID)
  51 | 	local ICON_MAP = { Success = "‚úÖ", Error = "‚õî", Warning = "‚ö†Ô∏è", Info = "‚ÑπÔ∏è" }
  52 | 
  53 | 	local function ToastItem(innerScope, data)
  54 | 		local isVisible = innerScope:Value(false)
  55 | 		task.spawn(function()
  56 | 			isVisible:set(true)
  57 | 			UXLog:Debug("ToastShow", { Type = data.Type, Msg = data.Msg })
  58 | 		end)
  59 | 
  60 | 		local typeKey = data.Type or "Info"
  61 | 		local accent = COLOR_MAP[typeKey] or C.Neutral.Main
  62 | 		local anim = UI.MotionPresets.SlideRight(innerScope, isVisible)
  63 | 
  64 | 		return innerScope:New("Frame")({
  65 | 			Name = "Toast_" .. data.Id,
  66 | 
  67 | 			-- Layout
  68 | 			Size = UDim2.fromOffset(Config.ToastWidth or DEFAULTS.ToastWidth, 0),
  69 | 			AutomaticSize = Enum.AutomaticSize.Y,
  70 | 
  71 | 			-- Motion
  72 | 			AnchorPoint = anim.AnchorPoint,
  73 | 			Position = anim.Position,
  74 | 			BackgroundTransparency = 1,
  75 | 			Transparency = anim.Transparency,
  76 | 
  77 | 			-- [CRITICAL FIX] TOAST SOLIDITY
  78 | 			-- Agar klik di atas notifikasi tidak tembus ke tombol admin di belakangnya
  79 | 			Active = true,
  80 | 
  81 | 			[Children] = {
  82 | 				-- Card Container
  83 | 				innerScope:New("Frame")({
  84 | 					Name = "Card",
  85 | 					Size = UDim2.fromScale(1, 1),
  86 | 					BackgroundColor3 = C.Base.Main,
  87 | 					BackgroundTransparency = 0.05,
  88 | 
  89 | 					[Children] = {
  90 | 						innerScope:New("UICorner")({ CornerRadius = UDim.new(0, R.Base) }),
  91 | 						innerScope:New("UIStroke")({ Color = accent, Transparency = 0.6, Thickness = 1 }),
  92 | 						innerScope:New("UIPadding")({
  93 | 							PaddingTop = UDim.new(0, SPACING.Medium),
  94 | 							PaddingBottom = UDim.new(0, SPACING.Medium),
  95 | 							PaddingLeft = UDim.new(0, SPACING.Medium),
  96 | 							PaddingRight = UDim.new(0, SPACING.Medium),
  97 | 						}),
  98 | 
  99 | 						innerScope:New("UIListLayout")({
 100 | 							FillDirection = Enum.FillDirection.Horizontal,
 101 | 							SortOrder = Enum.SortOrder.LayoutOrder,
 102 | 							Padding = UDim.new(0, SPACING.Medium),
 103 | 							VerticalAlignment = Enum.VerticalAlignment.Center,
 104 | 						}),
 105 | 
 106 | 						-- Strip Indikator
 107 | 						innerScope:New("Frame")({
 108 | 							Name = "Strip",
 109 | 							Size = UDim2.new(0, 4, 1, 0),
 110 | 							BackgroundColor3 = accent,
 111 | 							[Children] = { innerScope:New("UICorner")({ CornerRadius = UDim.new(1, 0) }) },
 112 | 						}),
 113 | 
 114 | 						-- Text Content
 115 | 						innerScope:New("Frame")({
 116 | 							Size = UDim2.new(1, -12, 0, 0),
 117 | 							AutomaticSize = Enum.AutomaticSize.Y,
 118 | 							BackgroundTransparency = 1,
 119 | 							[Children] = {
 120 | 								innerScope:New("UIListLayout")({
 121 | 									SortOrder = Enum.SortOrder.LayoutOrder,
 122 | 									Padding = UDim.new(0, 2),
 123 | 								}),
 124 | 								innerScope:SmartText({
 125 | 									Text = string.upper(typeKey),
 126 | 									Variant = "Caption",
 127 | 									Color = "Neutral",
 128 | 								}),
 129 | 								innerScope:SmartText({
 130 | 									Text = data.Msg or "...",
 131 | 									Variant = "Body",
 132 | 									Color = "BaseContent",
 133 | 									TextWrapped = true,
 134 | 								}),
 135 | 							},
 136 | 						}),
 137 | 					},
 138 | 				}),
 139 | 			},
 140 | 		})
 141 | 	end
 142 | 
 143 | 	-- [ROOT WRAPPER]
 144 | 	-- Pastikan Layout.luau sudah dibuat agar UI.Layout berfungsi
 145 | 	-- Jika belum, gunakan fallback UDim2 manual.
 146 | 	local layoutPos = UDim2.new(1, -24, 1, -24)
 147 | 	local layoutAnchor = Vector2.new(1, 1)
 148 | 
 149 | 	if UI.Layout then
 150 | 		-- Gunakan Layout Helper jika tersedia
 151 | 		local l = UI.Layout.Place(Config.Position or DEFAULTS.Position, 24)
 152 | 		layoutPos = l.Position
 153 | 		layoutAnchor = l.AnchorPoint
 154 | 	end
 155 | 
 156 | 	return scope:ScreenWrapper({
 157 | 		Name = "NotificationLayer",
 158 | 		Enabled = true,
 159 | 		Order = 200,
 160 | 
 161 | 		[Children] = {
 162 | 			scope:New("Frame")({
 163 | 				Name = "Container",
 164 | 				Position = layoutPos,
 165 | 				AnchorPoint = layoutAnchor,
 166 | 
 167 | 				Size = UDim2.fromOffset(Config.ToastWidth or DEFAULTS.ToastWidth, 0),
 168 | 				AutomaticSize = Enum.AutomaticSize.Y,
 169 | 				BackgroundTransparency = 1,
 170 | 
 171 | 				[Children] = {
 172 | 					scope:New("UIListLayout")({
 173 | 						SortOrder = Enum.SortOrder.LayoutOrder,
 174 | 						VerticalAlignment = Enum.VerticalAlignment.Bottom,
 175 | 						HorizontalAlignment = Enum.HorizontalAlignment.Right,
 176 | 						Padding = UDim.new(0, Config.Gap or DEFAULTS.Gap),
 177 | 					}),
 178 | 
 179 | 					UI.ForValues(scope, State.Toasts, function(_, innerScope, item)
 180 | 						return ToastItem(innerScope, item)
 181 | 					end),
 182 | 				},
 183 | 			}),
 184 | 		},
 185 | 	})
 186 | end
 187 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Views/System/Components/ConfirmationDialog.luau</strong> (124 lines, 5.34 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Views.System.Components.ConfirmationDialog`

```lua
   1 | --!strict
   2 | -- @Component: Global Confirmation Dialog
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local UI = Loader.Get("API")
   5 | local Children = UI.Children
   6 | 
   7 | return function(scope, props)
   8 |     local Data = props.Data -- { Title, Message, OnConfirm, OnCancel }
   9 |     
  10 |     -- Animasi Timer Bar (5 Detik berkurang)
  11 |     local TimeLeft = scope:Value(1) -- 1 = Penuh, 0 = Habis
  12 |     local Tween = UI.Fusion.Tween(scope, TimeLeft, 
  13 |         TweenInfo.new(5, Enum.EasingStyle.Linear)
  14 |     )
  15 |     
  16 |     -- Start Timer pas mount
  17 |     TimeLeft:set(0) 
  18 | 
  19 |     return scope:New "Frame" {
  20 |         Name = "ConfirmationOverlay",
  21 |         Size = UDim2.fromScale(1, 1),
  22 |         BackgroundColor3 = Color3.new(0, 0, 0),
  23 |         BackgroundTransparency = 0.6, -- Dimmed Background
  24 |         ZIndex = 1000, -- Paling Atas
  25 |         
  26 |         [Children] = {
  27 |             -- Modal Window
  28 |             scope:New "Frame" {
  29 |                 AnchorPoint = Vector2.new(0.5, 0.5),
  30 |                 Position = UDim2.fromScale(0.5, 0.5),
  31 |                 Size = UDim2.fromOffset(400, 220),
  32 |                 BackgroundColor3 = UI.Theme.Colors.Base.Main,
  33 |                 
  34 |                 [Children] = {
  35 |                     scope:New "UICorner" { CornerRadius = UDim.new(0, 12) },
  36 |                     scope:New "UIStroke" { Color = UI.Theme.Colors.Error.Main, Thickness = 2 }, -- Merah biar kerasa penting
  37 |                     scope:New "UIPadding" { PaddingTop=UDim.new(0,20), PaddingBottom=UDim.new(0,20), PaddingLeft=UDim.new(0,24), PaddingRight=UDim.new(0,24) },
  38 |                     
  39 |                     scope:New "UIListLayout" {
  40 |                         SortOrder = Enum.SortOrder.LayoutOrder,
  41 |                         HorizontalAlignment = Enum.HorizontalAlignment.Center,
  42 |                         Padding = UDim.new(0, 12)
  43 |                     },
  44 |                     
  45 |                     -- Header
  46 |                     scope:SmartText { 
  47 |                         Text = Data.Title or "CONFIRMATION", 
  48 |                         Variant = "Header", 
  49 |                         Size = 20, 
  50 |                         Color = "Error",
  51 |                         LayoutOrder = 1
  52 |                     },
  53 |                     
  54 |                     -- Message Body
  55 |                     scope:SmartText { 
  56 |                         Text = Data.Message or "Are you sure?", 
  57 |                         Variant = "Body", 
  58 |                         Size = 16, 
  59 |                         Align = Enum.TextXAlignment.Center,
  60 |                         LayoutOrder = 2,
  61 |                         Color = "BaseContent"
  62 |                     },
  63 |                     
  64 |                     -- Spacer
  65 |                     scope:New "Frame" { Size = UDim2.new(1,0,0,20), BackgroundTransparency = 1, LayoutOrder = 3 },
  66 |                     
  67 |                     -- Action Buttons
  68 |                     scope:New "Frame" {
  69 |                         Size = UDim2.new(1, 0, 0, 40),
  70 |                         BackgroundTransparency = 1,
  71 |                         LayoutOrder = 4,
  72 |                         [Children] = {
  73 |                             scope:New "UIListLayout" { 
  74 |                                 FillDirection = Enum.FillDirection.Horizontal, 
  75 |                                 HorizontalAlignment = Enum.HorizontalAlignment.Center,
  76 |                                 Padding = UDim.new(0, 16)
  77 |                             },
  78 |                             
  79 |                             -- Cancel
  80 |                             scope:AsyncButton {
  81 |                                 Text = "CANCEL",
  82 |                                 Size = UDim2.fromOffset(120, 40),
  83 |                                 Style = "Ghost",
  84 |                                 OnClick = function()
  85 |                                     if props.OnClose then props.OnClose(false) end
  86 |                                 end
  87 |                             },
  88 |                             
  89 |                             -- Confirm
  90 |                             scope:AsyncButton {
  91 |                                 Text = "CONFIRM",
  92 |                                 Size = UDim2.fromOffset(120, 40),
  93 |                                 Style = "Filled",
  94 |                                 Color = UI.Theme.Colors.Error.Main, -- Merah
  95 |                                 OnClick = function()
  96 |                                     if props.OnClose then props.OnClose(true) end
  97 |                                 end
  98 |                             }
  99 |                         }
 100 |                     },
 101 |                     
 102 |                     -- Timer Bar (Visual)
 103 |                     scope:New "Frame" {
 104 |                         Name = "TimerContainer",
 105 |                         Size = UDim2.new(1, 0, 0, 4),
 106 |                         Position = UDim2.new(0, 0, 1, -2), -- Nempel bawah
 107 |                         AnchorPoint = Vector2.new(0, 1),
 108 |                         BackgroundTransparency = 1,
 109 |                         LayoutOrder = 5, -- Paling bawah urutan
 110 |                         [Children] = {
 111 |                             scope:New "Frame" {
 112 |                                 BackgroundColor3 = UI.Theme.Colors.Error.Main,
 113 |                                 Size = UI.Computed(scope, function(use)
 114 |                                     return UDim2.fromScale(use(Tween), 1)
 115 |                                 end)
 116 |                             }
 117 |                         }
 118 |                     }
 119 |                 }
 120 |             }
 121 |         }
 122 |     }
 123 | end
 124 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Views/System/Components/PlayerInspector.luau</strong> (140 lines, 7.61 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Views.System.Components.PlayerInspector`

```lua
   1 | --!strict
   2 | -- @Component: Player Inspector Deck (Fixed: Solid Interaction & Dark Theme)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local UI = Loader.Get("API")
   5 | local Children = UI.Children
   6 | local Fusion = UI.Fusion
   7 | 
   8 | return function(scope, props)
   9 |     local PlayerData = props.Player
  10 |     local Actions = props.Actions
  11 |     local OnClose = props.OnClose
  12 |     
  13 |     local RANKS = {
  14 |         { Id = 0, Label = "GUEST", Color = "BaseContent" },
  15 |         { Id = 1, Label = "VIP",   Color = "Primary" },
  16 |         { Id = 2, Label = "MOD",   Color = "Primary" },
  17 |         { Id = 3, Label = "ADMIN", Color = "Primary" },
  18 |         { Id = 4, Label = "HEAD",  Color = "Error" },
  19 |         { Id = 5, Label = "OWNER", Color = "Error" }
  20 |     }
  21 | 
  22 |     return scope:SmartWindow {
  23 |         Title = "INSPECT: " .. PlayerData.Name,
  24 |         Size = UDim2.fromOffset(700, 400),
  25 |         OnClose = OnClose,
  26 |         Transition = "PopUp",
  27 |         
  28 |         [Children] = {
  29 |             -- MAIN LAYOUT
  30 |             scope:New "Frame" {
  31 |                 Size = UDim2.fromScale(1, 1),
  32 |                 BackgroundTransparency = 1,
  33 |                 -- [FIX 1] Active = true MENCEGAH KLIK TEMBUS KE BELAKANG
  34 |                 Active = true, 
  35 |                 
  36 |                 [Children] = {
  37 |                     scope:New "UIListLayout" { FillDirection = Enum.FillDirection.Horizontal, Padding = UDim.new(0, 0) },
  38 |                     
  39 |                     -- [[ KIRI: IDENTITY (35%) ]]
  40 |                     scope:New "Frame" {
  41 |                         Name = "IdentityCol",
  42 |                         Size = UDim2.new(0.35, 0, 1, 0),
  43 |                         -- [FIX 2] Force Dark Color (Zinc950) biar gak Putih
  44 |                         BackgroundColor3 = Color3.fromHex("09090b"), 
  45 |                         BorderSizePixel = 0,
  46 |                         
  47 |                         [Children] = {
  48 |                             scope:New "UIPadding" { PaddingTop=UDim.new(0,24), PaddingBottom=UDim.new(0,24), PaddingLeft=UDim.new(0,16), PaddingRight=UDim.new(0,16) },
  49 |                             scope:New "UIListLayout" { HorizontalAlignment = Enum.HorizontalAlignment.Center, Padding = UDim.new(0, 16), SortOrder=Enum.SortOrder.LayoutOrder },
  50 |                             
  51 |                             -- Big Avatar
  52 |                             scope:New "ImageLabel" {
  53 |                                 LayoutOrder = 1,
  54 |                                 Size = UDim2.fromOffset(120, 120),
  55 |                                 BackgroundTransparency = 1,
  56 |                                 Image = "rbxthumb://type=AvatarHeadShot&id=" .. PlayerData.UserId .. "&w=420&h=420",
  57 |                                 [Children] = { 
  58 |                                     scope:New "UICorner" { CornerRadius = UDim.new(1, 0) },
  59 |                                     scope:New "UIStroke" { Color = UI.Theme.Colors.BaseContent.Main, Thickness = 2, Transparency = 0.8 }
  60 |                                 }
  61 |                             },
  62 |                             
  63 |                             -- Names
  64 |                             scope:New "Frame" {
  65 |                                 LayoutOrder = 2,
  66 |                                 Size = UDim2.new(1, 0, 0, 60),
  67 |                                 BackgroundTransparency = 1,
  68 |                                 [Children] = {
  69 |                                     scope:New "UIListLayout" { HorizontalAlignment = Enum.HorizontalAlignment.Center, Padding = UDim.new(0, 4) },
  70 |                                     scope:SmartText { Text = PlayerData.Name, Size = 20, Variant = "Header", Align = Enum.TextXAlignment.Center },
  71 |                                     scope:SmartText { Text = "ID: " .. PlayerData.UserId, Size = 14, Color = "Neutral", Align = Enum.TextXAlignment.Center }
  72 |                                 }
  73 |                             },
  74 |                             
  75 |                             -- Current Rank Display
  76 |                             scope:New "Frame" {
  77 |                                 LayoutOrder = 3,
  78 |                                 Size = UDim2.new(1, 0, 0, 80),
  79 |                                 BackgroundColor3 = UI.Theme.Colors.Base.Main, -- Agak terang dikit dari background col
  80 |                                 [Children] = {
  81 |                                     scope:New "UICorner" { CornerRadius = UDim.new(0, 8) },
  82 |                                     scope:New "UIListLayout" { VerticalAlignment = Enum.VerticalAlignment.Center, HorizontalAlignment = Enum.HorizontalAlignment.Center },
  83 |                                     scope:SmartText { Text = "CURRENT RANK", Size = 12, Color = "Neutral" },
  84 |                                     scope:SmartText { Text = string.upper(PlayerData.Role) .. " ["..PlayerData.Rank.."]", Size = 24, Variant = "Header", Color = "Primary" }
  85 |                                 }
  86 |                             }
  87 |                         }
  88 |                     },
  89 |                     
  90 |                     -- [[ KANAN: CONTROL MATRIX (65%) ]]
  91 |                     scope:New "Frame" {
  92 |                         Name = "ControlCol",
  93 |                         Size = UDim2.new(0.65, 0, 1, 0),
  94 |                         BackgroundTransparency = 1,
  95 |                         
  96 |                         [Children] = {
  97 |                             scope:New "UIPadding" { PaddingTop=UDim.new(0,24), PaddingBottom=UDim.new(0,24), PaddingLeft=UDim.new(0,24), PaddingRight=UDim.new(0,24) },
  98 |                             scope:New "UIListLayout" { Padding = UDim.new(0, 12), SortOrder = Enum.SortOrder.LayoutOrder },
  99 |                             
 100 |                             scope:SmartText { Text = "SET RANK AUTHORITY", Variant = "Header", Size = 16, LayoutOrder = 1 },
 101 |                             
 102 |                             -- GRID BUTTONS
 103 |                             scope:New "Frame" {
 104 |                                 LayoutOrder = 2,
 105 |                                 Size = UDim2.new(1, 0, 0, 160),
 106 |                                 BackgroundTransparency = 1,
 107 |                                 
 108 |                                 [Children] = {
 109 |                                     scope:New "UIGridLayout" {
 110 |                                         CellSize = UDim2.new(0.3, 0, 0, 60),
 111 |                                         CellPadding = UDim2.new(0.05, 0, 0.05, 0),
 112 |                                         FillDirectionMaxCells = 3
 113 |                                     },
 114 |                                     
 115 |                                     UI.ForValues(scope, RANKS, function(use, innerScope, rank)
 116 |                                         local isCurrent = rank.Id == PlayerData.Rank
 117 |                                         local style = isCurrent and "Filled" or "Outline"
 118 |                                         
 119 |                                         return innerScope:AsyncButton {
 120 |                                             Text = rank.Label .. "\n["..rank.Id.."]",
 121 |                                             Style = style,
 122 |                                             Color = isCurrent and UI.Theme.Colors.Primary.Main or nil,
 123 |                                             
 124 |                                             OnClick = function()
 125 |                                                 if not isCurrent then
 126 |                                                     Actions.RequestRankChange(PlayerData, rank.Id, rank.Label)
 127 |                                                 end
 128 |                                             end
 129 |                                         }
 130 |                                     end)
 131 |                                 }
 132 |                             }
 133 |                         }
 134 |                     }
 135 |                 }
 136 |             }
 137 |         }
 138 |     }
 139 | end
 140 | 
```
</details>


<details>
<summary><strong>üåô src/ReplicatedStorage/OVHL/UI/Views/System/Pages/PermissionPage.luau</strong> (145 lines, 12.49 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.OVHL.UI.Views.System.Pages.PermissionPage`

```lua
   1 | --!strict
   2 | -- @Page: PermissionPage (Grid Layout Typo Fixed)
   3 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   4 | local UI = Loader.Get("API")
   5 | local Children = UI.Children
   6 | local Fusion = UI.Fusion
   7 | 
   8 | local DUMMY_DATA = {
   9 |     { UserId = 1, Name = "Roblox", Rank = 5, Role = "God" },
  10 |     { UserId = 2, Name = "JohnDoe", Rank = 2, Role = "Mod" },
  11 | }
  12 | 
  13 | local RANKS = {
  14 |     { Id = 0, Label = "GUEST", Color = "BaseContent" },
  15 |     { Id = 1, Label = "VIP",   Color = "Primary" },
  16 |     { Id = 2, Label = "MOD",   Color = "Primary" },
  17 |     { Id = 3, Label = "ADMIN", Color = "Primary" },
  18 |     { Id = 4, Label = "HEAD",  Color = "Error" },
  19 |     { Id = 5, Label = "OWNER", Color = "Error" }
  20 | }
  21 | 
  22 | return function(scope, props)
  23 |     local State = props.State
  24 |     local Actions = props.Actions
  25 |     local SearchText = scope:Value("")
  26 |     local C = UI.Theme.Colors
  27 | 
  28 |     -- [[ PLAYER ROW ]]
  29 |     local function PlayerRow(innerScope, player)
  30 |         local badgeColor = Fusion.peek(C.BaseContent.Main)
  31 |         local badgeText = "GUEST"
  32 |         if player.Rank >= 5 then badgeColor = Fusion.peek(C.Error.Main); badgeText = "OWNER"
  33 |         elseif player.Rank >= 3 then badgeColor = Fusion.peek(C.Primary.Main); badgeText = "ADMIN"
  34 |         elseif player.Rank >= 1 then badgeColor = Color3.fromHex("3b82f6"); badgeText = string.upper(player.Role)
  35 |         else badgeText = string.upper(player.Role) end
  36 | 
  37 |         return innerScope:New "TextButton" {
  38 |             Name = "Card_" .. player.Name, Size = UDim2.new(1, 0, 0, 72), BackgroundColor3 = UI.Theme.Colors.Base.Main, AutoButtonColor = true, Text = "",
  39 |             [UI.OnEvent "Activated"] = function() Actions.OpenInspector(player) end,
  40 |             [Children] = {
  41 |                 innerScope:New "UICorner" { CornerRadius = UDim.new(0, 8) },
  42 |                 innerScope:New "UIStroke" { Color = UI.Theme.Colors.Neutral.Main, Transparency = 0.6, Thickness = 1.5 },
  43 |                 innerScope:New "UIPadding" { PaddingLeft = UDim.new(0, 12), PaddingRight = UDim.new(0, 12) },
  44 |                 innerScope:New "UIListLayout" { FillDirection = Enum.FillDirection.Horizontal, VerticalAlignment = Enum.VerticalAlignment.Center, Padding = UDim.new(0, 12), SortOrder = Enum.SortOrder.LayoutOrder },
  45 |                 
  46 |                 innerScope:New "ImageLabel" { LayoutOrder = 1, Size = UDim2.fromOffset(48, 48), BackgroundColor3 = UI.Theme.Colors.Base.Alt, Image = "rbxthumb://type=AvatarHeadShot&id=" .. player.UserId .. "&w=150&h=150", [Children] = { innerScope:New "UICorner" { CornerRadius = UDim.new(1, 0) } } },
  47 |                 
  48 |                 innerScope:New "Frame" { LayoutOrder = 2, Size = UDim2.new(0.4, 0, 1, 0), BackgroundTransparency = 1, [Children] = {
  49 |                     innerScope:New "UIListLayout" { SortOrder = Enum.SortOrder.LayoutOrder, VerticalAlignment = Enum.VerticalAlignment.Center },
  50 |                     innerScope:SmartText { Text = player.Name, Variant = "Body", Size = 16, LayoutOrder = 1, Color = "BaseContent" },
  51 |                     innerScope:New "TextLabel" { LayoutOrder = 2, AutomaticSize = Enum.AutomaticSize.XY, BackgroundTransparency = 1, Text = "ID: " .. player.UserId, TextColor3 = UI.Theme.Colors.BaseContent.Main, TextTransparency = 0.4, TextSize = 14, FontFace = UI.Theme.Font.Body, TextXAlignment = Enum.TextXAlignment.Left }
  52 |                 }},
  53 |                 
  54 |                 innerScope:New "Frame" { LayoutOrder = 3, Size = UDim2.new(0.4, 0, 1, 0), BackgroundTransparency = 1, [Children] = {
  55 |                     innerScope:New "UIListLayout" { HorizontalAlignment = Enum.HorizontalAlignment.Right, VerticalAlignment = Enum.VerticalAlignment.Center },
  56 |                     innerScope:New "Frame" { Size = UDim2.fromOffset(100, 28), BackgroundColor3 = badgeColor, BackgroundTransparency = 0.9, [Children] = {
  57 |                         innerScope:New "UICorner" { CornerRadius = UDim.new(1, 0) },
  58 |                         innerScope:New "UIStroke" { Color = badgeColor, Transparency = 0.2, Thickness = 1.5 },
  59 |                         innerScope:New "TextLabel" { Size = UDim2.fromScale(1, 1), BackgroundTransparency = 1, Text = badgeText, TextColor3 = badgeColor, FontFace = UI.Theme.Font.Body, TextSize = 12, TextXAlignment = Enum.TextXAlignment.Center, TextYAlignment = Enum.TextYAlignment.Center }
  60 |                     }}
  61 |                 }}
  62 |             }
  63 |         }
  64 |     end
  65 | 
  66 |     -- [[ MAIN RENDERER ]]
  67 |     return UI.Computed(scope, function(use)
  68 |         local selectedPlayer = use(State.SelectedPlayer)
  69 | 
  70 |         -- === INSPECTOR VIEW ===
  71 |         if selectedPlayer then
  72 |             return scope:New "Frame" {
  73 |                 Name = "InspectorView", Size = UDim2.fromScale(1, 1), BackgroundTransparency = 1,
  74 |                 [Children] = {
  75 |                     scope:New "UIListLayout" { Padding = UDim.new(0, 16), SortOrder = Enum.SortOrder.LayoutOrder, FillDirection = Enum.FillDirection.Vertical },
  76 |                     
  77 |                     -- Header
  78 |                     scope:New "Frame" { Name = "Header", Size = UDim2.new(1, 0, 0, 40), BackgroundTransparency = 1, [Children] = {
  79 |                         scope:New "UIListLayout" { FillDirection = Enum.FillDirection.Horizontal, VerticalAlignment = Enum.VerticalAlignment.Center, Padding = UDim.new(0, 12) },
  80 |                         scope:AsyncButton { Text = "< BACK", Size = UDim2.fromOffset(80, 36), Style = "Outline", OnClick = function() Actions.CloseInspector() end },
  81 |                         scope:SmartText { Text = "INSPECTING: " .. string.upper(selectedPlayer.Name), Variant = "Header", Size = 18 }
  82 |                     }},
  83 |                     
  84 |                     -- Body
  85 |                     scope:New "Frame" { Name = "Body", Size = UDim2.new(1, 0, 1, -56), BackgroundTransparency = 1, [Children] = {
  86 |                         scope:New "UIListLayout" { FillDirection = Enum.FillDirection.Horizontal, Padding = UDim.new(0, 16) },
  87 |                         -- Identity
  88 |                         scope:New "Frame" { Size = UDim2.new(0.35, 0, 1, 0), BackgroundColor3 = UI.Theme.Colors.Base.Main, [Children] = {
  89 |                             scope:New "UICorner" { CornerRadius = UDim.new(0, 8) }, scope:New "UIStroke" { Color = UI.Theme.Colors.Neutral.Main, Transparency = 0.7 }, scope:New "UIPadding" { PaddingTop=UDim.new(0,20), PaddingBottom=UDim.new(0,20) }, scope:New "UIListLayout" { HorizontalAlignment = Enum.HorizontalAlignment.Center, Padding = UDim.new(0, 12), SortOrder = Enum.SortOrder.LayoutOrder },
  90 |                             scope:New "ImageLabel" { LayoutOrder = 1, Size = UDim2.fromOffset(100, 100), BackgroundColor3 = UI.Theme.Colors.Base.Alt, Image = "rbxthumb://type=AvatarHeadShot&id=" .. selectedPlayer.UserId .. "&w=420&h=420", [Children] = { scope:New "UICorner" { CornerRadius = UDim.new(1, 0) } } },
  91 |                             scope:SmartText { LayoutOrder=2, Text = selectedPlayer.Name, Size = 18, Variant = "Header", Align = Enum.TextXAlignment.Center },
  92 |                             scope:SmartText { LayoutOrder=3, Text = "Rank: " .. selectedPlayer.Rank, Size = 14, Color = "Neutral", Align = Enum.TextXAlignment.Center }
  93 |                         }},
  94 |                         -- Controls
  95 |                         scope:New "Frame" { Size = UDim2.new(0.65, -16, 1, 0), BackgroundColor3 = UI.Theme.Colors.Base.Main, [Children] = {
  96 |                             scope:New "UICorner" { CornerRadius = UDim.new(0, 8) }, scope:New "UIStroke" { Color = UI.Theme.Colors.Neutral.Main, Transparency = 0.7 }, scope:New "UIPadding" { PaddingTop=UDim.new(0,20), PaddingLeft=UDim.new(0,20), PaddingRight=UDim.new(0,20) }, scope:New "UIListLayout" { Padding = UDim.new(0, 12), SortOrder = Enum.SortOrder.LayoutOrder },
  97 |                             scope:SmartText { Text = "CHANGE RANK", Variant = "Header", Size = 16 },
  98 |                             scope:New "Frame" { Size = UDim2.new(1, 0, 0, 200), BackgroundTransparency = 1, [Children] = {
  99 |                                 -- [FIX] Typo Fixed: UDim2 for CellPadding
 100 |                                 scope:New "UIGridLayout" { CellSize = UDim2.new(0.31, 0, 0, 50), CellPadding = UDim2.new(0.03, 0, 0.03, 0), FillDirectionMaxCells = 3 },
 101 |                                 UI.ForValues(scope, RANKS, function(use, innerScope, rank)
 102 |                                     local isCurrent = rank.Id == selectedPlayer.Rank
 103 |                                     local style = isCurrent and "Filled" or "Outline"
 104 |                                     return innerScope:AsyncButton { Text = rank.Label .. "\n["..rank.Id.."]", Style = style, Color = isCurrent and UI.Theme.Colors.Primary.Main or nil, OnClick = function() if not isCurrent then Actions.RequestRankChange(selectedPlayer, rank.Id, rank.Label) end end }
 105 |                                 end)
 106 |                             }}
 107 |                         }}
 108 |                     }}
 109 |                 }
 110 |             }
 111 |         end
 112 | 
 113 |         -- === LIST VIEW ===
 114 |         local FilteredList = {}
 115 |         local query = use(SearchText):lower()
 116 |         local realData = use(State.PlayerList)
 117 |         local function match(p) if query == "" then return true end if string.find(p.Name:lower(), query, 1, true) then return true end if string.find(tostring(p.UserId), query, 1, true) then return true end return false end
 118 |         for _, p in ipairs(realData) do if match(p) then table.insert(FilteredList, p) end end
 119 |         for _, p in ipairs(DUMMY_DATA) do if match(p) then table.insert(FilteredList, p) end end
 120 | 
 121 |         return scope:New "Frame" {
 122 |             Name = "ListView", Size = UDim2.fromScale(1, 1), BackgroundTransparency = 1,
 123 |             [Children] = {
 124 |                 scope:New "UIListLayout" { Padding = UDim.new(0, 16), SortOrder = Enum.SortOrder.LayoutOrder, FillDirection = Enum.FillDirection.Vertical },
 125 |                 scope:New "Frame" { Name = "HeaderSplit", LayoutOrder = 1, Size = UDim2.new(1, 0, 0, 84), BackgroundTransparency = 1, [Children] = {
 126 |                     scope:New "Frame" { Name = "TopRow", Size = UDim2.new(1, 0, 0, 40), BackgroundTransparency = 1, [Children] = {
 127 |                         scope:New "UIListLayout" { FillDirection = Enum.FillDirection.Horizontal },
 128 |                         scope:New "Frame" { LayoutOrder = 1, Size = UDim2.new(0.7, 0, 1, 0), BackgroundTransparency = 1, [Children] = { scope:New "UIPadding" { PaddingTop = UDim.new(0, 8) }, scope:SmartText { Text = "USER MANAGEMENT", Variant = "Header", Size = 18 } }},
 129 |                         scope:New "Frame" { LayoutOrder = 2, Size = UDim2.new(0.3, 0, 1, 0), BackgroundTransparency = 1, [Children] = { scope:New "UIListLayout" { HorizontalAlignment = Enum.HorizontalAlignment.Right, VerticalAlignment = Enum.VerticalAlignment.Center }, scope:AsyncButton { Text = "REFRESH", Size = UDim2.fromOffset(90, 32), Style = "Outline", OnClick = function() Actions.RefreshPlayers() end } }}
 130 |                     }},
 131 |                     scope:New "Frame" { Name = "SearchRow", Size = UDim2.new(1, 0, 0, 40), Position = UDim2.fromOffset(0, 44), BackgroundColor3 = UI.Theme.Colors.Base.Main, [Children] = {
 132 |                         scope:New "UICorner" { CornerRadius = UDim.new(0, 8) }, scope:New "UIStroke" { Color = UI.Theme.Colors.Neutral.Main, Transparency = 0.6 }, scope:New "UIPadding" { PaddingLeft = UDim.new(0, 12), PaddingRight = UDim.new(0, 12) }, scope:New "UIListLayout" { FillDirection=Enum.FillDirection.Horizontal, VerticalAlignment=Enum.VerticalAlignment.Center, Padding=UDim.new(0,10) },
 133 |                         scope:New "ImageLabel" { Size = UDim2.fromOffset(18, 18), BackgroundTransparency = 1, Image = "rbxassetid://11293977827", ImageColor3 = UI.Theme.Colors.BaseContent.Muted },
 134 |                         scope:New "TextBox" { Size = UDim2.new(1, -30, 1, 0), BackgroundTransparency = 1, Text = SearchText, PlaceholderText = "Search by username...", PlaceholderColor3 = Color3.fromRGB(100,100,100), TextColor3 = UI.Theme.Colors.BaseContent.Main, TextSize = 16, FontFace = UI.Theme.Font.Body, TextXAlignment = Enum.TextXAlignment.Left, ClearTextOnFocus = false, [UI.OnChange "Text"] = function(newText) SearchText:set(newText) end }
 135 |                     }}
 136 |                 }},
 137 |                 scope:New "ScrollingFrame" { LayoutOrder = 2, Name = "ListContainer", Size = UDim2.new(1, 0, 1, -100), BackgroundTransparency = 1, CanvasSize = UDim2.new(0, 0, 0, 0), AutomaticCanvasSize = Enum.AutomaticSize.Y, ScrollBarThickness = 4, [Children] = {
 138 |                     scope:New "UIListLayout" { Padding = UDim.new(0, 8), SortOrder = Enum.SortOrder.LayoutOrder },
 139 |                     UI.ForValues(scope, FilteredList, function(use, innerScope, player) return PlayerRow(innerScope, player) end)
 140 |                 }}
 141 |             }
 142 |         }
 143 |     end)
 144 | end
 145 | 
```
</details>

### üì¶ Group: Server


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/ServerRuntime.server.luau</strong> (4 lines, 92 Bytes)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.ServerRuntime.server`

```lua
   1 | --!strict
   2 | -- Server Runtime
   3 | require(game.ReplicatedStorage.OVHL.Bootstrap).StartServer()
   4 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/TestRunner.server.luau</strong> (64 lines, 1.8 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.TestRunner.server`

```lua
   1 | --!strict
   2 | -- @System: TestRunner (Server Side)
   3 | local ReplicatedStorage = game:GetService("ReplicatedStorage")
   4 | local ServerScriptService = game:GetService("ServerScriptService")
   5 | local RunService = game:GetService("RunService")
   6 | 
   7 | -- Cuma jalan di Studio biar gak ganggu Production game
   8 | if not RunService:IsStudio() then
   9 | 	return
  10 | end
  11 | 
  12 | task.defer(function()
  13 | 	-- Tunggu sebentar biar loading game/plugin selesai dulu
  14 | 	task.wait(2)
  15 | 
  16 | 	print("\nüß™ [SERVER] STARTING TEST RUNNER...")
  17 | 
  18 | 	-- 1. Load TesEZ (Pake Loader framework lu biar konsisten)
  19 | 	local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
  20 | 	local TesEZ
  21 | 
  22 | 	pcall(function()
  23 | 		TesEZ = Loader.Get("TestEZ") -- Atau require(ReplicatedStorage.Packages.TestEZ)
  24 | 	end)
  25 | 
  26 | 	if not TesEZ then
  27 | 		warn("‚ö†Ô∏è [SERVER] TesEZ not found! Please run 'wally install'.")
  28 | 		return
  29 | 	end
  30 | 
  31 | 	-- 2. Tentukan Folder Target (Sesuai Mapping Rojo yang baru)
  32 | 	-- Kita pake WaitForChild biar aman kalau loadingnya telat dikit
  33 | 	local testRoots = {
  34 | 		ReplicatedStorage:WaitForChild("Tests", 10), -- Shared Tests
  35 | 		ServerScriptService:WaitForChild("Tests", 10), -- Server Tests
  36 | 	}
  37 | 
  38 | 	-- Filter kalau foldernya ternyata kosong/gak ke-sync
  39 | 	local validRoots = {}
  40 | 	for _, folder in ipairs(testRoots) do
  41 | 		if folder then
  42 | 			table.insert(validRoots, folder)
  43 | 		else
  44 | 			warn("‚ö†Ô∏è [SERVER] Missing Test Folder (Check Rojo Mapping)")
  45 | 		end
  46 | 	end
  47 | 
  48 | 	if #validRoots == 0 then
  49 | 		warn("‚ö†Ô∏è [SERVER] No tests found to run.")
  50 | 		return
  51 | 	end
  52 | 
  53 | 	-- 3. JALANIN TES!
  54 | 	print("üìÇ [SERVER] Scanning folders: " .. #validRoots)
  55 | 	local results = TesEZ.TestBootstrap:run(validRoots)
  56 | 
  57 | 	-- 4. Laporan
  58 | 	if results.failureCount > 0 then
  59 | 		warn("‚ùå [SERVER] FAILED: " .. results.failureCount .. " tests broken.")
  60 | 	else
  61 | 		print("‚úÖ [SERVER] SUCCESS: All systems normal.")
  62 | 	end
  63 | end)
  64 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Config/PermissionConfig.luau</strong> (9 lines, 173 Bytes)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Config.PermissionConfig`

```lua
   1 | --!strict
   2 | return {
   3 |     Provider = "HDAdmin", -- Options: "HDAdmin", "Internal"
   4 |     Settings = { 
   5 |         OwnerIsSuperAdmin = true,
   6 |         LogChanges = true
   7 |     }
   8 | }
   9 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Core/DataMigrator.luau</strong> (54 lines, 1.7 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Core.DataMigrator`

```lua
   1 | --!strict
   2 | -- @Module: DataMigrator
   3 | -- @Role: Menangani perubahan struktur data antar versi
   4 | local DataMigrator = {}
   5 | 
   6 | -- [CONFIG] Versi Data Saat Ini
   7 | DataMigrator.LATEST_VERSION = 1
   8 | 
   9 | -- [LOGIC] Daftar Migrasi (Fungsi untuk naik kelas)
  10 | local MIGRATIONS = {
  11 |     -- Contoh Migrasi ke V2 nanti:
  12 |     -- [2] = function(data)
  13 |     --     data.Pets = {} 
  14 |     --     return data
  15 |     -- end
  16 | }
  17 | 
  18 | function DataMigrator.Migrate(profile, logger)
  19 |     local data = profile.Data
  20 |     local currentVer = data._SchemaVersion or 0
  21 |     
  22 |     -- Jika data baru (kosong), langsung cap versi terbaru
  23 |     if currentVer == 0 and not next(data) then
  24 |         data._SchemaVersion = DataMigrator.LATEST_VERSION
  25 |         return
  26 |     end
  27 | 
  28 |     -- Loop migrasi dari versi lama ke terbaru
  29 |     if currentVer < DataMigrator.LATEST_VERSION then
  30 |         logger:Warn("Migrator", string.format("Migrating Data v%d -> v%d", currentVer, DataMigrator.LATEST_VERSION))
  31 |         
  32 |         for v = currentVer + 1, DataMigrator.LATEST_VERSION do
  33 |             local migrationFunc = MIGRATIONS[v]
  34 |             if migrationFunc then
  35 |                 -- Jalankan fungsi migrasi
  36 |                 local success, err = pcall(function()
  37 |                     data = migrationFunc(data)
  38 |                 end)
  39 |                 
  40 |                 if not success then
  41 |                     logger:Error("MigrationFail", { Version = v, Error = err })
  42 |                     break -- Stop migrasi jika gagal, biarkan load apa adanya (safety)
  43 |                 end
  44 |             end
  45 |         end
  46 |         
  47 |         -- Update versi di data
  48 |         data._SchemaVersion = DataMigrator.LATEST_VERSION
  49 |         logger:Info("Migrator", "Migration Complete.")
  50 |     end
  51 | end
  52 | 
  53 | return DataMigrator
  54 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Core/NetworkBridge.luau</strong> (228 lines, 6.55 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Core.NetworkBridge`

```lua
   1 | --!strict
   2 | -- @Component: NetworkBridge (Server v0.2.1)
   3 | -- @Role: Central Packet Router & Security Gatekeeper
   4 | -- @Mandate: Mandat 1 (Single Remote) & Mandat 3 (Pipeline Reordering)
   5 | 
   6 | local ReplicatedStorage = game:GetService("ReplicatedStorage")
   7 | local ServerScriptService = game:GetService("ServerScriptService")
   8 | 
   9 | local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
  10 | local Enums = Loader.Get("Enums")
  11 | local TypeValidator = Loader.Get("TypeValidator")
  12 | 
  13 | -- [DEPENDENCY NOTE]
  14 | -- NetworkGuard akan kita optimasi total di Fase 3.
  15 | -- Tapi di Fase 2 ini, kita sudah menempatkan pemanggilannya di urutan yang benar (setelah validasi).
  16 | local Guard = require(ServerScriptService.OVHL.Core.NetworkGuard)
  17 | 
  18 | local Bridge = {}
  19 | Bridge.__index = Bridge
  20 | 
  21 | -- [CONSTANTS]
  22 | local GATEWAY_NAME = "OVHL_Gateway"
  23 | local STREAM_NAME = "OVHL_Stream"
  24 | 
  25 | function Bridge.New(ctx)
  26 | 	-- Create Dedicated Security Logger
  27 | 	local secLog = ctx:CreateLogger("SECURITY")
  28 | 	local netLog = ctx:CreateLogger("NETWORK")
  29 | 
  30 | 	local self = setmetatable({
  31 | 		_logger = netLog,
  32 | 		_secLog = secLog,
  33 | 		_limit = ctx.RateLimiter,
  34 | 
  35 | 		_root = nil :: Instance?,
  36 | 		_gateway = nil :: RemoteFunction?,
  37 | 		_stream = nil :: RemoteEvent?,
  38 | 
  39 | 		-- Routing Tables (Pengganti Multiple Remotes)
  40 | 		_routes = {}, -- [Service][Method] = { Rules, Handler }
  41 | 		_services = {}, -- [Service] = ServiceInstance
  42 | 	}, Bridge)
  43 | 
  44 | 	self:_initRemotes()
  45 | 	self._secLog:Info("System", "üõ°Ô∏è Single Gateway Architecture Online")
  46 | 
  47 | 	return self
  48 | end
  49 | 
  50 | function Bridge:_initRemotes()
  51 | 	-- [FIX] Instance.new Parent Argument Deprecated Fix
  52 | 	local root = ReplicatedStorage:FindFirstChild("OVHL_Remotes")
  53 | 	if not root then
  54 | 		root = Instance.new("Folder")
  55 | 		root.Name = "OVHL_Remotes"
  56 | 		root.Parent = ReplicatedStorage -- Set Parent Last
  57 | 	end
  58 | 	self._root = root
  59 | 
  60 | 	-- 1. Gateway (Request-Response)
  61 | 	local gw = root:FindFirstChild(GATEWAY_NAME)
  62 | 	if not gw then
  63 | 		gw = Instance.new("RemoteFunction")
  64 | 		gw.Name = GATEWAY_NAME
  65 | 		gw.Parent = root -- Set Parent Last
  66 | 	end
  67 | 	self._gateway = gw :: RemoteFunction
  68 | 
  69 | 	-- Handle Incoming Traffic
  70 | 	self._gateway.OnServerInvoke = function(player, packet)
  71 | 		return self:_handlePacket(player, packet)
  72 | 	end
  73 | 
  74 | 	-- 2. Stream (Fire-Forget Events)
  75 | 	local st = root:FindFirstChild(STREAM_NAME)
  76 | 	if not st then
  77 | 		st = Instance.new("RemoteEvent")
  78 | 		st.Name = STREAM_NAME
  79 | 		st.Parent = root -- Set Parent Last
  80 | 	end
  81 | 	self._stream = st :: RemoteEvent
  82 | end
  83 | 
  84 | -- [[ CORE: PACKET ROUTER ]]
  85 | function Bridge:_handlePacket(player: Player, packet: any)
  86 | 	-- 1. Basic Integrity Check
  87 | 	if type(packet) ~= "table" then
  88 | 		return { C = Enums.Status.BAD_REQUEST, E = "Invalid Packet Format" }
  89 | 	end
  90 | 
  91 | 	-- Protocol: T=Type, S=Service, M=Method, A=Args
  92 | 	if packet.T ~= Enums.Packet.REQUEST then
  93 | 		return nil
  94 | 	end
  95 | 
  96 | 	local srvName = packet.S
  97 | 	local mtdName = packet.M
  98 | 	local rawArgs = packet.A or {}
  99 | 
 100 | 	-- 2. Route Lookup
 101 | 	local serviceRoute = self._routes[srvName]
 102 | 	if not serviceRoute then
 103 | 		return { C = Enums.Status.NOT_FOUND, E = "Service Not Found" }
 104 | 	end
 105 | 
 106 | 	local methodRoute = serviceRoute[mtdName]
 107 | 	if not methodRoute then
 108 | 		return { C = Enums.Status.NOT_FOUND, E = "Method Not Found" }
 109 | 	end
 110 | 
 111 | 	local rules = methodRoute.Rules
 112 | 
 113 | 	-- 3. PIPELINE STEP A: RATE LIMIT (Murah)
 114 | 	-- Cek kuota dulu sebelum proses data berat
 115 | 	local limitKey = srvName .. ":" .. mtdName
 116 | 	if rules.RateLimit and self._limit then
 117 | 		if not self._limit:Check(player, limitKey, rules.RateLimit.Max, rules.RateLimit.Interval) then
 118 | 			self._secLog:Warn("RateLimit", { Plr = player.Name, Action = limitKey })
 119 | 			return { C = Enums.Status.RATE_LIMITED, E = "Too Many Requests" }
 120 | 		end
 121 | 	end
 122 | 
 123 | 	-- 4. PIPELINE STEP B: TYPE VALIDATION (Cepat)
 124 | 	-- Pastikan struktur data benar DULU sebelum disanitasi
 125 | 	if rules.Args then
 126 | 		local ok, err = TypeValidator.Validate(rawArgs, rules.Args)
 127 | 		if not ok then
 128 | 			self._secLog:Debug("InvalidArgs", { Plr = player.Name, Act = limitKey, Err = err })
 129 | 			return { C = Enums.Status.BAD_REQUEST, E = "Invalid Arguments" }
 130 | 		end
 131 | 	end
 132 | 
 133 | 	-- 5. PIPELINE STEP C: SANITIZATION (Berat - CPU Intensive)
 134 | 	-- Hanya jalankan jika lolos validasi tipe
 135 | 	local cleanArgs = {}
 136 | 	for i, v in ipairs(rawArgs) do
 137 | 		-- Guard.CleanIn akan kita optimasi di Fase 3
 138 | 		cleanArgs[i] = Guard.CleanIn(v, 0, player)
 139 | 	end
 140 | 
 141 | 	-- 6. EXECUTION (Business Logic)
 142 | 	-- Panggil fungsi asli di Service
 143 | 	local serviceInstance = self._services[srvName]
 144 | 	if serviceInstance and serviceInstance[mtdName] then
 145 | 		local success, result = pcall(serviceInstance[mtdName], serviceInstance, player, table.unpack(cleanArgs))
 146 | 
 147 | 		if not success then
 148 | 			self._logger:Error("ExecError", { Srv = srvName, Mtd = mtdName, Err = result })
 149 | 			return { C = Enums.Status.INTERNAL_ERROR, E = "Internal Server Error" }
 150 | 		end
 151 | 
 152 | 		-- 7. OUTBOUND SANITIZATION
 153 | 		local sanitized = Guard.SanitizeOutbound(result)
 154 | 
 155 | 		-- Support Legacy Format Return { Success=true, Data=... } or Direct Data
 156 | 		if type(sanitized) == "table" and sanitized.Success ~= nil then
 157 | 			-- Jika Service return format lama
 158 | 			if sanitized.Success then
 159 | 				return { C = Enums.Status.OK, D = sanitized.Data }
 160 | 			else
 161 | 				return { C = Enums.Status.BAD_REQUEST, E = sanitized.Error }
 162 | 			end
 163 | 		end
 164 | 
 165 | 		return { C = Enums.Status.OK, D = sanitized }
 166 | 	end
 167 | 
 168 | 	return { C = Enums.Status.INTERNAL_ERROR, E = "Service Not Bound Logic" }
 169 | end
 170 | 
 171 | -- [[ PUBLIC API ]]
 172 | 
 173 | function Bridge:Register(serviceName, netConfig)
 174 | 	if not self._routes[serviceName] then
 175 | 		self._routes[serviceName] = {}
 176 | 	end
 177 | 
 178 | 	-- Daftarkan Method (Requests)
 179 | 	local reqs = netConfig and netConfig.Requests or {}
 180 | 	for methodName, rules in pairs(reqs) do
 181 | 		self._routes[serviceName][methodName] = {
 182 | 			Rules = rules,
 183 | 		}
 184 | 	end
 185 | 
 186 | 	-- Events tidak perlu didaftarkan di route karena one-way,
 187 | 	-- tapi kita simpan meta-nya jika butuh validasi nanti.
 188 | 
 189 | 	-- Return Handles (Compatibility)
 190 | 	return {
 191 | 		Fire = function(plr, evt, ...)
 192 | 			self:Fire(plr, serviceName, evt, ...)
 193 | 		end,
 194 | 		FireAll = function(evt, ...)
 195 | 			self:FireAll(serviceName, evt, ...)
 196 | 		end,
 197 | 	}
 198 | end
 199 | 
 200 | function Bridge:Bind(name, srv)
 201 | 	self._services[name] = srv
 202 | end
 203 | 
 204 | -- Server Push (To Client)
 205 | function Bridge:Fire(player: Player, serviceName: string, eventName: string, ...: any)
 206 | 	if self._stream then
 207 | 		self._stream:FireClient(player, {
 208 | 			T = Enums.Packet.EVENT,
 209 | 			S = serviceName,
 210 | 			E = eventName,
 211 | 			D = { ... }, -- Pack args
 212 | 		})
 213 | 	end
 214 | end
 215 | 
 216 | function Bridge:FireAll(serviceName: string, eventName: string, ...: any)
 217 | 	if self._stream then
 218 | 		self._stream:FireAllClients({
 219 | 			T = Enums.Packet.EVENT,
 220 | 			S = serviceName,
 221 | 			E = eventName,
 222 | 			D = { ... },
 223 | 		})
 224 | 	end
 225 | end
 226 | 
 227 | return Bridge
 228 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Core/NetworkGuard.luau</strong> (129 lines, 3.2 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Core.NetworkGuard`

```lua
   1 | --!strict
   2 | -- @Core: NetworkGuard v0.2.0 (Hardened)
   3 | -- @Role: Deep Inspection & Data Sanitization
   4 | -- @Mandate: Mandat 3 (Security Optimization)
   5 | 
   6 | local ReplicatedStorage = game:GetService("ReplicatedStorage")
   7 | local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
   8 | local SmartLogger = Loader.Get("Logger")
   9 | 
  10 | local NetworkGuard = {}
  11 | local Logger = SmartLogger.New("SECURITY")
  12 | 
  13 | -- [SECURITY CONSTANTS]
  14 | local MAX_DEPTH = 8 -- Mencegah Stack Overflow (Table dalam Table dalam Table...)
  15 | local MAX_STRING_LEN = 4096 -- Mencegah Memory Exhaustion (String super panjang)
  16 | local SENSITIVE_KEYS = {
  17 | 	"token",
  18 | 	"api_key",
  19 | 	"secret",
  20 | 	"password",
  21 | 	"auth",
  22 | 	"private",
  23 | 	"ip_address",
  24 | }
  25 | 
  26 | -- [[ INBOUND: CLIENT -> SERVER ]]
  27 | -- Membersihkan data kotor dari Client sebelum disentuh logic game
  28 | function NetworkGuard.CleanIn(val: any, depth: number?, player: Player?)
  29 | 	local d = depth or 0
  30 | 	if d > MAX_DEPTH then
  31 | 		-- Jangan log tiap iterasi, cukup return nil (Silent Block)
  32 | 		return nil
  33 | 	end
  34 | 
  35 | 	local t = typeof(val)
  36 | 
  37 | 	-- 1. Block Instances (CRITICAL)
  38 | 	-- Mencegah Client mengirim referensi Part/GUI/Script ke Server logic
  39 | 	if t == "Instance" then
  40 | 		if d == 0 then -- Hanya log jika ini root level attempt biar gak spam
  41 | 			Logger:Warn("ExploitAttempt", {
  42 | 				Msg = "Instance injection blocked",
  43 | 				Plr = player and player.Name or "Unknown",
  44 | 			})
  45 | 		end
  46 | 		return nil
  47 | 	end
  48 | 
  49 | 	-- 2. Sanitize Strings (Buffer Overflow Protection)
  50 | 	if t == "string" then
  51 | 		if #val > MAX_STRING_LEN then
  52 | 			return string.sub(val, 1, MAX_STRING_LEN) -- Potong paksa
  53 | 		end
  54 | 		return val
  55 | 	end
  56 | 
  57 | 	-- 3. Sanitize Numbers (NaN / Inf Protection)
  58 | 	if t == "number" then
  59 | 		-- Cek apakah angka valid (bukan NaN dan bukan Infinity)
  60 | 		if val ~= val or val == math.huge or val == -math.huge then
  61 | 			return 0 -- Default ke 0 yang aman
  62 | 		end
  63 | 		return val
  64 | 	end
  65 | 
  66 | 	-- 4. Recursively Clean Tables
  67 | 	if t == "table" then
  68 | 		local clean = {}
  69 | 		for k, v in pairs(val) do
  70 | 			-- Key juga harus aman (String/Number only)
  71 | 			local keyType = typeof(k)
  72 | 			if keyType == "string" or keyType == "number" then
  73 | 				-- Rekursi
  74 | 				local cleanVal = NetworkGuard.CleanIn(v, d + 1, player)
  75 | 				if cleanVal ~= nil then
  76 | 					-- [Sanitasi Key] Potong key string yang kepanjangan
  77 | 					if keyType == "string" and #k > 64 then
  78 | 						k = string.sub(k, 1, 64)
  79 | 					end
  80 | 					clean[k] = cleanVal
  81 | 				end
  82 | 			end
  83 | 		end
  84 | 		return clean
  85 | 	end
  86 | 
  87 | 	-- Allow Booleans, nil
  88 | 	return val
  89 | end
  90 | 
  91 | -- [[ OUTBOUND: SERVER -> CLIENT ]]
  92 | -- Menyensor data sensitif sebelum dikirim balik ke Client
  93 | function NetworkGuard.SanitizeOutbound(val: any, depth: number?)
  94 | 	local d = depth or 0
  95 | 	if d > MAX_DEPTH then
  96 | 		return nil
  97 | 	end
  98 | 
  99 | 	local t = typeof(val)
 100 | 
 101 | 	if t == "table" then
 102 | 		local clean = {}
 103 | 		for k, v in pairs(val) do
 104 | 			local isSafe = true
 105 | 
 106 | 			-- Redact Sensitive Keys (Privacy Shield)
 107 | 			if type(k) == "string" then
 108 | 				local lowerKey = k:lower()
 109 | 				for _, badWord in ipairs(SENSITIVE_KEYS) do
 110 | 					if lowerKey:find(badWord) then
 111 | 						clean[k] = "[REDACTED]"
 112 | 						isSafe = false
 113 | 						break
 114 | 					end
 115 | 				end
 116 | 			end
 117 | 
 118 | 			if isSafe then
 119 | 				clean[k] = NetworkGuard.SanitizeOutbound(v, d + 1)
 120 | 			end
 121 | 		end
 122 | 		return clean
 123 | 	end
 124 | 
 125 | 	return val
 126 | end
 127 | 
 128 | return NetworkGuard
 129 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Core/RateLimiter.luau</strong> (64 lines, 1.75 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Core.RateLimiter`

```lua
   1 | --!strict
   2 | -- @Core: RateLimiter v1.0
   3 | -- @Algo: Token Bucket (Allows Burst, Throttles Sustained)
   4 | local RateLimiter = {}
   5 | RateLimiter.__index = RateLimiter
   6 | 
   7 | -- Cache Structure:
   8 | -- _buckets[PlayerId][ActionKey] = { Tokens = number, LastUpdate = os.time() }
   9 | 
  10 | function RateLimiter.New()
  11 |     local self = setmetatable({
  12 |         _buckets = {}
  13 |     }, RateLimiter)
  14 |     return self
  15 | end
  16 | 
  17 | function RateLimiter:Check(player, actionKey, maxTokens, interval)
  18 |     -- 1. Validasi Input
  19 |     if not player or not actionKey then return false end
  20 |     maxTokens = maxTokens or 10
  21 |     interval = interval or 1
  22 |     
  23 |     local userId = player.UserId
  24 |     local now = os.clock() -- Gunakan clock untuk presisi sub-detik
  25 |     
  26 |     -- 2. Init Player Cache
  27 |     if not self._buckets[userId] then
  28 |         self._buckets[userId] = {}
  29 |     end
  30 |     
  31 |     -- 3. Init Action Bucket
  32 |     local bucket = self._buckets[userId][actionKey]
  33 |     if not bucket then
  34 |         bucket = {
  35 |             Tokens = maxTokens,
  36 |             LastUpdate = now
  37 |         }
  38 |         self._buckets[userId][actionKey] = bucket
  39 |     end
  40 |     
  41 |     -- 4. Refill Logic (Token regeneration)
  42 |     local delta = now - bucket.LastUpdate
  43 |     local refillRate = maxTokens / interval -- Token per detik
  44 |     local tokensToAdd = delta * refillRate
  45 |     
  46 |     bucket.Tokens = math.min(maxTokens, bucket.Tokens + tokensToAdd)
  47 |     bucket.LastUpdate = now
  48 |     
  49 |     -- 5. Consumption Logic
  50 |     if bucket.Tokens >= 1 then
  51 |         bucket.Tokens = bucket.Tokens - 1
  52 |         return true -- Allowed
  53 |     else
  54 |         return false -- Rate Limited
  55 |     end
  56 | end
  57 | 
  58 | -- Optional: Cleanup mechanism for disconnected players could go here
  59 | function RateLimiter:Cleanup(player)
  60 |     self._buckets[player.UserId] = nil
  61 | end
  62 | 
  63 | return RateLimiter
  64 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Core/ServerKernel.luau</strong> (151 lines, 4.23 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Core.ServerKernel`

```lua
   1 | --!strict
   2 | -- @Kernel: Server v0.2.0 (Lifecycle Managed)
   3 | -- @Role: Service Bootstrapper & Lifecycle Manager
   4 | -- @Mandate: Mandat 4 (Memory Management & Shutdown)
   5 | 
   6 | local ServerScriptService = game:GetService("ServerScriptService")
   7 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   8 | 
   9 | -- Core Dependencies
  10 | local Context = Loader.Get("Context")
  11 | local SmartLogger = Loader.Get("Logger")
  12 | local Manifest = Loader.Get("Manifest")
  13 | -- [NOTE] Bridge masih menggunakan versi v0.1.0 (belum direfactor di Fase 2), path tetap aman.
  14 | local Bridge = Loader.Server("Core/NetworkBridge")
  15 | 
  16 | -- Adapters (Database/Admin)
  17 | local Adapters = {
  18 | 	DB = require(ServerScriptService.OVHL.Core.Permissions.Adapters.InternalDB),
  19 | 	HD = require(ServerScriptService.OVHL.Core.Permissions.Adapters.HDAdmin),
  20 | }
  21 | 
  22 | local ServerKernel = {}
  23 | ServerKernel._services = {} -- [NEW] Stateful storage for cleanup access
  24 | ServerKernel._isShuttingDown = false
  25 | 
  26 | function ServerKernel.Boot()
  27 | 	local Log = SmartLogger.New("SYSTEM")
  28 | 
  29 | 	-- 1. Header Log
  30 | 	Log:Info(
  31 | 		string.format(
  32 | 			"üöÄ %s v%s (%s) SERVER STARTING...",
  33 | 			Manifest.Identity.Name,
  34 | 			Manifest.Version.Full,
  35 | 			Manifest.Metadata.BuildType
  36 | 		)
  37 | 	)
  38 | 
  39 | 	-- 2. Service Discovery (Collecting)
  40 | 	local services = {}
  41 | 
  42 | 	local function register(module: Instance, featureName: string?)
  43 | 		if module:IsA("ModuleScript") then
  44 | 			local success, result = pcall(require, module)
  45 | 			if success then
  46 | 				local finalName = module.Name
  47 | 				-- Normalisasi nama Service (misal: "Inventory" -> "InventoryService")
  48 | 				if featureName and (module.Name == "Service" or module.Name == "Service.luau") then
  49 | 					finalName = featureName .. "Service"
  50 | 				end
  51 | 
  52 | 				services[finalName] = result
  53 | 				Log:Debug(string.format("   + Service Registered: %-20s (Source: %s)", finalName, module.Name))
  54 | 			else
  55 | 				Log:Error("RegisterFail", { Module = module.Name, Error = result })
  56 | 			end
  57 | 		end
  58 | 	end
  59 | 
  60 | 	Log:Info("üîç Scanning Services...")
  61 | 
  62 | 	-- A. Core Services
  63 | 	local coreFolder = ServerScriptService.OVHL.Services
  64 | 	for _, mod in ipairs(coreFolder:GetChildren()) do
  65 | 		register(mod)
  66 | 	end
  67 | 
  68 | 	-- B. Feature Modules Services
  69 | 	local modulesFolder = ServerScriptService.OVHL.Modules
  70 | 	for _, feature in ipairs(modulesFolder:GetChildren()) do
  71 | 		if feature:IsA("Folder") then
  72 | 			for _, file in ipairs(feature:GetChildren()) do
  73 | 				if file.Name:match("Service$") or file.Name == "Service" then
  74 | 					register(file, feature.Name)
  75 | 				end
  76 | 			end
  77 | 		end
  78 | 	end
  79 | 
  80 | 	-- 3. Dependency Injection
  81 | 	services.Adapters = Adapters
  82 | 	local ctx = Context.New(services)
  83 | 
  84 | 	-- Inject Network Bridge (Critical)
  85 | 	ctx.Network = Bridge.New(ctx)
  86 | 
  87 | 	-- Simpan referensi ke Module Level untuk Shutdown nanti
  88 | 	ServerKernel._services = services
  89 | 	ServerKernel._logger = Log
  90 | 
  91 | 	-- 4. Lifecycle: Init
  92 | 	Log:Info("Phase 1: Init")
  93 | 	for name, srv in pairs(services) do
  94 | 		if type(srv.Init) == "function" then
  95 | 			local s, err = pcall(srv.Init, srv, ctx)
  96 | 			if not s then
  97 | 				Log:Error("InitCrash", { Service = name, Error = err })
  98 | 			end
  99 | 		end
 100 | 	end
 101 | 
 102 | 	-- 5. Lifecycle: Start
 103 | 	Log:Info("Phase 2: Start")
 104 | 	for name, srv in pairs(services) do
 105 | 		if type(srv.Start) == "function" then
 106 | 			task.spawn(function()
 107 | 				local s, err = pcall(srv.Start, srv)
 108 | 				if not s then
 109 | 					Log:Error("StartCrash", { Service = name, Error = err })
 110 | 				end
 111 | 			end)
 112 | 		end
 113 | 	end
 114 | 
 115 | 	Log:Info("‚úÖ SERVER BOOT COMPLETE")
 116 | 
 117 | 	-- 6. Bind Shutdown (The Anti-Leak Guard)
 118 | 	game:BindToClose(function()
 119 | 		ServerKernel.Shutdown()
 120 | 	end)
 121 | end
 122 | 
 123 | function ServerKernel.Shutdown()
 124 | 	if ServerKernel._isShuttingDown then
 125 | 		return
 126 | 	end
 127 | 	ServerKernel._isShuttingDown = true
 128 | 
 129 | 	local Log = ServerKernel._logger or SmartLogger.New("SYSTEM")
 130 | 	Log:Warn("üõë SERVER SHUTDOWN INITIATED...")
 131 | 
 132 | 	-- Loop semua service untuk cleanup
 133 | 	for name, srv in pairs(ServerKernel._services) do
 134 | 		-- Prioritas 1: Method Shutdown eksplisit
 135 | 		if type(srv.Shutdown) == "function" then
 136 | 			local s, err = pcall(srv.Shutdown, srv)
 137 | 			if not s then
 138 | 				warn("[Shutdown] Error in " .. name .. ": " .. tostring(err))
 139 | 			end
 140 | 
 141 | 		-- Prioritas 2: Trove Cleanup (Framework Standard)
 142 | 		elseif srv.Trove and type(srv.Trove.Destroy) == "function" then
 143 | 			srv.Trove:Destroy()
 144 | 		end
 145 | 	end
 146 | 
 147 | 	Log:Info("üëã Server Goodbye.")
 148 | end
 149 | 
 150 | return ServerKernel
 151 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Core/SessionMutex.luau</strong> (46 lines, 1.12 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Core.SessionMutex`

```lua
   1 | --!strict
   2 | -- @Core: SessionMutex v0.2.0
   3 | -- @Role: Transaction Locker (Prevent Race Conditions)
   4 | -- @Mandate: Mandat 5 (Data Integrity)
   5 | 
   6 | local SessionMutex = {}
   7 | local _locks = {} :: { [number]: boolean } -- [UserId] = isLocked
   8 | 
   9 | -- [[ API ]]
  10 | 
  11 | -- Menjalankan fungsi kritis dengan penguncian
  12 | -- Jika User sedang dikunci (busy), action ini akan langsung gagal (Fast Fail)
  13 | -- return: (Success: boolean, Result: any)
  14 | function SessionMutex.Run(userId: number, callback: () -> any)
  15 | 	if _locks[userId] then
  16 | 		return false, "Transaction Busy: Please wait."
  17 | 	end
  18 | 
  19 | 	-- 1. LOCK
  20 | 	_locks[userId] = true
  21 | 
  22 | 	-- 2. EXECUTE (Safely)
  23 | 	local success, result = pcall(callback)
  24 | 
  25 | 	-- 3. UNLOCK (Always runs)
  26 | 	_locks[userId] = nil
  27 | 
  28 | 	if not success then
  29 | 		return false, result -- Result is error message here
  30 | 	end
  31 | 
  32 | 	return true, result
  33 | end
  34 | 
  35 | -- Cek status lock (untuk debugging/UI hint)
  36 | function SessionMutex.IsLocked(userId: number)
  37 | 	return _locks[userId] == true
  38 | end
  39 | 
  40 | -- Force Unlock (Hanya dipanggil saat Player Leaving/Cleanup)
  41 | function SessionMutex.ForceUnlock(userId: number)
  42 | 	_locks[userId] = nil
  43 | end
  44 | 
  45 | return SessionMutex
  46 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Services/DataManagerService.luau</strong> (124 lines, 2.89 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Services.DataManagerService`

```lua
   1 | --!strict
   2 | -- @Service: DataManager v2.4 (FINAL AUDIT FIX)
   3 | local Players = game:GetService("Players")
   4 | local RS = game:GetService("ReplicatedStorage")
   5 | local SS = game:GetService("ServerScriptService")
   6 | 
   7 | local Loader = require(RS.OVHL.Core.Loader)
   8 | local ProfileService = Loader.Get("ProfileService")
   9 | local Env = Loader.Get("Env")
  10 | local DataMigrator = require(SS.OVHL.Core.DataMigrator)
  11 | 
  12 | local DataManager = {}
  13 | local ProfileStore = nil
  14 | local Profiles = {}
  15 | 
  16 | local DATA_TEMPLATE = {
  17 | 	_SchemaVersion = 1,
  18 | 	Coins = 0,
  19 | 	Level = 1,
  20 | 	Inventory = {},
  21 | 	Meta = { FirstJoin = 0, LastLogin = 0 },
  22 | }
  23 | 
  24 | function DataManager:Init(ctx)
  25 | 	self.Logger = ctx:CreateLogger("DATA")
  26 | 	local storeName = Env.IsStudio() and "OVHL_Dev_01" or "OVHL_Prod_01"
  27 | 
  28 | 	-- Setup Store
  29 | 	if Env.MockDataStore() then
  30 | 		ProfileStore = ProfileService.GetProfileStore({ Name = storeName, Scope = "Mock" }, DATA_TEMPLATE)
  31 | 		ProfileStore = ProfileStore.Mock
  32 | 	else
  33 | 		ProfileStore = ProfileService.GetProfileStore(storeName, DATA_TEMPLATE)
  34 | 	end
  35 | 
  36 | 	-- Bind Cleanup
  37 | 	game:BindToClose(function()
  38 | 		self:Shutdown()
  39 | 	end)
  40 | end
  41 | 
  42 | function DataManager:Start()
  43 | 	-- Listeners
  44 | 	Players.PlayerAdded:Connect(function(p)
  45 | 		task.spawn(function()
  46 | 			self:OnJoin(p)
  47 | 		end)
  48 | 	end)
  49 | 	Players.PlayerRemoving:Connect(function(p)
  50 | 		self:OnQuit(p)
  51 | 	end)
  52 | 
  53 | 	-- Handle existing
  54 | 	for _, player in ipairs(Players:GetPlayers()) do
  55 | 		task.spawn(function()
  56 | 			self:OnJoin(player)
  57 | 		end)
  58 | 	end
  59 | end
  60 | 
  61 | function DataManager:Shutdown()
  62 | 	-- CLEANUP WITHOUT WAIT (ProfileService handles sync internally on Close)
  63 | 	for player, profile in pairs(Profiles) do
  64 | 		if profile then
  65 | 			profile:Release()
  66 | 		end
  67 | 	end
  68 | end
  69 | 
  70 | function DataManager:OnJoin(player)
  71 | 	if Profiles[player] then
  72 | 		return
  73 | 	end
  74 | 
  75 | 	-- NO MANUAL RETRY/WAIT HERE - Rely on ProfileService auto-retry logic
  76 | 	local profile = ProfileStore:LoadProfileAsync("Player_" .. player.UserId)
  77 | 
  78 | 	if profile then
  79 | 		profile:AddUserId(player.UserId)
  80 | 		profile:Reconcile()
  81 | 		DataMigrator.Migrate(profile, self.Logger)
  82 | 
  83 | 		profile:ListenToRelease(function()
  84 | 			Profiles[player] = nil
  85 | 			pcall(function()
  86 | 				player:Kick("Session End")
  87 | 			end)
  88 | 		end)
  89 | 
  90 | 		if player:IsDescendantOf(Players) then
  91 | 			Profiles[player] = profile
  92 | 			-- Init timestamps
  93 | 			local d = profile.Data
  94 | 			if d.Meta.FirstJoin == 0 then
  95 | 				d.Meta.FirstJoin = os.time()
  96 | 			end
  97 | 			d.Meta.LastLogin = os.time()
  98 | 			self.Logger:Info("LoadOK", { User = player.Name })
  99 | 		else
 100 | 			profile:Release()
 101 | 		end
 102 | 	else
 103 | 		self.Logger:Error("LoadFail", "DataStore Critical Failure: " .. player.Name)
 104 | 		pcall(function()
 105 | 			player:Kick("Data Load Failed. Please Rejoin.")
 106 | 		end)
 107 | 	end
 108 | end
 109 | 
 110 | function DataManager:OnQuit(player)
 111 | 	local profile = Profiles[player]
 112 | 	if profile then
 113 | 		profile:Release()
 114 | 	end
 115 | 	Profiles[player] = nil
 116 | end
 117 | 
 118 | function DataManager:Get(player)
 119 | 	local profile = Profiles[player]
 120 | 	return profile and profile.Data
 121 | end
 122 | 
 123 | return DataManager
 124 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Services/MonetizationService.luau</strong> (48 lines, 1.38 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Services.MonetizationService`

```lua
   1 | --!strict
   2 | -- @Service: MonetizationService
   3 | local MarketplaceService = game:GetService("MarketplaceService")
   4 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
   5 | 
   6 | local MonetizationService = {}
   7 | local Handlers = {}
   8 | 
   9 | function MonetizationService:Init(ctx)
  10 |     self.Logger = ctx:CreateLogger("SHOP")
  11 | 	self.Network = ctx.Network
  12 | 	self.Network:Bind("Monetization", self)
  13 | end
  14 | 
  15 | function MonetizationService:Start()
  16 |     MarketplaceService.ProcessReceipt = function(info)
  17 |         return self:Process(info)
  18 |     end
  19 | end
  20 | 
  21 | function MonetizationService:Shutdown() 
  22 |     -- No critical cleanup needed for receipts, handled by Roblox retry
  23 | end
  24 | 
  25 | function MonetizationService:RegisterProduct(id, func)
  26 |     Handlers[id] = func
  27 | end
  28 | 
  29 | function MonetizationService:Process(info)
  30 |     local handler = Handlers[info.ProductId]
  31 |     local player = game.Players:GetPlayerByUserId(info.PlayerId)
  32 |     
  33 |     if not player then return Enum.ProductPurchaseDecision.NotProcessedYet end
  34 |     
  35 |     if handler then
  36 |         local s, r = pcall(handler, player, info)
  37 |         if s then
  38 |             self.Logger:Info("Purchase OK", {Product=info.ProductId})
  39 |             return Enum.ProductPurchaseDecision.PurchaseGranted
  40 |         else
  41 |             self.Logger:Error("Purchase Error", {Error=r})
  42 |         end
  43 |     end
  44 |     return Enum.ProductPurchaseDecision.NotProcessedYet
  45 | end
  46 | 
  47 | return MonetizationService
  48 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Services/PermissionService.luau</strong> (133 lines, 4.67 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Services.PermissionService`

```lua
   1 | --!strict
   2 | -- @Service: PermissionService (REFACTORED: V3 COMPLIANT)
   3 | local Players = game:GetService("Players")
   4 | local SSS = game:GetService("ServerScriptService")
   5 | local Cfg = require(SSS.OVHL.Config.PermissionConfig)
   6 | 
   7 | local Hub = {}
   8 | 
   9 | function Hub:Init(ctx)
  10 |     -- [1] Init bersih: Hanya setup dependencies & register routes
  11 |     self.Logger = ctx:CreateLogger("PERMISSION")
  12 |     self.DB = ctx.Adapters.DB
  13 |     self.HD = ctx.Adapters.HD
  14 |     self.Network = ctx.Network
  15 |     self._cache = {} 
  16 |     self.RANKS = { GUEST = 0, VIP = 1, MOD = 2, ADMIN = 3, HEAD = 4, OWNER = 5 }
  17 | 
  18 |     self.Network:Register("Permission", {
  19 |         Requests = {
  20 |             SetRank = {
  21 |                 RateLimit = { Max = 10, Interval = 60 },
  22 |                 Args = { { name = "targetUserId", type = "number" }, { name = "rankId", type = "number" } }
  23 |             },
  24 |             GetPlayers = { 
  25 |                 RateLimit = { Max = 5, Interval = 1 }, 
  26 |                 Args = {} 
  27 |             },
  28 |         },
  29 |         Events = { "RankChanged" },
  30 |     })
  31 | 
  32 |     self.Network:Bind("Permission", self)
  33 |     self.Logger:Info("System", "üõ°Ô∏è Permission System Initialized")
  34 | end
  35 | 
  36 | function Hub:Start()
  37 |     -- [2] Pindahkan Logic Berat ke Start (Async)
  38 |     Players.PlayerAdded:Connect(function(p) self:OnJoin(p) end)
  39 |     
  40 |     -- Scan players existing
  41 |     for _, p in ipairs(Players:GetPlayers()) do self:OnJoin(p) end
  42 | 
  43 |     -- Handle HD Admin Integration Async
  44 |     if Cfg.Provider == "HDAdmin" then
  45 |         task.spawn(function()
  46 |             -- Retry logic moved to dedicated routine outside Init blocker
  47 |             local ready = self.HD.WaitForAPI(10) -- Max 10s wait but inside spawn
  48 |             if ready then
  49 |                 self.Logger:Info("Link", "HD Admin Integration Ready")
  50 |                 -- Re-resolve all players
  51 |                 for _, p in ipairs(Players:GetPlayers()) do self:Resolve(p) end
  52 |             else
  53 |                 self.Logger:Warn("Link", "HD Admin not found within timeout. Defaulting to InternalDB.")
  54 |             end
  55 |         end)
  56 |     end
  57 | end
  58 | 
  59 | function Hub:OnJoin(p)
  60 |     if not p.Parent then return end
  61 |     self:Resolve(p)
  62 | end
  63 | 
  64 | function Hub:Resolve(p)
  65 |     local rawDB = self.DB.Get(p.UserId) or 0
  66 |     local rawHD = 0
  67 | 
  68 |     -- HD Admin Check (Safe Call)
  69 |     if Cfg.Provider == "HDAdmin" and self.HD then
  70 |         local success, rank = pcall(function() return self.HD.GetRank(p) end)
  71 |         if success and type(rank) == "number" then rawHD = rank end
  72 |     end
  73 | 
  74 |     local isOwner = (p.UserId == game.CreatorId and Cfg.Settings.OwnerIsSuperAdmin)
  75 |     local r, s = 0, "GUEST"
  76 | 
  77 |     if rawDB > r then r = rawDB; s = "INTERNAL_DB" end
  78 |     if rawHD > r then r = rawHD; s = "HD_ADMIN" end
  79 |     if isOwner then r = 5; s = "OWNER" end
  80 | 
  81 |     local oldRank = p:GetAttribute("OVHL_Rank")
  82 |     if oldRank ~= r then
  83 |         p:SetAttribute("OVHL_Rank", r)
  84 |         p:SetAttribute("OVHL_Role", s)
  85 |         self.Network:FireAll("Permission", "RankChanged", p.UserId, r)
  86 |         
  87 |         -- Logging Identity (Structured)
  88 |         self.Logger:Debug("IdentityResolve", { User=p.Name, Rank=r, Source=s })
  89 |     end
  90 | end
  91 | 
  92 | function Hub:SetRank(adminPlayer, targetUserId, newRank)
  93 |     -- Security Check
  94 |     local myRank = adminPlayer:GetAttribute("OVHL_Rank") or 0
  95 |     if myRank < self.RANKS.HEAD then
  96 |         self.Logger:Warn("Security", { Attempt="SetRank", Actor=adminPlayer.Name })
  97 |         -- [3] Error Masking: Jangan bocorkan logic internal
  98 |         return { Success = false, Error = "E-403: Access Denied" }
  99 |     end
 100 | 
 101 |     if newRank < 0 or newRank > self.RANKS.OWNER then
 102 |         return { Success = false, Error = "E-400: Invalid Argument" }
 103 |     end
 104 | 
 105 |     local success = self.DB.Set(targetUserId, newRank)
 106 |     if success then
 107 |         self.Logger:Info("AdminAction", { Action="SetRank", Actor=adminPlayer.Name, Target=targetUserId, Val=newRank })
 108 |         
 109 |         -- Refresh target if online
 110 |         local target = Players:GetPlayerByUserId(targetUserId)
 111 |         if target then self:Resolve(target) end
 112 |         
 113 |         return { Success = true, Data = "Rank Updated" }
 114 |     else
 115 |         -- [3] Error Masking
 116 |         self.Logger:Error("DBWrite", "Failed to set rank for "..targetUserId)
 117 |         return { Success = false, Error = "E-500: System Error" }
 118 |     end
 119 | end
 120 | 
 121 | function Hub:GetPlayers(player)
 122 |     local myRank = player:GetAttribute("OVHL_Rank") or 0
 123 |     if myRank < self.RANKS.ADMIN then return { Success = false, Data = {} } end
 124 | 
 125 |     local list = {}
 126 |     for _, p in ipairs(Players:GetPlayers()) do
 127 |         table.insert(list, { UserId = p.UserId, Name = p.Name, Rank = p:GetAttribute("OVHL_Rank") or 0, Role = p:GetAttribute("OVHL_Role") })
 128 |     end
 129 |     return { Success = true, Data = list }
 130 | end
 131 | 
 132 | return Hub
 133 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Modules/Inventory/InventoryService.luau</strong> (133 lines, 3.54 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Modules.Inventory.InventoryService`

```lua
   1 | --!strict
   2 | -- @Service: InventoryService v0.2.0 (Secured)
   3 | -- @Role: Inventory Logic with Mutex & DataStore
   4 | -- @Mandate: Mandat 5 (Data Integrity)
   5 | 
   6 | local ReplicatedStorage = game:GetService("ReplicatedStorage")
   7 | local ServerScriptService = game:GetService("ServerScriptService")
   8 | 
   9 | local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
  10 | local SessionMutex = require(ServerScriptService.OVHL.Core.SessionMutex)
  11 | 
  12 | -- Load Config
  13 | local Cfg = require(Loader.Module("Inventory").SharedConfig)
  14 | 
  15 | local Hub = {}
  16 | 
  17 | function Hub:Init(ctx)
  18 | 	self.Logger = ctx:CreateLogger("INVENTORY")
  19 | 	self.Network = ctx.Network
  20 | 
  21 | 	-- Dependency ke DataManager (Pastikan DataManagerService sudah di-load Kernel)
  22 | 	-- Kita akses via Context Services
  23 | 	self.DataManager = ctx.Services.DataManagerService
  24 | 
  25 | 	if not self.DataManager then
  26 | 		self.Logger:Error("Dependency", "DataManagerService Not Found!")
  27 | 	end
  28 | 
  29 | 	-- Register Routes
  30 | 	self.Network:Register("Inventory", Cfg.Network)
  31 | 	self.Network:Bind("Inventory", self)
  32 | 
  33 | 	self.Logger:Info("System", "Inventory Logic Online (Secured)")
  34 | end
  35 | 
  36 | function Hub:Start()
  37 | 	-- Event Listeners if needed
  38 | end
  39 | 
  40 | -- [[ HELPER ]]
  41 | function Hub:_getInv(player)
  42 | 	if not self.DataManager then
  43 | 		return nil
  44 | 	end
  45 | 	local data = self.DataManager:Get(player)
  46 | 	if not data then
  47 | 		return nil
  48 | 	end
  49 | 
  50 | 	-- Pastikan tabel Inventory ada
  51 | 	if not data.Inventory then
  52 | 		data.Inventory = {}
  53 | 	end
  54 | 	return data.Inventory
  55 | end
  56 | 
  57 | -- [[ API METHODS ]]
  58 | 
  59 | function Hub:GetItems(player)
  60 | 	local inv = self:_getInv(player)
  61 | 	if not inv then
  62 | 		return { Success = false, Error = "Data not ready" }
  63 | 	end
  64 | 
  65 | 	-- [DEBUG ONLY] Jika inventory kosong, kasih starter pack (untuk tes v0.2.0)
  66 | 	if #inv == 0 then
  67 | 		table.insert(
  68 | 			inv,
  69 | 			{ Id = 1, Name = "Starter Sword", Rarity = "Common", Equipped = false, Icon = "rbxassetid://13006407439" }
  70 | 		)
  71 | 		table.insert(
  72 | 			inv,
  73 | 			{ Id = 2, Name = "Apple", Rarity = "Common", Equipped = false, Icon = "rbxassetid://12905487363" }
  74 | 		)
  75 | 		self.Logger:Warn("Debug", "Gave Starter Items to " .. player.Name)
  76 | 	end
  77 | 
  78 | 	return { Success = true, Data = inv }
  79 | end
  80 | 
  81 | function Hub:PerformAction(player, itemId, action)
  82 | 	-- 1. MUTEX LOCK (Anti-Spam / Race Condition Guard)
  83 | 	local lockSuccess, lockResult = SessionMutex.Run(player.UserId, function()
  84 | 		-- A. Validasi Data
  85 | 		local inv = self:_getInv(player)
  86 | 		if not inv then
  87 | 			error("Inventory data unavailable")
  88 | 		end
  89 | 
  90 | 		local targetItem
  91 | 		for _, v in ipairs(inv) do
  92 | 			if v.Id == itemId then
  93 | 				targetItem = v
  94 | 				break
  95 | 			end
  96 | 		end
  97 | 
  98 | 		if not targetItem then
  99 | 			error("Item not found in inventory")
 100 | 		end
 101 | 
 102 | 		-- B. Logika Bisnis
 103 | 		if action == "Equip" then
 104 | 			targetItem.Equipped = not targetItem.Equipped
 105 | 			self.Logger:Info("Action", { User = player.Name, Type = action, Item = targetItem.Name })
 106 | 			return { Msg = targetItem.Equipped and "Equipped" or "Unequipped" }
 107 | 		elseif action == "Drop" then
 108 | 			-- Hapus item dari table (harus cari index lagi untuk safety)
 109 | 			for i, v in ipairs(inv) do
 110 | 				if v.Id == itemId then
 111 | 					table.remove(inv, i)
 112 | 					break
 113 | 				end
 114 | 			end
 115 | 			self.Logger:Info("Action", { User = player.Name, Type = action, Item = targetItem.Name })
 116 | 			return { Msg = "Item dropped" }
 117 | 		else
 118 | 			error("Unknown Action: " .. tostring(action))
 119 | 		end
 120 | 	end)
 121 | 
 122 | 	-- 2. RETURN RESULT
 123 | 	if lockSuccess then
 124 | 		return { Success = true, Data = lockResult }
 125 | 	else
 126 | 		-- Lock failed (Busy) atau Error di dalam logic
 127 | 		self.Logger:Warn("ActionFail", { User = player.Name, Err = lockResult })
 128 | 		return { Success = false, Error = tostring(lockResult) }
 129 | 	end
 130 | end
 131 | 
 132 | return Hub
 133 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Core/Permissions/Adapters/HDAdmin.luau</strong> (54 lines, 1.3 KB)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Core.Permissions.Adapters.HDAdmin`

```lua
   1 | --!strict
   2 | -- @Adapter: HDAdmin (REFACTORED)
   3 | local RS = game:GetService("ReplicatedStorage")
   4 | 
   5 | local HD = {}
   6 | local _api = nil
   7 | 
   8 | -- Non-Blocking Wait Function
   9 | function HD.WaitForAPI(timeout)
  10 |     if _api then return true end
  11 |     
  12 |     local start = os.clock()
  13 |     timeout = timeout or 5
  14 |     
  15 |     -- Attempt 1: Check Global Directly
  16 |     if _G.HDAdminMain then 
  17 |         _api = _G.HDAdminMain
  18 |         return true
  19 |     end
  20 | 
  21 |     -- Attempt 2: Scan safely
  22 |     repeat
  23 |         local setup = RS:FindFirstChild("HDAdminSetup")
  24 |         if setup and setup:IsA("ModuleScript") then
  25 |             local success, mod = pcall(require, setup)
  26 |             if success and mod and mod.GetMain then
  27 |                 _api = mod:GetMain()
  28 |                 return true
  29 |             end
  30 |         end
  31 |         
  32 |         task.wait(1) -- Polling acceptable here ONLY inside task.spawn context
  33 |     until (os.clock() - start) > timeout
  34 |     
  35 |     return false
  36 | end
  37 | 
  38 | -- Fallback Function
  39 | function HD.StartScan(logger)
  40 |     -- Deprecated: Handled by Service Logic now
  41 | end
  42 | 
  43 | function HD.GetRank(player)
  44 |     if not _api then return 0 end
  45 |     local s, cf = pcall(function() return _api:GetModule("cf") end)
  46 |     if s and cf then
  47 |         local id = cf:GetRankId(player)
  48 |         return tonumber(id) or 0
  49 |     end
  50 |     return 0
  51 | end
  52 | 
  53 | return HD
  54 | 
```
</details>


<details>
<summary><strong>üåô src/ServerScriptService/OVHL/Core/Permissions/Adapters/InternalDB.luau</strong> (26 lines, 642 Bytes)</summary>

**Rojo Path:** `game.ServerScriptService.OVHL.Core.Permissions.Adapters.InternalDB`

```lua
   1 | --!strict
   2 | -- @Adapter: InternalDB
   3 | -- Menyimpan Rank admin custom (selain HD Admin)
   4 | local DataStoreService = game:GetService("DataStoreService")
   5 | local Store = DataStoreService:GetDataStore("OVHL_Perms_V1")
   6 | 
   7 | local DB = {}
   8 | 
   9 | function DB.Get(userId)
  10 |     local s, r = pcall(function() return Store:GetAsync(tostring(userId)) end)
  11 |     if s and r then return r end
  12 |     return 0
  13 | end
  14 | 
  15 | function DB.Set(userId, rank)
  16 |     local key = tostring(userId)
  17 |     if rank <= 0 then
  18 |         pcall(function() Store:RemoveAsync(key) end)
  19 |     else
  20 |         pcall(function() Store:SetAsync(key, rank) end)
  21 |     end
  22 |     return true
  23 | end
  24 | 
  25 | return DB
  26 | 
```
</details>

### üì¶ Group: Client


<details>
<summary><strong>üåô src/StarterPlayer/StarterPlayerScripts/OVHL/ClientRuntime.client.luau</strong> (4 lines, 92 Bytes)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.OVHL.ClientRuntime.client`

```lua
   1 | --!strict
   2 | -- Client Runtime
   3 | require(game.ReplicatedStorage.OVHL.Bootstrap).StartClient()
   4 | 
```
</details>


<details>
<summary><strong>üåô src/StarterPlayer/StarterPlayerScripts/OVHL/TestRunner.client.luau</strong> (53 lines, 1.4 KB)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.OVHL.TestRunner.client`

```lua
   1 | --!strict
   2 | -- @System: TestRunner (Client Side)
   3 | local ReplicatedStorage = game:GetService("ReplicatedStorage")
   4 | local Players = game:GetService("Players")
   5 | local RunService = game:GetService("RunService")
   6 | 
   7 | if not RunService:IsStudio() then
   8 | 	return
   9 | end
  10 | 
  11 | task.defer(function()
  12 | 	task.wait(3) -- Client biasanya butuh waktu lebih lama buat loading UI
  13 | 
  14 | 	print("\nüß™ [CLIENT] STARTING TEST RUNNER...")
  15 | 
  16 | 	-- 1. Load TesEZ
  17 | 	local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
  18 | 	local TesEZ
  19 | 
  20 | 	pcall(function()
  21 | 		TesEZ = Loader.Get("TestEZ")
  22 | 	end)
  23 | 
  24 | 	if not TesEZ then
  25 | 		return
  26 | 	end -- Silent fail kalau gak ada (biasanya udah teriak di server)
  27 | 
  28 | 	-- 2. Cari Folder Test di PlayerScripts
  29 | 	local PlayerScripts = Players.LocalPlayer:WaitForChild("PlayerScripts")
  30 | 	local ClientTests = PlayerScripts:WaitForChild("Tests", 10)
  31 | 
  32 | 	local testRoots = {}
  33 | 	if ClientTests then
  34 | 		table.insert(testRoots, ClientTests)
  35 | 	end
  36 | 
  37 | 	-- Optional: Kalau mau ngetes Shared Logic (ReplicatedStorage) di client juga
  38 | 	-- table.insert(testRoots, ReplicatedStorage:WaitForChild("Tests"))
  39 | 
  40 | 	if #testRoots == 0 then
  41 | 		return -- Gak ada test client, skip aja
  42 | 	end
  43 | 
  44 | 	-- 3. JALANIN TES!
  45 | 	local results = TesEZ.TestBootstrap:run(testRoots)
  46 | 
  47 | 	if results.failureCount > 0 then
  48 | 		warn("‚ùå [CLIENT] FAILED: " .. results.failureCount .. " tests broken.")
  49 | 	else
  50 | 		print("‚úÖ [CLIENT] SUCCESS: UI & Controllers secure.")
  51 | 	end
  52 | end)
  53 | 
```
</details>


<details>
<summary><strong>üåô src/StarterPlayer/StarterPlayerScripts/OVHL/Core/ClientKernel.luau</strong> (126 lines, 3.26 KB)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.OVHL.Core.ClientKernel`

```lua
   1 | --!strict
   2 | -- @Kernel: Client v0.2.2 (Final Fix)
   3 | -- @Role: Client Bootstrapper & Memory Guard
   4 | -- @Mandate: Mandat 4 (Memory Management)
   5 | 
   6 | local Players = game:GetService("Players")
   7 | local RS = game:GetService("ReplicatedStorage")
   8 | local Loader = require(RS.OVHL.Core.Loader)
   9 | 
  10 | -- Core Dependencies
  11 | local ConfigLoader = Loader.Get("ConfigLoader")
  12 | local Bridge = Loader.Get("Bridge")
  13 | local Context = Loader.Get("Context")
  14 | local SmartLogger = Loader.Get("Logger")
  15 | local Manifest = Loader.Get("Manifest")
  16 | 
  17 | local ClientKernel = {}
  18 | ClientKernel._controllers = {}
  19 | ClientKernel._isShuttingDown = false
  20 | 
  21 | function ClientKernel.Boot()
  22 | 	local Log = SmartLogger.New("SYSTEM")
  23 | 	Log:Info(
  24 | 		string.format(
  25 | 			"üéÆ %s v%s (%s) CLIENT STARTING...",
  26 | 			Manifest.Identity.Name,
  27 | 			Manifest.Version.Full,
  28 | 			Manifest.Metadata.BuildType
  29 | 		)
  30 | 	)
  31 | 
  32 | 	local systems = {
  33 | 		ConfigLoader = ConfigLoader,
  34 | 		Network = Bridge.New(),
  35 | 		Controllers = {},
  36 | 	}
  37 | 
  38 | 	local PlayerScripts = Players.LocalPlayer:WaitForChild("PlayerScripts")
  39 | 	local Root = PlayerScripts:WaitForChild("OVHL")
  40 | 
  41 | 	local function register(module: Instance)
  42 | 		if module:IsA("ModuleScript") then
  43 | 			local ok, res = pcall(require, module)
  44 | 			if ok then
  45 | 				systems.Controllers[module.Name] = res
  46 | 				systems[module.Name] = res
  47 | 				Log:Debug("   + Controller Registered: " .. module.Name)
  48 | 			else
  49 | 				Log:Error("RegisterFail", { Module = module.Name, Error = res })
  50 | 			end
  51 | 		end
  52 | 	end
  53 | 
  54 | 	Log:Info("üîç Scanning Client Modules...")
  55 | 	if Root:FindFirstChild("Controllers") then
  56 | 		for _, mod in ipairs(Root.Controllers:GetChildren()) do
  57 | 			register(mod)
  58 | 		end
  59 | 	end
  60 | 	if Root:FindFirstChild("Modules") then
  61 | 		for _, feature in ipairs(Root.Modules:GetChildren()) do
  62 | 			if feature:IsA("Folder") then
  63 | 				for _, file in ipairs(feature:GetChildren()) do
  64 | 					if file.Name:match("Controller$") then
  65 | 						register(file)
  66 | 					end
  67 | 				end
  68 | 			end
  69 | 		end
  70 | 	end
  71 | 
  72 | 	ClientKernel._controllers = systems.Controllers
  73 | 	ClientKernel._logger = Log
  74 | 
  75 | 	local ctx = Context.New(systems)
  76 | 
  77 | 	Log:Info("Phase 1: Init")
  78 | 	for name, ctrl in pairs(systems.Controllers) do
  79 | 		if type(ctrl.Init) == "function" then
  80 | 			task.spawn(function()
  81 | 				local s, r = pcall(ctrl.Init, ctrl, ctx)
  82 | 				if not s then
  83 | 					Log:Error("InitFail", { Ctrl = name, Error = r })
  84 | 				end
  85 | 			end)
  86 | 		end
  87 | 	end
  88 | 
  89 | 	task.delay(0.1, function()
  90 | 		Log:Info("Phase 2: Start")
  91 | 		for name, ctrl in pairs(systems.Controllers) do
  92 | 			if type(ctrl.Start) == "function" then
  93 | 				task.spawn(function()
  94 | 					local s, r = pcall(ctrl.Start, ctrl)
  95 | 					if not s then
  96 | 						Log:Error("StartFail", { Ctrl = name, Error = r })
  97 | 					end
  98 | 				end)
  99 | 			end
 100 | 		end
 101 | 		Log:Info("‚úÖ CLIENT BOOT COMPLETE")
 102 | 	end)
 103 | 
 104 | 	-- [FIX] BindToClose dihapus karena error di Client.
 105 | 	-- Client OS akan handle memory cleanup saat window ditutup.
 106 | end
 107 | 
 108 | function ClientKernel.Shutdown()
 109 | 	if ClientKernel._isShuttingDown then
 110 | 		return
 111 | 	end
 112 | 	ClientKernel._isShuttingDown = true
 113 | 
 114 | 	for _, ctrl in pairs(ClientKernel._controllers) do
 115 | 		if type(ctrl.Destroy) == "function" then
 116 | 			pcall(ctrl.Destroy, ctrl)
 117 | 		elseif type(ctrl.Shutdown) == "function" then
 118 | 			pcall(ctrl.Shutdown, ctrl)
 119 | 		elseif ctrl.Trove and type(ctrl.Trove.Destroy) == "function" then
 120 | 			ctrl.Trove:Destroy()
 121 | 		end
 122 | 	end
 123 | end
 124 | 
 125 | return ClientKernel
 126 | 
```
</details>


<details>
<summary><strong>üåô src/StarterPlayer/StarterPlayerScripts/OVHL/Core/FinderService.luau</strong> (87 lines, 2.68 KB)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.OVHL.Core.FinderService`

```lua
   1 | --!strict
   2 | -- @Core: FinderService (Auto Scanner with CCTV)
   3 | -- @Role: Robust UI Element Lookup
   4 | local CollectionService = game:GetService("CollectionService")
   5 | local Players = game:GetService("Players")
   6 | 
   7 | local Player = Players.LocalPlayer
   8 | local PlayerGui = Player:WaitForChild("PlayerGui")
   9 | 
  10 | -- [DEPENDENCIES]
  11 | local Loader = require(game.ReplicatedStorage.OVHL.Core.Loader)
  12 | local Logger = Loader.Get("Logger").New("UI")
  13 | 
  14 | local Finder = {}
  15 | 
  16 | -- Strategy: Direct Attribute > Tag > Recursive Name
  17 | function Finder.Get(query, root)
  18 |     root = root or PlayerGui
  19 |     
  20 |     -- 1. Direct Reference by Attribute (O(1))
  21 |     if type(query) == "string" then
  22 |         local attrRef = root:GetAttribute(query)
  23 |         if attrRef and typeof(attrRef) == "Instance" then
  24 |             -- Logger:Debug("Finder", {Msg="Found by Attribute", Query=query}) 
  25 |             return attrRef
  26 |         end
  27 |     end
  28 |     
  29 |     -- 2. CollectionService Tag (O(1) Lookup)
  30 |     local tagged = CollectionService:GetTagged(query)
  31 |     for _, obj in ipairs(tagged) do
  32 |         if obj:IsDescendantOf(root) then 
  33 |             -- Logger:Debug("Finder", {Msg="Found by Tag", Query=query})
  34 |             return obj 
  35 |         end
  36 |     end
  37 | 
  38 |     -- 3. Standard Name Search (Fast Child & Recursive)
  39 |     local child = root:FindFirstChild(query, true) 
  40 |     if child then 
  41 |         -- Logger:Debug("Finder", {Msg="Found by Name", Query=query})
  42 |         return child 
  43 |     end
  44 |     
  45 |     -- [CCTV] Lapor jika Gagal Total
  46 |     Logger:Warn("Missing", {
  47 |         Msg = "GUI Element Not Found", 
  48 |         Query = query, 
  49 |         Root = root.Name
  50 |     })
  51 |     
  52 |     return nil
  53 | end
  54 | 
  55 | -- Digunakan untuk resolve list component dari Config
  56 | function Finder.ResolveMap(screenName, componentMap)
  57 |     local root = PlayerGui:FindFirstChild(screenName)
  58 |     if not root then 
  59 |         Logger:Error("MissingScreen", {Screen=screenName})
  60 |         return nil, "ScreenGui " .. screenName .. " not found" 
  61 |     end
  62 |     
  63 |     local results = { _Root = root }
  64 |     local missing = {}
  65 |     
  66 |     for key, spec in pairs(componentMap) do
  67 |         local searchKey = (type(spec) == "table") and (spec.Tag or spec.Name) or spec
  68 |         local found = Finder.Get(searchKey, root)
  69 |         
  70 |         if found then
  71 |             results[key] = found
  72 |         else
  73 |             table.insert(missing, key .. " (" .. tostring(searchKey) .. ")")
  74 |         end
  75 |     end
  76 |     
  77 |     if #missing > 0 then
  78 |         Logger:Warn("IncompleteMap", {Screen=screenName, Missing=table.concat(missing, ",")})
  79 |         return nil, "Missing Components: " .. table.concat(missing, ", ")
  80 |     end
  81 |     
  82 |     -- Logger:Info("Resolved", {Screen=screenName, Count=0}) -- Optional info
  83 |     return results
  84 | end
  85 | 
  86 | return Finder
  87 | 
```
</details>


<details>
<summary><strong>üåô src/StarterPlayer/StarterPlayerScripts/OVHL/Controllers/FrameworkController.luau</strong> (136 lines, 4.81 KB)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.OVHL.Controllers.FrameworkController`

```lua
   1 | --!strict
   2 | -- @Controller: FrameworkController (V2 Standard)
   3 | local RS = game:GetService("ReplicatedStorage")
   4 | local Loader = require(RS.OVHL.Core.Loader)
   5 | local OVHL = require(RS.OVHL.Core.Framework) -- Central Import
   6 | 
   7 | -- Libs (View & Utils tetap manual)
   8 | local Fusion = Loader.Get("Fusion")
   9 | local Trove = Loader.Get("Trove")
  10 | local UI = Loader.Get("API")
  11 | local Topbar = Loader.Get("Topbar")
  12 | local FrameworkPanelView = Loader.UI("Views/System/FrameworkPanelView")
  13 | 
  14 | local Ctrl = OVHL.CreateController({
  15 |     Name = "Framework",
  16 |     ConfigName = "SystemPanelConfig" -- Auto-load Config ke self.Config
  17 | })
  18 | 
  19 | function Ctrl:Init()
  20 |     self.Player = game.Players.LocalPlayer
  21 |     self._trove = Trove.new()
  22 |     self.Scope = UI.NewScope()
  23 |     
  24 |     self.State = {
  25 |         Visible = self.Scope:Value(false),
  26 |         CurrentTab = self.Scope:Value("Dashboard"), 
  27 |         PlayerList = self.Scope:Value({}),
  28 |         IsLoading = self.Scope:Value(false),
  29 |         SelectedPlayer = self.Scope:Value(nil),
  30 |         Confirmation = self.Scope:Value(nil)
  31 |     }
  32 | 
  33 |     local mounted = UI.SafeLoader.Mount(self.Scope, FrameworkPanelView, {
  34 |         Config = self.Config,
  35 |         State = self.State,
  36 |         OnClose = function() self:Toggle(false) end,
  37 |         
  38 |         Actions = {
  39 |             RefreshPlayers = function() self:FetchPlayers() end,
  40 |             OpenInspector = function(p) self.State.SelectedPlayer:set(p) end,
  41 |             CloseInspector = function() self.State.SelectedPlayer:set(nil) end,
  42 |             
  43 |             -- [GUARDED ACTION via self.Guard]
  44 |             RequestRankChange = function(targetData, newRankId, rankLabel)
  45 |                 self.Guard.Run({ 
  46 |                     Confirm = {
  47 |                         Title = "CONFIRM RANK CHANGE",
  48 |                         Msg = "Are you sure you want to promote/demote\n" .. targetData.Name .. " to " .. rankLabel .. "?"
  49 |                     }
  50 |                 }, function()
  51 |                     self:SetRank(targetData.UserId, newRankId)
  52 |                 end)
  53 |             end,
  54 | 
  55 |             ResolveConfirmation = function(confirmed)
  56 |                 self:HandleConfirmationUI(confirmed)
  57 |             end
  58 |         }
  59 |     })
  60 |     
  61 |     if mounted then self._trove:Add(mounted) end
  62 |     self:UpdateTopbar()
  63 |     
  64 |     -- [LISTENERS via self.Bridge]
  65 |     self.Bridge:Listen("Permission", "RankChanged", function(u, r)
  66 |         if u == self.Player.UserId then self:UpdateTopbar() end
  67 |         if Fusion.peek(self.State.Visible) then self:FetchPlayers() end
  68 |     end)
  69 | 
  70 |     -- [GLOBAL SIGNAL]
  71 |     Loader.Get("Signals"):Connect("SystemUI:RequestConfirm", function(payload)
  72 |         self:ShowConfirmationUI(payload)
  73 |     end)
  74 | end
  75 | 
  76 | function Ctrl:ShowConfirmationUI(payload)
  77 |     self._pendingGuardCallback = payload.OnResult
  78 |     self.State.Confirmation:set({ Title = payload.Title, Message = payload.Message })
  79 |     task.delay(5, function()
  80 |         local current = Fusion.peek(self.State.Confirmation)
  81 |         if current and current.Title == payload.Title then
  82 |             self.Logger:Info("AutoCancel", "Timeout 5s reached")
  83 |             self:HandleConfirmationUI(false)
  84 |         end
  85 |     end)
  86 | end
  87 | 
  88 | function Ctrl:HandleConfirmationUI(confirmed)
  89 |     if self._pendingGuardCallback then self._pendingGuardCallback(confirmed) end
  90 |     if confirmed then self.Logger:Info("UserConfirmed", "Action executed")
  91 |     else self.Logger:Info("UserCanceled", "Action aborted") end
  92 |     self.State.Confirmation:set(nil)
  93 |     self._pendingGuardCallback = nil
  94 | end
  95 | 
  96 | function Ctrl:UpdateTopbar()
  97 |     if self.Icon then return end 
  98 |     self.Icon = Topbar.Register("Framework", self.Config.Topbar, function(isOpened) self:Toggle(isOpened) end)
  99 | end
 100 | 
 101 | function Ctrl:Toggle(forceState)
 102 |     local current = Fusion.peek(self.State.Visible)
 103 |     local newState = if forceState ~= nil then forceState else not current
 104 |     self.State.Visible:set(newState)
 105 |     if self.Icon then if newState then self.Icon:select() else self.Icon:deselect() end end
 106 |     if newState then self:FetchPlayers() end
 107 | end
 108 | 
 109 | function Ctrl:FetchPlayers()
 110 |     self.State.IsLoading:set(true)
 111 |     self.Bridge:Request("Permission", "GetPlayers")
 112 |         :andThen(function(res)
 113 |             self.State.PlayerList:set(res)
 114 |             self.State.IsLoading:set(false)
 115 |         end)
 116 |         :catch(function(err)
 117 |             self.State.IsLoading:set(false)
 118 |         end)
 119 | end
 120 | 
 121 | function Ctrl:SetRank(targetId, newRank)
 122 |     self.State.IsLoading:set(true)
 123 |     self.State.SelectedPlayer:set(nil) 
 124 |     self.Bridge:Request("Permission", "SetRank", tonumber(targetId), tonumber(newRank))
 125 |         :andThen(function(res)
 126 |             self.Logger:Info("Success", res)
 127 |             self:FetchPlayers()
 128 |         end)
 129 |         :catch(function(err)
 130 |             warn("[Framework] SetRank Failed: " .. tostring(err))
 131 |             self.State.IsLoading:set(false)
 132 |         end)
 133 | end
 134 | 
 135 | return Ctrl
 136 | 
```
</details>


<details>
<summary><strong>üåô src/StarterPlayer/StarterPlayerScripts/OVHL/Controllers/NotificationController.luau</strong> (82 lines, 2.05 KB)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.OVHL.Controllers.NotificationController`

```lua
   1 | --!strict
   2 | -- @Controller: NotificationController
   3 | -- @Role: Central Toast Manager via Signals
   4 | local RS = game:GetService("ReplicatedStorage")
   5 | local Loader = require(RS.OVHL.Core.Loader)
   6 | local OVHL = require(RS.OVHL.Core.Framework)
   7 | 
   8 | local UI = Loader.Get("API")
   9 | local Fusion = UI.Fusion
  10 | local Trove = Loader.Get("Trove")
  11 | 
  12 | local NotificationView = Loader.UI("Views/System/NotificationView") -- Kita buat habis ini
  13 | 
  14 | local Ctrl = OVHL.CreateController({
  15 | 	Name = "Notification",
  16 | 	-- No config needed for now
  17 | })
  18 | 
  19 | function Ctrl:Init()
  20 | 	self._trove = Trove.new()
  21 | 	self.Scope = UI.NewScope()
  22 | 
  23 | 	-- [STATE] Daftar Notifikasi Aktif
  24 | 	-- Format: { { Id=1, Type="Success", Msg="Hello", Time=os.clock() }, ... }
  25 | 	self.State = {
  26 | 		Toasts = self.Scope:Value({}),
  27 | 	}
  28 | 
  29 | 	-- Mount UI (Layer paling atas)
  30 | 	local mounted = UI.SafeLoader.Mount(self.Scope, NotificationView, {
  31 | 		State = self.State,
  32 | 	})
  33 | 	if mounted then
  34 | 		self._trove:Add(mounted)
  35 | 	end
  36 | 
  37 | 	-- [LISTENER] Mendengarkan Sinyal dari Modul Lain
  38 | 	-- Usage: Signals:Fire("Notify", { Type="Success", Msg="Saved!" })
  39 | 	Loader.Get("Signals"):Connect("Notify", function(payload)
  40 | 		self:Add(payload)
  41 | 	end)
  42 | end
  43 | 
  44 | function Ctrl:Add(payload)
  45 | 	local msg = payload.Msg or "Notification"
  46 | 	local style = payload.Type or "Info" -- Success, Error, Info, Warning
  47 | 	local duration = payload.Duration or 3
  48 | 
  49 | 	local current = Fusion.peek(self.State.Toasts)
  50 | 	local newId = os.clock() -- Unique ID based on time
  51 | 
  52 | 	local newToast = {
  53 | 		Id = newId,
  54 | 		Type = style,
  55 | 		Msg = msg,
  56 | 		Duration = duration,
  57 | 	}
  58 | 
  59 | 	-- Tambahkan ke list (Copy table biar Fusion detect change)
  60 | 	local newList = table.clone(current)
  61 | 	table.insert(newList, newToast)
  62 | 	self.State.Toasts:set(newList)
  63 | 
  64 | 	-- Auto Remove Timer
  65 | 	task.delay(duration, function()
  66 | 		self:Remove(newId)
  67 | 	end)
  68 | end
  69 | 
  70 | function Ctrl:Remove(targetId)
  71 | 	local current = Fusion.peek(self.State.Toasts)
  72 | 	local newList = {}
  73 | 	for _, toast in ipairs(current) do
  74 | 		if toast.Id ~= targetId then
  75 | 			table.insert(newList, toast)
  76 | 		end
  77 | 	end
  78 | 	self.State.Toasts:set(newList)
  79 | end
  80 | 
  81 | return Ctrl
  82 | 
```
</details>


<details>
<summary><strong>üåô src/StarterPlayer/StarterPlayerScripts/OVHL/Controllers/PermissionController.luau</strong> (33 lines, 834 Bytes)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.OVHL.Controllers.PermissionController`

```lua
   1 | --!strict
   2 | -- @Controller: PermissionController (V2 Standard)
   3 | local RS = game:GetService("ReplicatedStorage")
   4 | local OVHL = require(RS.OVHL.Core.Framework)
   5 | 
   6 | local Ctrl = OVHL.CreateController({
   7 |     Name = "Permission",
   8 |     -- Tidak ada Config khusus
   9 | })
  10 | 
  11 | function Ctrl:Init()
  12 |     self.Player = game.Players.LocalPlayer
  13 | end
  14 | 
  15 | function Ctrl:Start()
  16 |     self.Player:GetAttributeChangedSignal("OVHL_Rank"):Connect(function()
  17 |         self:OnRankChanged()
  18 |     end)
  19 |     self:OnRankChanged()
  20 | end
  21 | 
  22 | function Ctrl:OnRankChanged()
  23 |     local rank = self.Player:GetAttribute("OVHL_Rank") or 0
  24 |     local role = self.Player:GetAttribute("OVHL_Role") or "Guest"
  25 |     self.Logger:Info("Update", { Rank = rank, Role = role })
  26 | end
  27 | 
  28 | function Ctrl:GetRank()
  29 |     return self.Player:GetAttribute("OVHL_Rank") or 0
  30 | end
  31 | 
  32 | return Ctrl
  33 | 
```
</details>


<details>
<summary><strong>üåô src/StarterPlayer/StarterPlayerScripts/OVHL/Modules/Inventory/InventoryController.luau</strong> (148 lines, 3.68 KB)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.OVHL.Modules.Inventory.InventoryController`

```lua
   1 | --!strict
   2 | -- @Controller: InventoryController v0.3.1
   3 | -- @Role: Inventory UI Logic
   4 | -- @Features: Retry Policy, Toast Notification, Auto-Keyed Guard
   5 | 
   6 | local RS = game:GetService("ReplicatedStorage")
   7 | local Loader = require(RS.OVHL.Core.Loader)
   8 | local OVHL = require(RS.OVHL.Core.Framework)
   9 | 
  10 | local UI = Loader.Get("API")
  11 | local Fusion = UI.Fusion
  12 | local Trove = Loader.Get("Trove")
  13 | local Topbar = Loader.Get("Topbar")
  14 | local InventoryView = Loader.UI.Views.Inventory.InventoryView
  15 | 
  16 | local Ctrl = OVHL.CreateController({
  17 | 	Name = "Inventory",
  18 | 	ConfigName = "Inventory",
  19 | })
  20 | 
  21 | function Ctrl:Init()
  22 | 	self._trove = Trove.new()
  23 | 	self.Scope = UI.NewScope()
  24 | 
  25 | 	-- [DEPENDENCY] Signals wajib ada untuk Notification System
  26 | 	self.Signals = Loader.Get("Signals")
  27 | 
  28 | 	self.State = {
  29 | 		Visible = self.Scope:Value(false),
  30 | 		Items = self.Scope:Value({}),
  31 | 	}
  32 | 
  33 | 	local mounted = UI.SafeLoader.Mount(self.Scope, InventoryView, {
  34 | 		Config = self.Config,
  35 | 		State = self.State,
  36 | 		OnClose = function()
  37 | 			self:Toggle(false)
  38 | 		end,
  39 | 		OnAction = function(item, actionId, unlockUI)
  40 | 			self:HandleAction(item, actionId, unlockUI)
  41 | 		end,
  42 | 	})
  43 | 	if mounted then
  44 | 		self._trove:Add(mounted)
  45 | 	end
  46 | 
  47 | 	self.Icon = Topbar.Register("Inventory", self.Config.Topbar, function(isOpened)
  48 | 		self:Toggle(isOpened)
  49 | 	end)
  50 | end
  51 | 
  52 | function Ctrl:Start()
  53 | 	self:FetchData()
  54 | end
  55 | 
  56 | function Ctrl:Shutdown()
  57 | 	if self._trove then
  58 | 		self._trove:Destroy()
  59 | 		self._trove = nil
  60 | 	end
  61 | 	if self.Scope and self.Scope.doCleanup then
  62 | 		self.Scope:doCleanup()
  63 | 		self.Scope = nil
  64 | 	end
  65 | end
  66 | 
  67 | function Ctrl:HandleAction(item, actionId, unlockUI)
  68 | 	-- [ZERO TOLERANCE] Validasi Data Mentah
  69 | 	if not item or not item.Id then
  70 | 		self.Logger:Warn("DataError", "Invalid Item ID")
  71 | 		if self.Signals then
  72 | 			self.Signals:Fire("Notify", { Type = "Error", Msg = "Data Error: Invalid Item" })
  73 | 		end
  74 | 		unlockUI()
  75 | 		return
  76 | 	end
  77 | 
  78 | 	-- [ENTERPRISE] Gunakan Helper Otomatis Framework
  79 | 	-- ID Lock otomatis menjadi: "Inventory:<Action>:<ItemID>"
  80 | 	-- Tidak perlu string.format manual lagi.
  81 | 
  82 | 	self:SafeRunEx({
  83 | 		Action = actionId,
  84 | 		Key = item.Id,
  85 | 		Debounce = 1.0,
  86 | 	}, function()
  87 | 		-- Network Request dengan Retry Policy (Anti-Fail)
  88 | 		self.Bridge
  89 | 			:RequestWithRetry("Inventory", "PerformAction", { Retries = 3 }, item.Id, actionId)
  90 | 			:andThen(function(res)
  91 | 				self.Logger:Info("ActionSuccess", res.Msg)
  92 | 
  93 | 				-- Notifikasi Sukses (Dynamic Message)
  94 | 				local itemName = item.Name
  95 | 				local actionText = (actionId == "Equip") and "Equipped" or "Dropped"
  96 | 
  97 | 				if self.Signals then
  98 | 					self.Signals:Fire("Notify", {
  99 | 						Type = "Success",
 100 | 						Msg = string.format("%s %s", actionText, itemName),
 101 | 					})
 102 | 				end
 103 | 
 104 | 				return self:FetchData()
 105 | 			end)
 106 | 			:catch(function(err)
 107 | 				self.Logger:Warn("ActionFail", err)
 108 | 				-- Notifikasi Error dari Server
 109 | 				if self.Signals then
 110 | 					self.Signals:Fire("Notify", { Type = "Error", Msg = tostring(err) })
 111 | 				end
 112 | 			end)
 113 | 			:finally(function()
 114 | 				unlockUI()
 115 | 			end)
 116 | 	end)
 117 | end
 118 | 
 119 | function Ctrl:FetchData()
 120 | 	-- Retry Policy agar tidak crash saat boot awal
 121 | 	return self.Bridge
 122 | 		:RequestWithRetry("Inventory", "GetItems", { Retries = 5, Interval = 1 })
 123 | 		:andThen(function(items)
 124 | 			self.State.Items:set(items)
 125 | 		end)
 126 | 		:catch(function(err)
 127 | 			self.Logger:Warn("FetchError", "Failed to load items after retries: " .. tostring(err))
 128 | 		end)
 129 | end
 130 | 
 131 | function Ctrl:Toggle(forceState)
 132 | 	local current = Fusion.peek(self.State.Visible)
 133 | 	local newState = if forceState ~= nil then forceState else not current
 134 | 	self.State.Visible:set(newState)
 135 | 	if self.Icon then
 136 | 		if newState then
 137 | 			self.Icon:select()
 138 | 		else
 139 | 			self.Icon:deselect()
 140 | 		end
 141 | 	end
 142 | 	if newState then
 143 | 		self:FetchData()
 144 | 	end
 145 | end
 146 | 
 147 | return Ctrl
 148 | 
```
</details>

### üì¶ Group: Tests (Shared)


<details>
<summary><strong>üåô tests/ReplicatedStorage/Mocks/MockDataStore.luau</strong> (14 lines, 380 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.Tests.Mocks.MockDataStore`

```lua
   1 | --!strict
   2 | -- @Mock: DataStore
   3 | local MockDS = {}
   4 | MockDS.__index = MockDS
   5 | function MockDS.new() return setmetatable({_d={}}, MockDS) end
   6 | function MockDS:GetAsync(k) return self._d[k] end
   7 | function MockDS:SetAsync(k, v) self._d[k] = v end
   8 | function MockDS:UpdateAsync(k, cb) 
   9 |     local v = cb(self._d[k])
  10 |     if v~=nil then self._d[k]=v end
  11 |     return v
  12 | end
  13 | return MockDS
  14 | 
```
</details>


<details>
<summary><strong>üåô tests/ReplicatedStorage/Mocks/MockPlayer.luau</strong> (14 lines, 505 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.Tests.Mocks.MockPlayer`

```lua
   1 | --!strict
   2 | -- @Mock: Player
   3 | local MockPlayer = {}
   4 | MockPlayer.__index = MockPlayer
   5 | function MockPlayer.new(userId, name) 
   6 | 	local self = setmetatable({UserId=userId or 1, Name=name or "TestPlr", Parent=game.Players, _attr={}}, MockPlayer) 
   7 | 	return self 
   8 | end
   9 | function MockPlayer:GetAttribute(k) return self._attr[k] end
  10 | function MockPlayer:SetAttribute(k, v) self._attr[k] = v end
  11 | function MockPlayer:Kick() end
  12 | function MockPlayer:IsDescendantOf(p) return self.Parent == p end
  13 | return MockPlayer
  14 | 
```
</details>


<details>
<summary><strong>üåô tests/ReplicatedStorage/OVHL/Modules/ConfigIntegrity.spec.luau</strong> (30 lines, 905 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.Tests.OVHL.Modules.ConfigIntegrity.spec`

```lua
   1 | return function()
   2 | 	local ReplicatedStorage = game:GetService("ReplicatedStorage")
   3 | 	local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
   4 | 
   5 | 	-- Helper untuk scan folder modules
   6 | 	local ModulesRoot = ReplicatedStorage.OVHL.Modules
   7 | 
   8 | 	describe("SharedConfig Integrity", function()
   9 | 		for _, moduleFolder in ipairs(ModulesRoot:GetChildren()) do
  10 | 			if moduleFolder:IsA("Folder") then
  11 | 				it("should have valid SharedConfig in " .. moduleFolder.Name, function()
  12 | 					local configFile = moduleFolder:FindFirstChild("SharedConfig")
  13 | 					expect(configFile).to.be.ok()
  14 | 
  15 | 					local config = require(configFile)
  16 | 
  17 | 					-- Validasi Wajib
  18 | 					expect(config.Meta).to.be.a("table")
  19 | 					expect(config.Meta.Name).to.be.a("string")
  20 | 
  21 | 					-- Validasi Network (Jika ada)
  22 | 					if config.Network then
  23 | 						expect(config.Network.Requests).to.be.a("table")
  24 | 					end
  25 | 				end)
  26 | 			end
  27 | 		end
  28 | 	end)
  29 | end
  30 | 
```
</details>


<details>
<summary><strong>üåô tests/ReplicatedStorage/OVHL/Core/Context.spec.luau</strong> (31 lines, 924 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.Tests.OVHL.Core.Context.spec`

```lua
   1 | return function()
   2 | 	local ReplicatedStorage = game:GetService("ReplicatedStorage")
   3 | 	local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
   4 | 	local Context = Loader.Get("Context")
   5 | 
   6 | 	describe("Context (DI Container)", function()
   7 | 		it("should inject services into self", function()
   8 | 			local mockServices = {
   9 | 				AuthService = { Name = "Auth" },
  10 | 				DataService = { Name = "Data" },
  11 | 			}
  12 | 			local ctx = Context.New(mockServices)
  13 | 
  14 | 			expect(ctx).to.be.ok()
  15 | 			expect(ctx.AuthService).to.be.ok()
  16 | 			expect(ctx.DataService).to.be.ok()
  17 | 			expect(ctx.AuthService.Name).to.equal("Auth")
  18 | 		end)
  19 | 
  20 | 		it("should provide CreateLogger helper", function()
  21 | 			local ctx = Context.New({})
  22 | 			expect(ctx.CreateLogger).to.be.a("function")
  23 | 
  24 | 			local log = ctx:CreateLogger("TEST_DOMAIN")
  25 | 			expect(log).to.be.ok()
  26 | 			-- Pastikan logger punya method standar
  27 | 			expect(log.Info).to.be.a("function")
  28 | 		end)
  29 | 	end)
  30 | end
  31 | 
```
</details>


<details>
<summary><strong>üåô tests/ReplicatedStorage/OVHL/Core/Loader.spec.luau</strong> (32 lines, 1.02 KB)</summary>

**Rojo Path:** `game.ReplicatedStorage.Tests.OVHL.Core.Loader.spec`

```lua
   1 | return function()
   2 | 	local ReplicatedStorage = game:GetService("ReplicatedStorage")
   3 | 	-- Kita require manual cuma sekali buat entry point
   4 | 	local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
   5 | 
   6 | 	describe("Loader System (v5.2)", function()
   7 | 		it("should load Core modules via Registry", function()
   8 | 			local Signals = Loader.Get("Signals")
   9 | 			expect(Signals).to.be.ok()
  10 | 			expect(type(Signals)).to.equal("table")
  11 | 		end)
  12 | 
  13 | 		it("should auto-detect Packages (Wally)", function()
  14 | 			-- TestEZ harusnya ada karena kita lagi jalanin tes ini
  15 | 			local TestEZ = Loader.Get("TestEZ")
  16 | 			expect(TestEZ).to.be.ok()
  17 | 		end)
  18 | 
  19 | 		it("should handle aliases case-insensitively if configured", function()
  20 | 			-- Tergantung implementasi fuzzy match, tapi kita test direct match dulu
  21 | 			local context = Loader.Get("Context")
  22 | 			expect(context).to.be.ok()
  23 | 		end)
  24 | 
  25 | 		it("should throw meaningful error on missing module", function()
  26 | 			expect(function()
  27 | 				Loader.Get("ModuleYangTidakMungkinAda123")
  28 | 			end).to.throw()
  29 | 		end)
  30 | 	end)
  31 | end
  32 | 
```
</details>


<details>
<summary><strong>üåô tests/ReplicatedStorage/OVHL/Core/Signals.spec.luau</strong> (31 lines, 858 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.Tests.OVHL.Core.Signals.spec`

```lua
   1 | return function()
   2 | 	local ReplicatedStorage = game:GetService("ReplicatedStorage")
   3 | 	local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
   4 | 	local Signals = Loader.Get("Signals")
   5 | 
   6 | 	describe("Signals (Event Bus)", function()
   7 | 		it("should create new signal on Get", function()
   8 | 			local sig = Signals:Get("UnitTestSignal")
   9 | 			expect(sig).to.be.ok()
  10 | 		end)
  11 | 
  12 | 		it("should fire and connect events", function()
  13 | 			local result = 0
  14 | 			local sigName = "MathTest"
  15 | 
  16 | 			local connection = Signals:Connect(sigName, function(num)
  17 | 				result = num * 2
  18 | 			end)
  19 | 
  20 | 			Signals:Fire(sigName, 10)
  21 | 
  22 | 			-- Signal biasanya asynchronous di frame yang sama atau next frame
  23 | 			-- Tapi library Signal modern biasanya direct invoke.
  24 | 			-- Kita asumsi direct invoke untuk tes ini.
  25 | 			expect(result).to.equal(20)
  26 | 
  27 | 			connection:Disconnect()
  28 | 		end)
  29 | 	end)
  30 | end
  31 | 
```
</details>


<details>
<summary><strong>üåô tests/ReplicatedStorage/OVHL/Core/SmartLogger.spec.luau</strong> (30 lines, 824 Bytes)</summary>

**Rojo Path:** `game.ReplicatedStorage.Tests.OVHL.Core.SmartLogger.spec`

```lua
   1 | --!strict
   2 | return function()
   3 | 	local ReplicatedStorage = game:GetService("ReplicatedStorage")
   4 | 	local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
   5 | 	local SmartLogger = Loader.Get("Logger")
   6 | 
   7 | 	describe("SmartLogger", function()
   8 | 		it("should create new instance", function()
   9 | 			local log = SmartLogger.New("UNIT_TEST")
  10 | 			expect(log).to.be.ok()
  11 | 			expect(log._rawDomain).to.equal("UNIT_TEST")
  12 | 		end)
  13 | 
  14 | 		it("should handle logging without error", function()
  15 | 			local log = SmartLogger.New("TEST")
  16 | 			expect(function()
  17 | 				log:Info("Info Check")
  18 | 				log:Warn("Warn Check")
  19 | 			end).never.to.throw()
  20 | 		end)
  21 | 
  22 | 		it("should accept data table", function()
  23 | 			local log = SmartLogger.New("TEST")
  24 | 			expect(function()
  25 | 				log:Info("Data Check", { Value = 123 })
  26 | 			end).never.to.throw()
  27 | 		end)
  28 | 	end)
  29 | end
  30 | 
```
</details>

### üì¶ Group: Tests (Server)


<details>
<summary><strong>üåô tests/ServerScriptService/OVHL/Core/DataMigrator.spec.luau</strong> (33 lines, 1.08 KB)</summary>

**Rojo Path:** `game.ServerScriptService.Tests.OVHL.Core.DataMigrator.spec`

```lua
   1 | return function()
   2 | 	local ReplicatedStorage = game:GetService("ReplicatedStorage")
   3 | 	local SS = game:GetService("ServerScriptService")
   4 | 
   5 | 	-- Pake Loader untuk akses file server (jika di setup Loader.Server)
   6 | 	-- Atau require manual kalau Loader.Server belum ready di test env
   7 | 	local DataMigrator = require(SS.OVHL.Core.DataMigrator)
   8 | 
   9 | 	-- Mock Logger sederhana
  10 | 	local MockLogger = {
  11 | 		Info = function() end,
  12 | 		Warn = function() end,
  13 | 		Error = function() end,
  14 | 	}
  15 | 
  16 | 	describe("DataMigrator", function()
  17 | 		it("should tag new data with latest version", function()
  18 | 			local profile = { Data = {} }
  19 | 			DataMigrator.Migrate(profile, MockLogger)
  20 | 
  21 | 			expect(profile.Data._SchemaVersion).to.equal(DataMigrator.LATEST_VERSION)
  22 | 		end)
  23 | 
  24 | 		it("should NOT migrate if version matches", function()
  25 | 			local profile = { Data = { _SchemaVersion = DataMigrator.LATEST_VERSION, Coins = 100 } }
  26 | 			DataMigrator.Migrate(profile, MockLogger)
  27 | 
  28 | 			expect(profile.Data.Coins).to.equal(100) -- Data gak boleh rusak
  29 | 			expect(profile.Data._SchemaVersion).to.equal(DataMigrator.LATEST_VERSION)
  30 | 		end)
  31 | 	end)
  32 | end
  33 | 
```
</details>


<details>
<summary><strong>üåô tests/ServerScriptService/OVHL/Core/NetworkGuard.spec.luau</strong> (56 lines, 1.7 KB)</summary>

**Rojo Path:** `game.ServerScriptService.Tests.OVHL.Core.NetworkGuard.spec`

```lua
   1 | --!strict
   2 | return function()
   3 | 	local ServerScriptService = game:GetService("ServerScriptService")
   4 | 	-- NetworkGuard akan log warning ke console, itu tanda dia bekerja.
   5 | 	local Guard = require(ServerScriptService.OVHL.Core.NetworkGuard)
   6 | 
   7 | 	describe("[UNIT-TEST] NetworkGuard (CPU Firewall)", function()
   8 | 		it("should BLOCK Instances (Anti-Injection)", function()
   9 | 			local maliciousPart = Instance.new("Part")
  10 | 			maliciousPart.Name = "Virus"
  11 | 
  12 | 			local clean = Guard.CleanIn(maliciousPart, 0, nil)
  13 | 			expect(clean).to.equal(nil) -- Harus dimusnahkan jadi nil
  14 | 
  15 | 			maliciousPart:Destroy()
  16 | 		end)
  17 | 
  18 | 		it("should TRUNCATE massive strings (Memory Protect)", function()
  19 | 			-- Buat string 5000 karakter
  20 | 			local longString = string.rep("A", 5000)
  21 | 
  22 | 			local clean = Guard.CleanIn(longString, 0, nil)
  23 | 			expect(#clean).to.equal(4096) -- Batas max di config Guard
  24 | 			expect(clean).never.to.equal(longString)
  25 | 		end)
  26 | 
  27 | 		it("should NEUTRALIZE NaN and Infinity (Math Protect)", function()
  28 | 			local nan = 0 / 0
  29 | 			local inf = math.huge
  30 | 
  31 | 			expect(Guard.CleanIn(nan, 0)).to.equal(0)
  32 | 			expect(Guard.CleanIn(inf, 0)).to.equal(0)
  33 | 			expect(Guard.CleanIn(-inf, 0)).to.equal(0)
  34 | 			expect(Guard.CleanIn(123, 0)).to.equal(123) -- Angka normal aman
  35 | 		end)
  36 | 
  37 | 		it("should RECURSIVELY clean nested tables", function()
  38 | 			local dirtyTable = {
  39 | 				Safe = "Yes",
  40 | 				Deep = {
  41 | 					Bad = math.huge, -- Nested Bad Number
  42 | 					Deeper = {
  43 | 						Part = Instance.new("Folder"), -- Nested Instance
  44 | 					},
  45 | 				},
  46 | 			}
  47 | 
  48 | 			local clean = Guard.CleanIn(dirtyTable, 0)
  49 | 
  50 | 			expect(clean.Safe).to.equal("Yes")
  51 | 			expect(clean.Deep.Bad).to.equal(0) -- Jadi 0
  52 | 			expect(clean.Deep.Deeper.Part).to.equal(nil) -- Jadi nil
  53 | 		end)
  54 | 	end)
  55 | end
  56 | 
```
</details>


<details>
<summary><strong>üåô tests/ServerScriptService/OVHL/Core/RateLimiter.spec.luau</strong> (50 lines, 1.43 KB)</summary>

**Rojo Path:** `game.ServerScriptService.Tests.OVHL.Core.RateLimiter.spec`

```lua
   1 | --!strict
   2 | return function()
   3 | 	local ServerScriptService = game:GetService("ServerScriptService")
   4 | 	local RateLimiter = require(ServerScriptService.OVHL.Core.RateLimiter)
   5 | 
   6 | 	-- Mock Player
   7 | 	local MockPlayer = { UserId = 99999 }
   8 | 
   9 | 	describe("[UNIT-TEST] RateLimiter (Traffic Control)", function()
  10 | 		it("should initialize correctly", function()
  11 | 			local limiter = RateLimiter.New()
  12 | 			expect(limiter).to.be.ok()
  13 | 		end)
  14 | 
  15 | 		it("should BLOCK requests exceeding quota", function()
  16 | 			local limiter = RateLimiter.New()
  17 | 			local action = "SpamTest"
  18 | 			local limit = 5
  19 | 			local interval = 10 -- 5 request per 10 detik
  20 | 
  21 | 			-- Tembak 5 kali (Harus OK)
  22 | 			for i = 1, limit do
  23 | 				local allowed = limiter:Check(MockPlayer, action, limit, interval)
  24 | 				expect(allowed).to.equal(true)
  25 | 			end
  26 | 
  27 | 			-- Tembak ke-6 (Harus GAGAL)
  28 | 			local spam = limiter:Check(MockPlayer, action, limit, interval)
  29 | 			expect(spam).to.equal(false)
  30 | 		end)
  31 | 
  32 | 		it("should REFILL tokens over time", function()
  33 | 			local limiter = RateLimiter.New()
  34 | 			local action = "RefillTest"
  35 | 
  36 | 			-- Habiskan token (Limit 1, Interval 0.1 detik)
  37 | 			limiter:Check(MockPlayer, action, 1, 0.1)
  38 | 
  39 | 			-- Cek langsung (Harus gagal)
  40 | 			expect(limiter:Check(MockPlayer, action, 1, 0.1)).to.equal(false)
  41 | 
  42 | 			-- Tunggu 0.2 detik (Token harusnya nambah)
  43 | 			task.wait(0.2)
  44 | 
  45 | 			-- Cek lagi (Harus sukses)
  46 | 			expect(limiter:Check(MockPlayer, action, 1, 0.1)).to.equal(true)
  47 | 		end)
  48 | 	end)
  49 | end
  50 | 
```
</details>


<details>
<summary><strong>üåô tests/ServerScriptService/OVHL/Core/SessionMutex.spec.luau</strong> (56 lines, 1.8 KB)</summary>

**Rojo Path:** `game.ServerScriptService.Tests.OVHL.Core.SessionMutex.spec`

```lua
   1 | --!strict
   2 | return function()
   3 | 	local ServerScriptService = game:GetService("ServerScriptService")
   4 | 	local SessionMutex = require(ServerScriptService.OVHL.Core.SessionMutex)
   5 | 
   6 | 	describe("[UNIT-TEST] SessionMutex (Anti-Race Condition)", function()
   7 | 		it("should allow first transaction and return result", function()
   8 | 			local userId = 1001
   9 | 			local success, res = SessionMutex.Run(userId, function()
  10 | 				return "Transaction OK"
  11 | 			end)
  12 | 
  13 | 			expect(success).to.equal(true)
  14 | 			expect(res).to.equal("Transaction OK")
  15 | 			-- Pastikan lock terbuka setelah selesai
  16 | 			expect(SessionMutex.IsLocked(userId)).to.equal(false)
  17 | 		end)
  18 | 
  19 | 		it("should FAIL if user is already locked (Concurrency Check)", function()
  20 | 			local userId = 1002
  21 | 
  22 | 			-- Kita simulasikan lock manual (seolah-olah sedang ada transaksi berjalan)
  23 | 			-- Hack internal state via API public jika ada, atau simulasi nested call
  24 | 
  25 | 			-- Cara test: Panggil Run di dalam Run (Recursive attempt)
  26 | 			local doubleLockSuccess = false
  27 | 			local innerError = ""
  28 | 
  29 | 			SessionMutex.Run(userId, function()
  30 | 				-- Di dalam sini, User 1002 sedang TERKUNCI.
  31 | 				-- Coba transaksi kedua:
  32 | 				local s, e = SessionMutex.Run(userId, function() end)
  33 | 				doubleLockSuccess = s
  34 | 				innerError = e
  35 | 			end)
  36 | 
  37 | 			expect(doubleLockSuccess).to.equal(false)
  38 | 			expect(innerError).to.be.a("string")
  39 | 		end)
  40 | 
  41 | 		it("should AUTO-UNLOCK if code errors (Safety Valve)", function()
  42 | 			local userId = 1003
  43 | 
  44 | 			-- Jalankan fungsi yang PASTI error
  45 | 			local success, err = SessionMutex.Run(userId, function()
  46 | 				error("Simulated Crash")
  47 | 			end)
  48 | 
  49 | 			expect(success).to.equal(false)
  50 | 			-- Pastikan Mutex TIDAK macet (IsLocked harus false)
  51 | 			-- Kalau true, artinya sistem kita cacat bikin player stuck selamanya
  52 | 			expect(SessionMutex.IsLocked(userId)).to.equal(false)
  53 | 		end)
  54 | 	end)
  55 | end
  56 | 
```
</details>

### üì¶ Group: Tests (Client)


<details>
<summary><strong>üåô tests/StarterPlayer/StarterPlayerScripts/OVHL/Core/ClientKernel.spec.luau</strong> (16 lines, 530 Bytes)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.Tests.OVHL.Core.ClientKernel.spec`

```lua
   1 | return function()
   2 | 	local Players = game:GetService("Players")
   3 | 	local PlayerScripts = Players.LocalPlayer:WaitForChild("PlayerScripts")
   4 | 	local ClientKernel = require(PlayerScripts.OVHL.Core.ClientKernel)
   5 | 
   6 | 	describe("Client Kernel", function()
   7 | 		it("should exist and have Boot method", function()
   8 | 			expect(ClientKernel).to.be.ok()
   9 | 			expect(ClientKernel.Boot).to.be.a("function")
  10 | 		end)
  11 | 
  12 | 		-- Hati-hati ngetes Boot() beneran karena bisa double-init sama game asli.
  13 | 		-- Cukup pastikan structure-nya benar.
  14 | 	end)
  15 | end
  16 | 
```
</details>


<details>
<summary><strong>üåô tests/StarterPlayer/StarterPlayerScripts/OVHL/Modules/Inventory/InventoryController.spec.luau</strong> (62 lines, 1.84 KB)</summary>

**Rojo Path:** `game.StarterPlayer.StarterPlayerScripts.Tests.OVHL.Modules.Inventory.InventoryController.spec`

```lua
   1 | --!strict
   2 | return function()
   3 | 	local ReplicatedStorage = game:GetService("ReplicatedStorage")
   4 | 	local Loader = require(ReplicatedStorage.OVHL.Core.Loader)
   5 | 	local Promise = Loader.Get("Promise")
   6 | 
   7 | 	-- Load Controller Asli
   8 | 	local InventoryCtrl = require(game.StarterPlayer.StarterPlayerScripts.OVHL.Modules.Inventory.InventoryController)
   9 | 
  10 | 	describe("InventoryController (Client Logic)", function()
  11 | 		-- [SETUP] Mocking Dependencies
  12 | 		-- Update Mock Bridge agar sesuai dengan API v0.2.0
  13 | 		InventoryCtrl.Bridge = {
  14 | 			Request = function(self, service, method)
  15 | 				if method == "GetItems" then
  16 | 					return Promise.resolve({ { Id = 1, Name = "MockSword" } })
  17 | 				end
  18 | 				return Promise.reject("Unknown Method")
  19 | 			end,
  20 | 
  21 | 			-- [FIX] Mocking method baru RequestWithRetry
  22 | 			-- Di test environment, kita tidak butuh delay/retry loop asli.
  23 | 			-- Kita cukup bypass langsung ke Request biasa agar tes cepat selesai.
  24 | 			RequestWithRetry = function(self, service, method, options, ...)
  25 | 				return self:Request(service, method, ...)
  26 | 			end,
  27 | 
  28 | 			Listen = function() end,
  29 | 		}
  30 | 
  31 | 		-- Mock Logger
  32 | 		InventoryCtrl.Logger = { Info = function() end, Warn = function() end }
  33 | 
  34 | 		it("should be a valid controller table", function()
  35 | 			expect(InventoryCtrl).to.be.ok()
  36 | 			expect(InventoryCtrl.Name).to.equal("Inventory")
  37 | 		end)
  38 | 
  39 | 		it("should fetch data and update state", function()
  40 | 			-- Inject State Manual (Mocking Fusion State)
  41 | 			local mockStateVal = {}
  42 | 			InventoryCtrl.State = {
  43 | 				Items = {
  44 | 					set = function(self, val)
  45 | 						mockStateVal = val
  46 | 					end,
  47 | 				},
  48 | 			}
  49 | 
  50 | 			-- Jalanin Logic
  51 | 			local p = InventoryCtrl:FetchData()
  52 | 
  53 | 			-- Tunggu Promise selesai
  54 | 			local success = p:awaitStatus()
  55 | 
  56 | 			expect(success).to.equal(Promise.Status.Resolved)
  57 | 			-- Validasi hasil mock
  58 | 			expect(mockStateVal[1].Name).to.equal("MockSword")
  59 | 		end)
  60 | 	end)
  61 | end
  62 | 
```
</details>

### üì¶ Group: Automation / Root

> *(No files found in this category)*

### üì¶ Group: Unknown

> *(No files found in this category)*


---
## üéØ AI QUICK REFERENCE

### üìÇ Rojo Architecture Mapping (Active Configuration)
> This is the **EXACT** mapping from `default.project.json`. 
> AI Agents MUST use these virtual paths when suggesting `require()` calls.

| Source Folder (Disk) | Roblox Service (Virtual) |
|---|---|
| `src/ReplicatedStorage/OVHL` | `game.ReplicatedStorage.OVHL` |
| `Packages` | `game.ReplicatedStorage.Packages` |
| `tests/ReplicatedStorage` | `game.ReplicatedStorage.Tests` |
| `src/ServerScriptService/OVHL` | `game.ServerScriptService.OVHL` |
| `tests/ServerScriptService` | `game.ServerScriptService.Tests` |
| `src/StarterPlayer/StarterPlayerScripts/OVHL` | `game.StarterPlayer.StarterPlayerScripts.OVHL` |
| `tests/StarterPlayer/StarterPlayerScripts` | `game.StarterPlayer.StarterPlayerScripts.Tests` |


---
*Generated by OVHL Tools | Enterprise Edition*
